(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const Me={lang_native_name:"English",score:"Score",level:"Level",lives:"Lives",highscore:"Highscore",main_menu_title:"MAIN MENU",pause_header:"PAUSE",energy:"Energy",tab_spiel:"Game",tab_galerie:"Gallery",tab_arsenal:"Arsenal",tab_gegner:"Enemies",tab_rangliste:"Leaderboard",tab_einstellungen:"Settings",btn_resume:"Resume",btn_start_game:"START GAME",btn_restart:"Restart",btn_quit:"Quit to Menu",btn_quit_to_menu:"Quit to Menu",btn_exit:"EXIT GAME",btn_back:"Back",btn_shop:"Shop",btn_buy:"Buy",btn_upgrade:"Upgrade",btn_unlock:"Unlock",btn_equip:"Equip",btn_equipped:"Equipped",btn_max_level:"Max Level",mode_select_title:"Choose Mode",btn_campaign:"Campaign",btn_endless:"Endless",endless_wave:"Endless Wave",endless_wave_breather:"Endless Wave: Breather Wave",affix_frenzy:"Frenzy",affix_thick_skins:"Thick Skins",affix_bullet_hell:"Bullet Hell",affix_blink_storm:"Blink Storm",settings_language_label:"Language",settings_language_desc:"Changes the display language of the game.",settings_volume_label:"Master Volume",settings_volume_desc:"Controls the overall volume of the game.",settings_music_label:"Music",settings_music_desc:"Toggles the background music on or off.",settings_sfx_label:"SFX",settings_sfx_desc:"Toggles sound effects like shots and explosions on or off.",settings_particles_label:"Particles",settings_particles_desc:"Sets the amount of particle effects for explosions (HIGH, LOW, OFF).",settings_shake_label:"Screen Shake",settings_shake_desc:"Enables or disables screen shake on hits and explosions.",shop_title:"Arsenal Shop",shop_tab_permanent:"Upgrades",shop_tab_consumable:"Consumables",shop_tab_cosmetic:"Cosmetics",shop_tab_pi_bundle:"Pi Coins",shop_tab_ultimate:"Ultimate",shop_your_coins:"Your Coins",shop_category_permanent:"Permanent Upgrades",shop_category_consumable:"Consumables",shop_category_cosmetic:"Cosmetic Enhancements",shop_category_pi_bundles:"Pi Coin Bundles",shop_category_ultimate:"Ultimate Prestige Upgrades",shop_upgrade_active_next_round:"(Active on next run)",shop_pi_bundle_1_name:"Coin Pouch",shop_pi_bundle_1_desc:"A small pouch of 1,000 in-game coins.",shop_pi_bundle_2_name:"Coin Satchel",shop_pi_bundle_2_desc:"A handy satchel containing 5,500 in-game coins (10% bonus).",shop_pi_bundle_3_name:"Coin Chest",shop_pi_bundle_3_desc:"A large chest filled with 12,000 in-game coins (20% bonus).",shop_pi_bundle_4_name:"Coin Crate",shop_pi_bundle_4_desc:"A reinforced crate with 65,000 in-game coins (30% bonus). Best value!",shop_pi_bundle_5_name:"Coin Vault",shop_pi_bundle_5_desc:"The ultimate fortune! A vault containing 150,000 in-game coins (50% bonus).",shop_start_lives_name:"Extra Life",shop_start_lives_desc:"Start every run with an additional life. Also increases max lives.",shop_start_energy_name:"Reinforced Hull",shop_start_energy_desc:"Increases your ship's maximum energy by 10 per level.",shop_coin_value_name:"Coin Amplifier",shop_coin_value_desc:"Each collected coin is worth more.",shop_powerup_duration_name:"Extended Duration",shop_powerup_duration_desc:"Increases the active duration of timed power-ups by 10% per level.",shop_luck_chance_name:"Lucky Charm",shop_luck_chance_desc:"Slightly increases the chance for better power-ups to drop from enemies.",shop_special_charge_name:"Special Ordinance",shop_special_charge_desc:"Start every run with one random, free Special item in your inventory.",shop_coin_magnet_name:"Coin Collection Field",shop_coin_magnet_desc:"Generates a field that automatically pulls in nearby coins.",shop_revive_chance_name:"Phoenix Core",shop_revive_chance_desc:"Unlocks Phoenix Core Crystals that automatically revive you upon death. Each upgrade tier adds a new crystal (up to 3) for each run.",shop_special_stack_name:"Special Stack Size",shop_special_stack_desc:"Increases the stack size for collected Special items from {current} to {next}.",shop_special_stack_desc_max:"Special item stack size is maxed out at {current}.",shop_ultimate_drone_mastery_name:"Drone Mastery",shop_ultimate_drone_mastery_desc:"An ultimate upgrade. Start every run with a permanent Tier 1 Orbital Drone.",shop_ultimate_weapon_prestige_name:"Weapon Prestige",shop_ultimate_weapon_prestige_desc:"An ultimate upgrade. Start every run permanently at Weapon Tier 2.",shop_consume_shield_name:"Instant Shield",shop_consume_shield_desc:"Start your next run with a shield already active.",shop_consume_nuke_name:"Emergency Nuke",shop_consume_nuke_desc:"Start your next run with a Nuke in your inventory.",shop_consume_extralife_name:"Last Stand",shop_consume_extralife_desc:"Start your next run with one extra life for that run only.",shop_consume_ghost_name:"Phase Shift Serum",shop_consume_ghost_desc:"Start your next run with a 30-second Ghost Protocol effect.",shop_consume_boss_slayer_name:"Boss Slayer Ammo",shop_consume_boss_slayer_desc:"Your weapons deal 25% more damage against Bosses for one run.",shop_skin_default_name:"Interceptor MK-I",shop_skin_sentinel_name:"Sentinel Skin",shop_skin_sentinel_desc:"A cosmetic skin for your ship resembling the Tier 2 upgrade.",shop_skin_renegade_name:"Renegade Skin",shop_skin_renegade_desc:"A cosmetic skin for your ship resembling the Tier 3 upgrade.",shop_skin_avenger_name:"Avenger Skin",shop_skin_avenger_desc:"A cosmetic skin for your ship resembling the Tier 4 upgrade.",shop_skin_void_name:"Void Stalker Skin",shop_skin_void_desc:"A menacing, dark purple cosmetic skin for your ship.",shop_skin_gold_name:"Golden Paragon Skin",shop_skin_gold_desc:"A legendary, golden cosmetic skin for the ultimate pilot.",shop_proj_green_name:"Green Lasers",shop_proj_green_desc:"A cosmetic style that changes your projectile color to vibrant green.",shop_proj_fireball_name:"Sunfire Rounds",shop_proj_fireball_desc:"A cosmetic style that makes your projectiles look like fireballs.",shop_proj_purple_name:"Void Bolts",shop_proj_purple_desc:"A cosmetic style that changes your projectile color to dark purple.",shop_trail_rainbow_name:"Rainbow Trail",shop_trail_rainbow_desc:"A cosmetic engine trail that leaves a vibrant rainbow in your wake.",arsenal_cat_weapon_upgrade:"Weapon Upgrade",arsenal_cat_weapon_mod:"Weapon Mod",arsenal_cat_ultra_weapon:"Ultra Weapons (Inventory)",arsenal_cat_defense:"Defense",arsenal_cat_special:"Specials (Inventory)",powerup_wup_name:"Weapon Tier Up (W+)",powerup_wup_desc:"Increases weapon tier. Tier 2 (90s), 3 (60s) & 4 (30s) are timed and downgrade on expiration. Lose a tier on any hit (min. Tier 1).",powerup_rapid_fire_name:"Rapid Fire",powerup_rapid_fire_desc:"Significantly increases fire rate for 30 seconds.",powerup_side_shots_name:"Side Shots",powerup_side_shots_desc:"Fires additional shots to the sides, regardless of the active power-up. Active for 15 seconds.",powerup_laser_name:"Laser Beam",powerup_laser_desc:"Collects a Laser Beam in the Ultra Inventory. Fires a piercing energy beam for 7.75 seconds. Activate with key 4 or 5.",powerup_homing_missiles_name:"Homing Missiles",powerup_homing_missiles_desc:"Collects Homing Missiles in the Ultra Inventory. Fires seeking missiles for 15 seconds. Activate with key 4 or 5.",powerup_shield_name:"Shield",powerup_shield_desc:"Absorbs one hit. Lasts until hit.",powerup_repair_kit_name:"Repair Kit",powerup_repair_kit_desc:"Fully restores the ship's energy.",powerup_extra_life_name:"Extra Life",powerup_extra_life_desc:"Instantly grants one extra life, up to the maximum allowed.",powerup_ghost_protocol_name:"Ghost Protocol",powerup_ghost_protocol_desc:"Makes the ship invulnerable and immune to collisions for a short time.",powerup_orbital_drone_name:"Orbital Drone",powerup_orbital_drone_desc:"Collects an autonomous combat drone. Up to 3 drones are active for 30s. Each new drone resets the timer for all.",powerup_nuke_name:"Nuke",powerup_nuke_desc:"Instantly destroys all visible standard enemies. Activate with key 1, 2, or 3.",powerup_black_hole_name:"Black Hole",powerup_black_hole_desc:"Creates a black hole. Hold key 1, 2, or 3 to aim and release to deploy. Pulls in enemies (boss-immune).",powerup_score_boost_name:"Score Boost",powerup_score_boost_desc:"Doubles all points collected for 20 seconds. Activate with key 1, 2, or 3.",gegner_header:"Hostile Units",gegner_grunt_name:"Grunt",gegner_grunt_desc:"Standard infantry. Flies in a straight line and is the most basic threat.",gegner_weaver_name:"Weaver",gegner_weaver_desc:"Moves in unpredictable sine waves and is difficult to hit.",gegner_tank_name:"Tank",gegner_tank_desc:"Slow but heavily armored. Withstands multiple hits and deals increased collision damage.",gegner_shooter_name:"Shooter",gegner_shooter_desc:"Regularly fires single projectiles at the player. A high priority target.",gegner_teleporter_name:"Teleporter",gegner_teleporter_desc:"Disappears and reappears at different locations, firing targeted shots. Hard to pin down.",gegner_sentinel_prime_name:"Sentinel Prime",gegner_sentinel_prime_desc:"A patrol craft with varied attacks, including spreads, spirals, and a dangerous charge attack.",gegner_void_serpent_name:"Void Serpent",gegner_void_serpent_desc:"A massive leviathan that moves in a wide, serpentine pattern, firing wide volleys and targeted whips.",gegner_omega_nexus_name:"Omega Nexus",gegner_omega_nexus_desc:"A fortress-like war engine. Its attack patterns change with damage, culminating in a powerful laser beam.",gegner_nexus_prime_name:"Nexus Prime (Final)",gegner_nexus_prime_desc:"The ultimate form of the Nexus. Features a sweeping laser, indestructible drones, and a relentless bullet hell.",strength_low:"Low",strength_medium:"Medium",strength_high:"High",strength_extreme:"Extreme",strength_apocalyptic:"Apocalyptic",strength_final:"FINAL",formation_incoming:"Formation Incoming!",wave_msg_1_invasion:"Wave 1: Invasion",wave_msg_2_sighting:"Wave 2: Weavers Sighted",wave_msg_3_heavy:"Wave 3: Heavy Units",wave_msg_4_returnfire:"Wave 4: Return Fire!",wave_msg_5_multi_formation:"Wave 5: Coordinated Assault",wave_msg_6_weaverrain:"Wave 6: Weaver Rain",wave_msg_7_skirmish:"Wave 7: Skirmish",wave_msg_8_surge:"Wave 8: Enemy Surge",wave_msg_9_pressure:"Wave 9: Mounting Pressure",wave_msg_10_sentinel_prime:"WAVE 10: BOSS - SENTINEL PRIME",wave_msg_11_reinforcements:"Wave 11: Reinforcements",wave_msg_12_crossfire:"Wave 12: Crossfire",wave_msg_13_swarm:"Wave 13: Swarm Tactics",wave_msg_14_ambush:"Wave 14: Ambush",wave_msg_15_multi_formation:"Wave 15: Squadron Attack",wave_msg_16_flank:"Wave 16: Flanking Maneuvers",wave_msg_17_composite:"Wave 17: Composite Force",wave_msg_18_turbulence:"Wave 18: Turbulence",wave_msg_19_heatup:"Wave 19: Pressure Point",wave_msg_20_void_serpent:"WAVE 20: BOSS - VOID SERPENT",wave_msg_21_surge:"Wave 21: Phasing Surge",wave_msg_22_ironwall:"Wave 22: Iron Wall",wave_msg_23_press:"Wave 23: The Press",wave_msg_24_crosslines:"Wave 24: Crossing Lines",wave_msg_25_multi_formation:"Wave 25: Phalanx Formation",wave_msg_26_combined_arms:"Wave 26: Combined Arms",wave_msg_27_ambit:"Wave 27: The Ambit",wave_msg_28_thin_red_line:"Wave 28: Thin Red Line",wave_msg_29_furnace:"Wave 29: The Furnace",wave_msg_30_omega_nexus:"WAVE 30: BOSS - OMEGA NEXUS",wave_msg_31_phase_shift:"Wave 31: Phase Shift",wave_msg_32_crossarmor:"Wave 32: Cross Armor",wave_msg_33_circle_assault:"Wave 33: Circle Assault",wave_msg_34_pulse:"Wave 34: Heavy Pulse",wave_msg_35_multi_formation:"Wave 35: Grand Formation",wave_msg_36_barrage:"Wave 36: Unrelenting Barrage",wave_msg_37_matrix:"Wave 37: The Matrix",wave_msg_38_overload:"Wave 38: System Overload",wave_msg_39_last_stand:"Wave 39: Last Stand",wave_msg_40_nexus_prime:"WAVE 40: BOSS - NEXUS PRIME",wave_msg_41_countercharge:"Wave 41: Countercharge",wave_msg_42_heavy_push:"Wave 42: Heavy Push",wave_msg_43_v_shape:"Wave 43: V-Formation",wave_msg_44_phase_storm:"Wave 44: Phase Storm",wave_msg_45_multi_formation_final:"Wave 45: The Final Formation",wave_msg_46_anvil:"Wave 46: The Anvil",wave_msg_47_circle_strike:"Wave 47: Circle of Strike",wave_msg_48_maelstrom:"Wave 48: Maelstrom",wave_msg_49_critical_mass:"Wave 49: Critical Mass",wave_msg_50_final:"WAVE 50: FINAL BOSS - NEXUS PRIME",game_over_title:"GAME OVER",game_over_final_score:"Final Score",victory_title:"VICTORY!",victory_final_score:"Final Score",victory_prompt:"Press ENTER to return to Menu",intro_prompt:"Press ENTER to Begin",intro_prompt_mobile:"Tap to Start Game",lang_select_title:"SELECT LANGUAGE",exit_title:"See You Soon!",exit_message:"You can now safely close this tab.",w_tier:"W-Tier",off:"OFF",low:"LOW",high:"HIGH",on:"ON",leaderboard_loading:"Loading Leaderboard...",leaderboard_error:"Error loading leaderboard. Please try again later.",leaderboard_no_entries:"No entries found. Be the first!",leaderboard_player:"Player",waves:"Waves"},Ae={lang_native_name:"Deutsch",score:"Punkte",level:"Level",lives:"Leben",highscore:"Highscore",main_menu_title:"HAUPTMENÜ",pause_header:"PAUSE",energy:"Energie",tab_spiel:"Spiel",tab_galerie:"Galerie",tab_arsenal:"Arsenal",tab_gegner:"Gegner",tab_rangliste:"Rangliste",tab_einstellungen:"Einstellungen",btn_resume:"Fortsetzen",btn_start_game:"SPIEL STARTEN",btn_restart:"Neu starten",btn_quit:"Zum Hauptmenü",btn_quit_to_menu:"Zum Menü",btn_exit:"SPIEL BEENDEN",btn_back:"Zurück",btn_shop:"Shop",btn_buy:"Kaufen",btn_upgrade:"Aufwerten",btn_unlock:"Freischalten",btn_equip:"Ausrüsten",btn_equipped:"Ausrüstet",btn_max_level:"Max. Stufe",mode_select_title:"Modus wählen",btn_campaign:"Kampagne",btn_endless:"Endlos",endless_wave:"Endloswelle",endless_wave_breather:"Endloswelle: Verschnaufpause",affix_frenzy:"Raserei",affix_thick_skins:"Dicke Haut",affix_bullet_hell:"Kugelhagel",affix_blink_storm:"Teleport-Sturm",settings_language_label:"Sprache",settings_language_desc:"Ändert die Anzeigesprache des Spiels.",settings_volume_label:"Master-Lautstärke",settings_volume_desc:"Steuert die Gesamtlautstärke des Spiels.",settings_music_label:"Musik",settings_music_desc:"Schaltet die Hintergrundmusik ein oder aus.",settings_sfx_label:"SFX",settings_sfx_desc:"Schaltet Soundeffekte wie Schüsse und Explosionen ein oder aus.",settings_particles_label:"Partikel",settings_particles_desc:"Stellt die Menge der Partikeleffekte für Explosionen ein (HOCH, NIEDRIG, AUS).",settings_shake_label:"Screen Shake",settings_shake_desc:"Aktiviert oder deaktiviert das Bildschirmwackeln bei Treffern und Explosionen.",shop_title:"Arsenal-Shop",shop_tab_permanent:"Upgrades",shop_tab_consumable:"Verbrauch",shop_tab_cosmetic:"Optik",shop_tab_pi_bundle:"Pi Münzen",shop_tab_ultimate:"Ultimativ",shop_your_coins:"Deine Münzen",shop_category_permanent:"Permanente Upgrades",shop_category_consumable:"Verbrauchsgegenstände",shop_category_cosmetic:"Kosmetische Anpassungen",shop_category_pi_bundles:"Pi-Münzpakete",shop_category_ultimate:"Ultimative Prestige-Upgrades",shop_upgrade_active_next_round:"(Aktiv ab nächstem Versuch)",shop_pi_bundle_1_name:"Münzbeutel",shop_pi_bundle_1_desc:"Ein kleiner Beutel mit 1.000 Spielmünzen.",shop_pi_bundle_2_name:"Münztasche",shop_pi_bundle_2_desc:"Eine handliche Tasche mit 5.500 Spielmünzen (10% Bonus).",shop_pi_bundle_3_name:"Münztruhe",shop_pi_bundle_3_desc:"Eine große Truhe, gefüllt mit 12.000 Spielmünzen (20% Bonus).",shop_pi_bundle_4_name:"Münzkiste",shop_pi_bundle_4_desc:"Eine verstärkte Kiste mit 65.000 Spielmünzen (30% Bonus). Bester Wert!",shop_pi_bundle_5_name:"Münztresor",shop_pi_bundle_5_desc:"Das ultimative Vermögen! Ein Tresor mit 150.000 Spielmünzen (50% Bonus).",shop_start_lives_name:"Zusätzliches Leben",shop_start_lives_desc:"Starte jeden Versuch mit einem zusätzlichen Leben. Erhöht auch das maximale Leben.",shop_start_energy_name:"Verstärkter Rumpf",shop_start_energy_desc:"Erhöht die maximale Energie deines Schiffes um 10 pro Stufe.",shop_coin_value_name:"Münzverstärker",shop_coin_value_desc:"Jede eingesammelte Münze ist mehr wert.",shop_powerup_duration_name:"Verlängerte Dauer",shop_powerup_duration_desc:"Erhöht die Wirkungsdauer von zeitlich begrenzten Power-Ups um 10% pro Stufe.",shop_luck_chance_name:"Glücksbringer",shop_luck_chance_desc:"Erhöht leicht die Chance auf bessere Power-Ups von Gegnern.",shop_special_charge_name:"Spezial-Ordonnanz",shop_special_charge_desc:"Starte jeden Versuch mit einem zufälligen, kostenlosen Spezial-Item im Inventar.",shop_coin_magnet_name:"Münz-Sammelfeld",shop_coin_magnet_desc:"Erzeugt ein Feld, das automatisch Münzen in der Nähe anzieht.",shop_revive_chance_name:"Phönix-Kern",shop_revive_chance_desc:"Schaltet Phönix-Kern-Kristalle frei, die dich beim Tod automatisch wiederbeleben. Jede Stufe fügt einen neuen Kristall (bis zu 3) für jede Runde hinzu.",shop_special_stack_name:"Spezial-Stapelgröße",shop_special_stack_desc:"Erhöht die Stapelgröße für gesammelte Spezial-Items von {current} auf {next}.",shop_special_stack_desc_max:"Die Stapelgröße für Spezial-Items ist mit {current} maximiert.",shop_ultimate_drone_mastery_name:"Drohnen-Meisterschaft",shop_ultimate_drone_mastery_desc:"Ein ultimatives Upgrade. Starte jeden Versuch mit einer permanenten Stufe-1-Orbitaldrohne.",shop_ultimate_weapon_prestige_name:"Waffen-Prestige",shop_ultimate_weapon_prestige_desc:"Ein ultimatives Upgrade. Starte jeden Versuch permanent mit Waffenstufe 2.",shop_consume_shield_name:"Sofort-Schild",shop_consume_shield_desc:"Starte deinen nächsten Versuch mit einem bereits aktiven Schild.",shop_consume_nuke_name:"Notfall-Nuke",shop_consume_nuke_desc:"Starte deinen nächsten Versuch mit einer Nuke im Inventar.",shop_consume_extralife_name:"Letzte Chance",shop_consume_extralife_desc:"Starte deinen nächsten Versuch nur für diesen einen Lauf mit einem Extraleben.",shop_consume_ghost_name:"Phasenverschiebungs-Serum",shop_consume_ghost_desc:"Starte deinen nächsten Versuch mit einem 30-sekündigen Geist-Protokoll-Effekt.",shop_consume_boss_slayer_name:"Boss-Jäger-Munition",shop_consume_boss_slayer_desc:"Deine Waffen verursachen für einen Versuch 25% mehr Schaden gegen Bosse.",shop_skin_default_name:"Abfangjäger MK-I",shop_skin_sentinel_name:"Sentinel-Skin",shop_skin_sentinel_desc:"Ein kosmetischer Skin für dein Schiff, der dem Tier-2-Upgrade ähnelt.",shop_skin_renegade_name:"Renegade-Skin",shop_skin_renegade_desc:"Ein kosmetischer Skin für dein Schiff, der dem Tier-3-Upgrade ähnelt.",shop_skin_avenger_name:"Avenger-Skin",shop_skin_avenger_desc:"Ein kosmetischer Skin für dein Schiff, der dem Tier-4-Upgrade ähnelt.",shop_skin_void_name:"Leerenpirscher-Skin",shop_skin_void_desc:"Ein bedrohlicher, dunkelvioletter kosmetischer Skin für dein Schiff.",shop_skin_gold_name:"Goldener Paragon-Skin",shop_skin_gold_desc:"Ein legendärer, goldener kosmetischer Skin für den ultimativen Piloten.",shop_proj_green_name:"Grüne Laser",shop_proj_green_desc:"Ein kosmetischer Stil, der die Farbe deiner Projektile in leuchtendes Grün ändert.",shop_proj_fireball_name:"Sonnenfeuer-Geschosse",shop_proj_fireball_desc:"Ein kosmetischer Stil, der deine Projektile wie Feuerbälle aussehen lässt.",shop_proj_purple_name:"Leeren-Bolzen",shop_proj_purple_desc:"Ein kosmetischer Stil, der die Farbe deiner Projektile in Dunkelviolett ändert.",shop_trail_rainbow_name:"Regenbogenspur",shop_trail_rainbow_desc:"Eine kosmetische Antriebsspur, die einen leuchtenden Regenbogen hinterlässt.",arsenal_cat_weapon_upgrade:"Waffen-Upgrade",arsenal_cat_weapon_mod:"Waffen-Mod",arsenal_cat_ultra_weapon:"Ultra-Waffen (Inventar)",arsenal_cat_defense:"Verteidigung",arsenal_cat_special:"Spezial (Inventar)",powerup_wup_name:"Waffenstufe Up (W+)",powerup_wup_desc:"Erhöht die Waffenstufe. Stufe 2 (90s), 3 (60s) & 4 (30s) sind zeitlich begrenzt und fallen bei Ablauf ab. Bei jedem Treffer wird eine Stufe verloren (min. Stufe 1).",powerup_rapid_fire_name:"Schnellfeuer",powerup_rapid_fire_desc:"Erhöht die Schussfrequenz erheblich für 30 Sekunden.",powerup_side_shots_name:"Seitenschüsse",powerup_side_shots_desc:"Feuert zusätzlich zu den Seiten, egal welches Power-up aktiv ist. Aktiv für 15 Sekunden.",powerup_laser_name:"Laserstrahl",powerup_laser_desc:"Sammelt einen Laserstrahl im Ultra-Inventar. Feuert einen durchdringenden Energiestrahl für 7,75 Sekunden. Aktivierung mit Taste 4 oder 5.",powerup_homing_missiles_name:"Zielsuchende Raketen",powerup_homing_missiles_desc:"Sammelt zielsuchende Raketen im Ultra-Inventar. Feuert Raketen für 15 Sekunden. Aktivierung mit Taste 4 oder 5.",powerup_shield_name:"Schild",powerup_shield_desc:"Absorbiert einen Treffer. Hält, bis er getroffen wird.",powerup_repair_kit_name:"Reparatur-Kit",powerup_repair_kit_desc:"Stellt die Energie des Schiffes vollständig wieder her.",powerup_extra_life_name:"Extra-Leben",powerup_extra_life_desc:"Gewährt sofort ein zusätzliches Leben, bis zum erlaubten Maximum.",powerup_ghost_protocol_name:"Geist-Protokoll",powerup_ghost_protocol_desc:"Macht das Schiff für kurze Zeit unverwundbar und immun gegen Kollisionen.",powerup_orbital_drone_name:"Orbital-Drohne",powerup_orbital_drone_desc:"Sammelt eine autonome Kampfdrohne. Bis zu 3 Drohnen sind für 30s aktiv. Jede neue Drohne setzt den Timer für alle zurück.",powerup_nuke_name:"Nuke",powerup_nuke_desc:"Zerstört sofort alle sichtbaren Standard-Gegner. Aktivierung mit Taste 1, 2 oder 3.",powerup_black_hole_name:"Schwarzes Loch",powerup_black_hole_desc:"Erzeugt ein Schwarzes Loch. Zum Zielen Taste 1, 2 oder 3 gedrückt halten und zum Platzieren loslassen. Zieht Gegner an (Boss-immun).",powerup_score_boost_name:"Punkte-Boost",powerup_score_boost_desc:"Verdoppelt alle gesammelten Punkte für 20 Sekunden. Aktivierung mit Taste 1, 2 oder 3.",gegner_header:"Feindliche Einheiten",gegner_grunt_name:"Grunt",gegner_grunt_desc:"Standard-Infanterie. Fliegt geradlinig und stellt die grundlegendste Bedrohung dar.",gegner_weaver_name:"Weaver",gegner_weaver_desc:"Bewegt sich in unvorhersehbaren Sinuswellen und ist schwer zu treffen.",gegner_tank_name:"Tank",gegner_tank_desc:"Langsam, aber stark gepanzert. Hält mehrere Treffer aus und verursacht bei Kollision erhöhten Schaden.",gegner_shooter_name:"Shooter",gegner_shooter_desc:"Feuert regelmäßig einzelne Projektile auf den Spieler. Eine hohe Priorität beim Ausschalten.",gegner_teleporter_name:"Teleporter",gegner_teleporter_desc:"Verschwindet und erscheint an verschiedenen Orten wieder und feuert gezielte Schüsse ab. Schwer zu fassen.",gegner_sentinel_prime_name:"Sentinel Prime",gegner_sentinel_prime_desc:"Ein Patrouillenschiff mit vielfältigen Angriffen, darunter Fächer, Spiralen und ein gefährlicher Sturzangriff.",gegner_void_serpent_name:"Leeren-Serpent",gegner_void_serpent_desc:"Ein massiver Leviathan, der sich in weiten Schlangenlinien bewegt und breite Salven sowie gezielte Peitschenhiebe abfeuert.",gegner_omega_nexus_name:"Omega Nexus",gegner_omega_nexus_desc:"Eine festungsartige Kriegsmaschine. Seine Angriffsmuster ändern sich mit dem erlittenen Schaden und gipfeln in einem mächtigen Laserstrahl.",gegner_nexus_prime_name:"Nexus Prime (Final)",gegner_nexus_prime_desc:"Die ultimative Form des Nexus. Verfügt über einen fegenden Laser, unzerstörbare Drohnen und einen unerbittlichen Kugelhagel.",strength_low:"Niedrig",strength_medium:"Mittel",strength_high:"Hoch",strength_extreme:"Extrem",strength_apocalyptic:"Apokalyptisch",strength_final:"FINAL",formation_incoming:"Formation im Anflug!",wave_msg_1_invasion:"Welle 1: Invasion",wave_msg_2_sighting:"Welle 2: Weaver gesichtet",wave_msg_3_heavy:"Welle 3: Schwere Einheiten",wave_msg_4_returnfire:"Welle 4: Gegenfeuer!",wave_msg_5_multi_formation:"Welle 5: Koordinierter Angriff",wave_msg_6_weaverrain:"Welle 6: Weaver-Regen",wave_msg_7_skirmish:"Welle 7: Gefecht",wave_msg_8_surge:"Welle 8: Gegnerwelle",wave_msg_9_pressure:"Welle 9: Steigender Druck",wave_msg_10_sentinel_prime:"WELLE 10: BOSS - SENTINEL PRIME",wave_msg_11_reinforcements:"Welle 11: Verstärkung",wave_msg_12_crossfire:"Welle 12: Kreuzfeuer",wave_msg_13_swarm:"Welle 13: Schwarmtaktik",wave_msg_14_ambush:"Welle 14: Hinterhalt",wave_msg_15_multi_formation:"Welle 15: Geschwaderangriff",wave_msg_16_flank:"Welle 16: Flankenmanöver",wave_msg_17_composite:"Welle 17: Gemischte Verbände",wave_msg_18_turbulence:"Welle 18: Turbulenzen",wave_msg_19_heatup:"Welle 19: Krisenpunkt",wave_msg_20_void_serpent:"WELLE 20: BOSS - LEEREN-SERPENT",wave_msg_21_surge:"Welle 21: Phasen-Welle",wave_msg_22_ironwall:"Welle 22: Eiserne Wand",wave_msg_23_press:"Welle 23: Die Zange",wave_msg_24_crosslines:"Welle 24: Gekreuzte Linien",wave_msg_25_multi_formation:"Welle 25: Phalanx-Formation",wave_msg_26_combined_arms:"Welle 26: Verbundene Waffen",wave_msg_27_ambit:"Welle 27: Der Perimeter",wave_msg_28_thin_red_line:"Welle 28: Dünne Rote Linie",wave_msg_29_furnace:"Welle 29: Der Schmelzofen",wave_msg_30_omega_nexus:"WELLE 30: BOSS - OMEGA NEXUS",wave_msg_31_phase_shift:"Welle 31: Phasenverschiebung",wave_msg_32_crossarmor:"Welle 32: Gepanzerter Schlag",wave_msg_33_circle_assault:"Welle 33: Zirkelangriff",wave_msg_34_pulse:"Welle 34: Schwerer Impuls",wave_msg_35_multi_formation:"Welle 35: Große Formation",wave_msg_36_barrage:"Welle 36: Unerbittliches Sperrfeuer",wave_msg_37_matrix:"Welle 37: Die Matrix",wave_msg_38_overload:"Welle 38: Systemüberlastung",wave_msg_39_last_stand:"Welle 39: Letztes Gefecht",wave_msg_40_nexus_prime:"WELLE 40: BOSS - NEXUS PRIME",wave_msg_41_countercharge:"Welle 41: Gegenangriff",wave_msg_42_heavy_push:"Welle 42: Schwerer Vorstoß",wave_msg_43_v_shape:"Welle 43: V-Formation",wave_msg_44_phase_storm:"Welle 44: Phasensturm",wave_msg_45_multi_formation_final:"Welle 45: Die Finale Formation",wave_msg_46_anvil:"Welle 46: Der Amboss",wave_msg_47_circle_strike:"Welle 47: Zirkelschlag",wave_msg_48_maelstrom:"Welle 48: Malstrom",wave_msg_49_critical_mass:"Welle 49: Kritische Masse",wave_msg_50_final:"WELLE 50: FINALER BOSS - NEXUS PRIME",game_over_title:"SPIEL VORBEI",game_over_final_score:"Endstand",victory_title:"SIEG!",victory_final_score:"Endstand",victory_prompt:"ENTER drücken, um zum Menü zurückzukehren",intro_prompt:"ENTER drücken zum Starten",intro_prompt_mobile:"Tippen zum Starten",lang_select_title:"SPRACHE WÄHLEN",exit_title:"Bis bald!",exit_message:"Du kannst diesen Tab jetzt sicher schließen.",w_tier:"W-Stufe",off:"AUS",low:"NIEDRIG",high:"HOCH",on:"AN",leaderboard_loading:"Lade Rangliste...",leaderboard_error:"Fehler beim Laden der Rangliste. Bitte später erneut versuchen.",leaderboard_no_entries:"Keine Einträge gefunden. Sei der Erste!",leaderboard_player:"Spieler",waves:"Wellen"},ke={lang_native_name:"Español",score:"Puntuación",level:"Nivel",lives:"Vidas",highscore:"Puntuación Máxima",main_menu_title:"MENÚ PRINCIPAL",pause_header:"PAUSA",energy:"Energía",tab_spiel:"Juego",tab_galerie:"Galería",tab_arsenal:"Arsenal",tab_gegner:"Enemigos",tab_rangliste:"Clasificación",tab_einstellungen:"Ajustes",btn_resume:"Reanudar",btn_start_game:"INICIAR JUEGO",btn_restart:"Reiniciar",btn_quit:"Salir al Menú",btn_quit_to_menu:"Salir al Menú",btn_exit:"SALIR DEL JUEGO",btn_back:"Volver",btn_shop:"Tienda",btn_buy:"Comprar",btn_upgrade:"Mejorar",btn_unlock:"Desbloquear",btn_equip:"Equipar",btn_equipped:"Equipado",btn_max_level:"Nivel Máx.",mode_select_title:"Elige Modo",btn_campaign:"Campaña",btn_endless:"Infinito",endless_wave:"Oleada Infinita",endless_wave_breather:"Oleada Infinita: Oleada de Respiro",affix_frenzy:"Frenesí",affix_thick_skins:"Pieles Gruesas",affix_bullet_hell:"Infierno de Balas",affix_blink_storm:"Tormenta de Destellos",settings_language_label:"Idioma",settings_language_desc:"Cambia el idioma de visualización del juego.",settings_volume_label:"Volumen Principal",settings_volume_desc:"Controla el volumen general del juego.",settings_music_label:"Música",settings_music_desc:"Activa o desactiva la música de fondo.",settings_sfx_label:"Efectos de Sonido",settings_sfx_desc:"Activa o desactiva los efectos de sonido como disparos y explosiones.",settings_particles_label:"Partículas",settings_particles_desc:"Establece la cantidad de efectos de partículas para las explosiones (ALTO, BAJO, NO).",settings_shake_label:"Vibración de Pantalla",settings_shake_desc:"Activa o desactiva la vibración de la pantalla con los impactos y explosiones.",shop_title:"Tienda del Arsenal",shop_tab_permanent:"Mejoras",shop_tab_consumable:"Consumibles",shop_tab_cosmetic:"Cosméticos",shop_tab_pi_bundle:"Monedas Pi",shop_tab_ultimate:"Supremo",shop_your_coins:"Tus Monedas",shop_category_permanent:"Mejoras Permanentes",shop_category_consumable:"Consumibles",shop_category_cosmetic:"Mejoras Cosméticas",shop_category_pi_bundles:"Paquetes de Monedas Pi",shop_category_ultimate:"Mejoras de Prestigio Supremo",shop_upgrade_active_next_round:"(Activo en la próxima partida)",shop_pi_bundle_1_name:"Bolsa de Monedas",shop_pi_bundle_1_desc:"Una pequeña bolsa con 1.000 monedas del juego.",shop_pi_bundle_2_name:"Saco de Monedas",shop_pi_bundle_2_desc:"Un práctico saco con 5.500 monedas del juego (10% extra).",shop_pi_bundle_3_name:"Cofre de Monedas",shop_pi_bundle_3_desc:"Un gran cofre lleno con 12.000 monedas del juego (20% extra).",shop_pi_bundle_4_name:"Caja de Monedas",shop_pi_bundle_4_desc:"Una caja reforzada con 65.000 monedas del juego (30% extra). ¡La mejor oferta!",shop_pi_bundle_5_name:"Bóveda de Monedas",shop_pi_bundle_5_desc:"¡La fortuna definitiva! Una bóveda con 150.000 monedas del juego (50% extra).",shop_start_lives_name:"Vida Extra",shop_start_lives_desc:"Comienza cada partida con una vida adicional. También aumenta las vidas máximas.",shop_start_energy_name:"Casco Reforzado",shop_start_energy_desc:"Aumenta la energía máxima de tu nave en 10 por nivel.",shop_coin_value_name:"Amplificador de Monedas",shop_coin_value_desc:"Cada moneda recogida vale más.",shop_powerup_duration_name:"Duración Extendida",shop_powerup_duration_desc:"Aumenta la duración activa de los potenciadores temporales en un 10% por nivel.",shop_luck_chance_name:"Amuleto de la Suerte",shop_luck_chance_desc:"Aumenta ligeramente la probabilidad de que los enemigos dejen caer mejores potenciadores.",shop_special_charge_name:"Munición Especial",shop_special_charge_desc:"Comienza cada partida con un objeto Especial aleatorio y gratuito en tu inventario.",shop_coin_magnet_name:"Campo de Recolección",shop_coin_magnet_desc:"Genera un campo que atrae automáticamente las monedas cercanas.",shop_revive_chance_name:"Núcleo Fénix",shop_revive_chance_desc:"Desbloquea Cristales del Núcleo Fénix que te reviven automáticamente al morir. Cada nivel de mejora añade un nuevo cristal (hasta 3) por cada partida.",shop_special_stack_name:"Tamaño de Acumulación Especial",shop_special_stack_desc:"Aumenta el tamaño de acumulación para los objetos Especiales de {current} a {next}.",shop_special_stack_desc_max:"El tamaño de acumulación de objetos Especiales está al máximo en {current}.",shop_ultimate_drone_mastery_name:"Maestría de Drones",shop_ultimate_drone_mastery_desc:"Una mejora suprema. Comienza cada partida con un Dron Orbital de Nivel 1 permanente.",shop_ultimate_weapon_prestige_name:"Prestigio de Arma",shop_ultimate_weapon_prestige_desc:"Una mejora suprema. Comienza cada partida permanentemente en Nivel de Arma 2.",shop_consume_shield_name:"Escudo Instantáneo",shop_consume_shield_desc:"Comienza tu próxima partida con un escudo ya activo.",shop_consume_nuke_name:"Bomba de Emergencia",shop_consume_nuke_desc:"Comienza tu próxima partida con una Bomba Nuclear en tu inventario.",shop_consume_extralife_name:"Última Oportunidad",shop_consume_extralife_desc:"Comienza tu próxima partida con una vida extra solo para esa partida.",shop_consume_ghost_name:"Suero de Fase",shop_consume_ghost_desc:"Comienza tu próxima partida con un efecto de Protocolo Fantasma de 30 segundos.",shop_consume_boss_slayer_name:"Munición Antijefes",shop_consume_boss_slayer_desc:"Tus armas infligen un 25% más de daño contra Jefes durante una partida.",shop_skin_default_name:"Interceptor MK-I",shop_skin_sentinel_name:"Diseño Sentinel",shop_skin_sentinel_desc:"Un diseño cosmético para tu nave que se asemeja a la mejora de Nivel 2.",shop_skin_renegade_name:"Diseño Renegado",shop_skin_renegade_desc:"Un diseño cosmético para tu nave que se asemeja a la mejora de Nivel 3.",shop_skin_avenger_name:"Diseño Vengador",shop_skin_avenger_desc:"Un diseño cosmético para tu nave que se asemeja a la mejora de Nivel 4.",shop_skin_void_name:"Diseño Acechador del Vacío",shop_skin_void_desc:"Un amenazante diseño cosmético de color púrpura oscuro para tu nave.",shop_skin_gold_name:"Diseño Paragón Dorado",shop_skin_gold_desc:"Un legendario diseño cosmético dorado para el piloto definitivo.",shop_proj_green_name:"Láseres Verdes",shop_proj_green_desc:"Un estilo cosmético que cambia el color de tus proyectiles a un verde vibrante.",shop_proj_fireball_name:"Proyectiles de Fuego Solar",shop_proj_fireball_desc:"Un estilo cosmético que hace que tus proyectiles parezcan bolas de fuego.",shop_proj_purple_name:"Virotes del Vacío",shop_proj_purple_desc:"Un estilo cosmético que cambia el color de tus proyectiles a púrpura oscuro.",shop_trail_rainbow_name:"Estela Arcoíris",shop_trail_rainbow_desc:"Una estela de motor cosmética que deja un vibrante arcoíris a tu paso.",arsenal_cat_weapon_upgrade:"Mejora de Arma",arsenal_cat_weapon_mod:"Mod de Arma",arsenal_cat_ultra_weapon:"Ultra Armas (Inventario)",arsenal_cat_defense:"Defensa",arsenal_cat_special:"Especiales (Inventario)",powerup_wup_name:"Subir Nivel de Arma (W+)",powerup_wup_desc:"Aumenta el nivel del arma. Nivel 2 (90s), 3 (60s) y 4 (30s) son temporales y bajan al expirar. Se pierde un nivel al recibir un impacto (mín. Nivel 1).",powerup_rapid_fire_name:"Fuego Rápido",powerup_rapid_fire_desc:"Aumenta significativamente la cadencia de fuego durante 30 segundos.",powerup_side_shots_name:"Disparos Laterales",powerup_side_shots_desc:"Dispara proyectiles adicionales hacia los lados, independientemente del poder activo. Dura 15 segundos.",powerup_laser_name:"Rayo Láser",powerup_laser_desc:"Recoge un Rayo Láser en el Inventario Ultra. Dispara un rayo de energía perforante durante 7.75 segundos. Activar con la tecla 4 o 5.",powerup_homing_missiles_name:"Misiles Teledirigidos",powerup_homing_missiles_desc:"Recoge Misiles Teledirigidos en el Inventario Ultra. Dispara misiles que buscan enemigos durante 15 segundos. Activar con la tecla 4 o 5.",powerup_shield_name:"Escudo",powerup_shield_desc:"Absorbe un impacto. Dura hasta ser golpeado.",powerup_repair_kit_name:"Kit de Reparación",powerup_repair_kit_desc:"Restaura completamente la energía de la nave.",powerup_extra_life_name:"Vida Extra",powerup_extra_life_desc:"Otorga instantáneamente una vida extra, hasta el máximo permitido.",powerup_ghost_protocol_name:"Protocolo Fantasma",powerup_ghost_protocol_desc:"Hace que la nave sea invulnerable e inmune a las colisiones por un corto tiempo.",powerup_orbital_drone_name:"Dron Orbital",powerup_orbital_drone_desc:"Recoge un dron de combate autónomo. Hasta 3 drones están activos por 30s. Cada nuevo dron reinicia el temporizador para todos.",powerup_nuke_name:"Bomba Nuclear",powerup_nuke_desc:"Destruye instantáneamente a todos los enemigos estándar visibles. Activar con la tecla 1, 2 o 3.",powerup_black_hole_name:"Agujero Negro",powerup_black_hole_desc:"Crea un agujero negro. Mantén presionada la tecla 1, 2 o 3 para apuntar y suéltala para desplegarlo. Atrae a los enemigos (inmune a jefes).",powerup_score_boost_name:"Multiplicador de Puntos",powerup_score_boost_desc:"Duplica todos los puntos obtenidos durante 20 segundos. Activar con la tecla 1, 2 o 3.",gegner_header:"Unidades Hostiles",gegner_grunt_name:"Grunt",gegner_grunt_desc:"Infantería estándar. Vuela en línea recta y es la amenaza más básica.",gegner_weaver_name:"Weaver",gegner_weaver_desc:"Se mueve en ondas sinusoidales impredecibles y es difícil de golpear.",gegner_tank_name:"Tank",gegner_tank_desc:"Lento pero muy blindado. Soporta múltiples impactos y causa mayor daño por colisión.",gegner_shooter_name:"Shooter",gegner_shooter_desc:"Dispara proyectiles individuales al jugador regularmente. Un objetivo de alta prioridad.",gegner_teleporter_name:"Teleporter",gegner_teleporter_desc:"Desaparece y reaparece en diferentes lugares, disparando tiros dirigidos. Difícil de fijar.",gegner_sentinel_prime_name:"Sentinel Prime",gegner_sentinel_prime_desc:"Una nave de patrulla con ataques variados, incluyendo ráfagas, espirales y un peligroso ataque de carga.",gegner_void_serpent_name:"Serpiente del Vacío",gegner_void_serpent_desc:"Un leviatán masivo que se mueve en un amplio patrón de serpentina, disparando andanadas y latigazos dirigidos.",gegner_omega_nexus_name:"Omega Nexus",gegner_omega_nexus_desc:"Una máquina de guerra tipo fortaleza. Sus patrones de ataque cambian con el daño, culminando en un potente rayo láser.",gegner_nexus_prime_name:"Nexus Prime (Final)",gegner_nexus_prime_desc:"La forma definitiva del Nexus. Cuenta con un láser de barrido, drones indestructibles y una lluvia de balas implacable.",strength_low:"Bajo",strength_medium:"Medio",strength_high:"Alto",strength_extreme:"Extremo",strength_apocalyptic:"Apocalíptico",strength_final:"FINAL",formation_incoming:"¡Formación Entrante!",wave_msg_1_invasion:"Oleada 1: Invasión",wave_msg_2_sighting:"Oleada 2: Weavers Avistados",wave_msg_3_heavy:"Oleada 3: Unidades Pesadas",wave_msg_4_returnfire:"Oleada 4: ¡Fuego de Respuesta!",wave_msg_5_multi_formation:"Oleada 5: Asalto Coordinado",wave_msg_6_weaverrain:"Oleada 6: Lluvia de Weavers",wave_msg_7_skirmish:"Oleada 7: Escaramuza",wave_msg_8_surge:"Oleada 8: Oleada Enemiga",wave_msg_9_pressure:"Oleada 9: Presión Creciente",wave_msg_10_sentinel_prime:"OLEADA 10: JEFE - SENTINEL PRIME",wave_msg_11_reinforcements:"Oleada 11: Refuerzos",wave_msg_12_crossfire:"Oleada 12: Fuego Cruzado",wave_msg_13_swarm:"Oleada 13: Tácticas de Enjambre",wave_msg_14_ambush:"Oleada 14: Emboscada",wave_msg_15_multi_formation:"Oleada 15: Ataque de Escuadrón",wave_msg_16_flank:"Oleada 16: Maniobras de Flanqueo",wave_msg_17_composite:"Oleada 17: Fuerza Compuesta",wave_msg_18_turbulence:"Oleada 18: Turbulencia",wave_msg_19_heatup:"Oleada 19: Punto de Presión",wave_msg_20_void_serpent:"OLEADA 20: JEFE - SERPIENTE DEL VACÍO",wave_msg_21_surge:"Oleada 21: Oleada Fásica",wave_msg_22_ironwall:"Oleada 22: Muro de Hierro",wave_msg_23_press:"Oleada 23: La Pinza",wave_msg_24_crosslines:"Oleada 24: Líneas Cruzadas",wave_msg_25_multi_formation:"Oleada 25: Formación de Falange",wave_msg_26_combined_arms:"Oleada 26: Armas Combinadas",wave_msg_27_ambit:"Oleada 27: El Perímetro",wave_msg_28_thin_red_line:"Oleada 28: Delgada Línea Roja",wave_msg_29_furnace:"Oleada 29: El Horno",wave_msg_30_omega_nexus:"OLEADA 30: JEFE - OMEGA NEXUS",wave_msg_31_phase_shift:"Oleada 31: Cambio de Fase",wave_msg_32_crossarmor:"Oleada 32: Blindaje Cruzado",wave_msg_33_circle_assault:"Oleada 33: Asalto Circular",wave_msg_34_pulse:"Oleada 34: Pulso Pesado",wave_msg_35_multi_formation:"Oleada 35: Gran Formación",wave_msg_36_barrage:"Oleada 36: Bombardeo Incesante",wave_msg_37_matrix:"Oleada 37: La Matriz",wave_msg_38_overload:"Oleada 38: Sobrecarga del Sistema",wave_msg_39_last_stand:"Oleada 39: Última Resistencia",wave_msg_40_nexus_prime:"OLEADA 40: JEFE - NEXUS PRIME",wave_msg_41_countercharge:"Oleada 41: Contracarga",wave_msg_42_heavy_push:"Oleada 42: Empuje Pesado",wave_msg_43_v_shape:"Oleada 43: Formación en V",wave_msg_44_phase_storm:"Oleada 44: Tormenta de Fase",wave_msg_45_multi_formation_final:"Oleada 45: La Formación Final",wave_msg_46_anvil:"Oleada 46: El Yunque",wave_msg_47_circle_strike:"Oleada 47: Círculo de Ataque",wave_msg_48_maelstrom:"Oleada 48: Maelstrom",wave_msg_49_critical_mass:"Oleada 49: Masa Crítica",wave_msg_50_final:"OLEADA 50: JEFE FINAL - NEXUS PRIME",game_over_title:"FIN DEL JUEGO",game_over_final_score:"Puntuación Final",victory_title:"¡VICTORIA!",victory_final_score:"Puntuación Final",victory_prompt:"Presiona ENTER para volver al Menú",intro_prompt:"Presiona ENTER para Empezar",intro_prompt_mobile:"Toca para Empezar",lang_select_title:"SELECCIONAR IDIOMA",exit_title:"¡Hasta pronto!",exit_message:"Ahora puedes cerrar esta pestaña de forma segura.",w_tier:"N-Arma",off:"NO",low:"BAJO",high:"ALTO",on:"SÍ",leaderboard_loading:"Cargando clasificación...",leaderboard_error:"Error al cargar la clasificación. Inténtalo de nuevo más tarde.",leaderboard_no_entries:"No se encontraron entradas. ¡Sé el primero!",leaderboard_player:"Jugador",waves:"Oleadas"},Ce={lang_native_name:"中文",score:"分数",level:"等级",lives:"生命",highscore:"最高分",main_menu_title:"主菜单",pause_header:"暂停",energy:"能量",tab_spiel:"游戏",tab_galerie:"画廊",tab_arsenal:"武器库",tab_gegner:"敌人",tab_rangliste:"排行榜",tab_einstellungen:"设置",btn_resume:"继续",btn_start_game:"开始游戏",btn_restart:"重新开始",btn_quit:"退出到菜单",btn_quit_to_menu:"退出到菜单",btn_exit:"退出游戏",btn_back:"返回",btn_shop:"商店",btn_buy:"购买",btn_upgrade:"升级",btn_unlock:"解锁",btn_equip:"装备",btn_equipped:"已装备",btn_max_level:"已满级",mode_select_title:"选择模式",btn_campaign:"战役",btn_endless:"无尽",endless_wave:"无尽波数",endless_wave_breather:"无尽波数：喘息波",affix_frenzy:"狂热",affix_thick_skins:"厚皮",affix_bullet_hell:"弹幕地狱",affix_blink_storm:"闪烁风暴",settings_language_label:"语言",settings_language_desc:"更改游戏的显示语言。",settings_volume_label:"主音量",settings_volume_desc:"控制游戏的整体音量。",settings_music_label:"音乐",settings_music_desc:"切换背景音乐的开启或关闭。",settings_sfx_label:"音效",settings_sfx_desc:"切换射击和爆炸等音效的开启或关闭。",settings_particles_label:"粒子效果",settings_particles_desc:"设置爆炸的粒子效果数量（高、低、关）。",settings_shake_label:"屏幕震动",settings_shake_desc:"启用或禁用命中和爆炸时的屏幕震动。",shop_title:"军火商店",shop_tab_permanent:"升级",shop_tab_consumable:"消耗品",shop_tab_cosmetic:"外观",shop_tab_pi_bundle:"Pi币",shop_tab_ultimate:"终极",shop_your_coins:"你的硬币",shop_category_permanent:"永久升级",shop_category_consumable:"消耗品",shop_category_cosmetic:"外观强化",shop_category_pi_bundles:"Pi 币捆绑包",shop_category_ultimate:"终极声望升级",shop_upgrade_active_next_round:"（下次运行时生效）",shop_pi_bundle_1_name:"硬币袋",shop_pi_bundle_1_desc:"一个装有 1,000 游戏币的小袋子。",shop_pi_bundle_2_name:"硬币包",shop_pi_bundle_2_desc:"一个装有 5,500 游戏币的便携包（10% 奖励）。",shop_pi_bundle_3_name:"硬币箱",shop_pi_bundle_3_desc:"一个装满 12,000 游戏币的大箱子（20% 奖励）。",shop_pi_bundle_4_name:"硬币箱",shop_pi_bundle_4_desc:"一个装有 65,000 游戏币的加固箱子（30% 奖励）。最超值！",shop_pi_bundle_5_name:"硬币金库",shop_pi_bundle_5_desc:"终极财富！一个装有 150,000 游戏币的金库（50% 奖励）。",shop_start_lives_name:"额外生命",shop_start_lives_desc:"每次开始时增加一条额外生命。同时增加最大生命上限。",shop_start_energy_name:"强化船体",shop_start_energy_desc:"每级增加飞船10点最大能量。",shop_coin_value_name:"硬币放大器",shop_coin_value_desc:"收集的每个硬币都更有价值。",shop_powerup_duration_name:"延长持续时间",shop_powerup_duration_desc:"每级增加限时强化道具10%的有效持续时间。",shop_luck_chance_name:"幸运符",shop_luck_chance_desc:"略微增加敌人掉落更好强化道具的几率。",shop_special_charge_name:"特殊军备",shop_special_charge_desc:"每次开始时，库存中都会有一个免费的随机特殊物品。",shop_coin_magnet_name:"硬币收集力场",shop_coin_magnet_desc:"生成一个自动吸取附近硬币的力场。",shop_revive_chance_name:"凤凰核心",shop_revive_chance_desc:"解锁凤凰核心水晶，在死亡时自动复活。每升一级，每次游戏都会增加一个新的水晶（最多3个）。",shop_special_stack_name:"特殊物品堆叠大小",shop_special_stack_desc:"将收集到的特殊物品的堆叠大小从 {current} 增加到 {next}。",shop_special_stack_desc_max:"特殊物品的堆叠大小已达到最大值 {current}。",shop_ultimate_drone_mastery_name:"无人机精通",shop_ultimate_drone_mastery_desc:"终极升级。每次开始时永久拥有一架1级轨道无人机。",shop_ultimate_weapon_prestige_name:"武器声望",shop_ultimate_weapon_prestige_desc:"终极升级。每次开始时永久拥有2级武器。",shop_consume_shield_name:"即时护盾",shop_consume_shield_desc:"在下一局开始时就激活护盾。",shop_consume_nuke_name:"应急核弹",shop_consume_nuke_desc:"在下一局开始时，库存中就有一枚核弹。",shop_consume_extralife_name:"背水一战",shop_consume_extralife_desc:"在下一局开始时获得一条额外生命，仅限该局有效。",shop_consume_ghost_name:"相位转移血清",shop_consume_ghost_desc:"下一局开始时获得30秒的幽灵协议效果。",shop_consume_boss_slayer_name:"首领杀手弹药",shop_consume_boss_slayer_desc:"在一局内，你的武器对首领造成额外25%的伤害。",shop_skin_default_name:"拦截者 MK-I",shop_skin_sentinel_name:"哨兵皮肤",shop_skin_sentinel_desc:"飞船的外观皮肤，类似于2级升级形态。",shop_skin_renegade_name:"叛徒皮肤",shop_skin_renegade_desc:"飞船的外观皮肤，类似于3级升级形态。",shop_skin_avenger_name:"复仇者皮肤",shop_skin_avenger_desc:"飞船的外观皮肤，类似于4级升级形态。",shop_skin_void_name:"虚空追猎者皮肤",shop_skin_void_desc:"一款凶险的深紫色飞船外观皮肤。",shop_skin_gold_name:"黄金典范皮肤",shop_skin_gold_desc:"为终极飞行员准备的传奇金色外观皮肤。",shop_proj_green_name:"绿色激光",shop_proj_green_desc:"一种外观风格，将你的投射物颜色变为鲜艳的绿色。",shop_proj_fireball_name:"太阳火弹",shop_proj_fireball_desc:"一种让你的投射物看起来像火球的外观风格。",shop_proj_purple_name:"虚空箭",shop_proj_purple_desc:"一种将你的投射物颜色变为深紫色的外观风格。",shop_trail_rainbow_name:"彩虹尾迹",shop_trail_rainbow_desc:"一种在身后留下鲜艳彩虹的引擎尾迹外观。",arsenal_cat_weapon_upgrade:"武器升级",arsenal_cat_weapon_mod:"武器模组",arsenal_cat_ultra_weapon:"超级武器（库存）",arsenal_cat_defense:"防御",arsenal_cat_special:"特殊技能（库存）",powerup_wup_name:"武器等级提升 (W+)",powerup_wup_desc:"提升武器等级。等级2（90秒）、3（60秒）和4（30秒）有时间限制，到期后降级。受到任何攻击都会降低一级（最低为1级）。",powerup_rapid_fire_name:"快速射击",powerup_rapid_fire_desc:"在30秒内显著提高射速。",powerup_side_shots_name:"侧向射击",powerup_side_shots_desc:"无论当前激活了何种能量提升，都会向侧面发射额外的子弹。持续15秒。",powerup_laser_name:"激光束",powerup_laser_desc:"在超级武器库中收集一个激光束。发射一道穿透性能量束，持续7.75秒。按4或5键激活。",powerup_homing_missiles_name:"追踪导弹",powerup_homing_missiles_desc:"在超级武器库中收集追踪导弹。发射追踪导弹，持续15秒。按4或5键激活。",powerup_shield_name:"护盾",powerup_shield_desc:"吸收一次攻击。持续直到被击中。",powerup_repair_kit_name:"修理包",powerup_repair_kit_desc:"完全恢复飞船的能量。",powerup_extra_life_name:"额外生命",powerup_extra_life_desc:"立即授予一条额外生命，直至达到允许的上限。",powerup_ghost_protocol_name:"幽灵协议",powerup_ghost_protocol_desc:"使飞船在短时间内无敌并免疫碰撞。",powerup_orbital_drone_name:"轨道无人机",powerup_orbital_drone_desc:"收集一个自主战斗无人机。最多3架无人机可激活30秒。每收集一架新的无人机都会重置所有无人机的时间。",powerup_nuke_name:"核弹",powerup_nuke_desc:"立即摧毁所有可见的普通敌人。按1、2或3键激活。",powerup_black_hole_name:"黑洞",powerup_black_hole_desc:"创建一个黑洞。按住1、2或3键瞄准，松开部署。吸引敌人（对Boss无效）。",powerup_score_boost_name:"分数加倍",powerup_score_boost_desc:"在20秒内使所有获得的分数加倍。按1、2或3键激活。",gegner_header:"敌方单位",gegner_grunt_name:"咕噜兵",gegner_grunt_desc:"标准步兵。直线飞行，是最基本的威胁。",gegner_weaver_name:"织布者",gegner_weaver_desc:"以不可预测的正弦波移动，难以击中。",gegner_tank_name:"坦克",gegner_tank_desc:"速度慢但装甲厚重。能承受多次攻击并造成更高的碰撞伤害。",gegner_shooter_name:"射手",gegner_shooter_desc:"定期向玩家发射单个射弹。是高优先级目标。",gegner_teleporter_name:"传送者",gegner_teleporter_desc:"在不同位置消失和重现，并发射有针对性的射击。难以锁定。",gegner_sentinel_prime_name:"哨兵Prime",gegner_sentinel_prime_desc:"一艘巡逻艇，具有多种攻击方式，包括散弹、螺旋弹和危险的冲锋攻击。",gegner_void_serpent_name:"虚空之蛇",gegner_void_serpent_desc:"一条巨大的利维坦，以宽阔的蛇形模式移动，发射宽阔的齐射和有针对性的鞭击。",gegner_omega_nexus_name:"欧米茄核心",gegner_omega_nexus_desc:"一个堡垒般的战争机器。其攻击模式会随着受到的伤害而改变，最终以强大的激光束告终。",gegner_nexus_prime_name:"核心Prime (最终)",gegner_nexus_prime_desc:"核心的最终形态。具有扫射激光、坚不可摧的无人机和无情的弹幕地狱。",strength_low:"低",strength_medium:"中",strength_high:"高",strength_extreme:"极高",strength_apocalyptic:"末日",strength_final:"最终",formation_incoming:"编队来袭！",wave_msg_1_invasion:"第1波: 入侵",wave_msg_2_sighting:"第2波: 发现织布者",wave_msg_3_heavy:"第3波: 重型单位",wave_msg_4_returnfire:"第4波: 还击！",wave_msg_5_multi_formation:"第5波: 协同攻击",wave_msg_6_weaverrain:"第6波: 织布者之雨",wave_msg_7_skirmish:"第7波: 小规模冲突",wave_msg_8_surge:"第8波: 敌人猛攻",wave_msg_9_pressure:"第9波: 压力陡增",wave_msg_10_sentinel_prime:"第10波: BOSS - 哨兵PRIME",wave_msg_11_reinforcements:"第11波: 增援部队",wave_msg_12_crossfire:"第12波: 交叉火力",wave_msg_13_swarm:"第13波: 蜂群战术",wave_msg_14_ambush:"第14波: 伏击",wave_msg_15_multi_formation:"第15波: 中队攻击",wave_msg_16_flank:"第16波: 侧翼机动",wave_msg_17_composite:"第17波: 混合部队",wave_msg_18_turbulence:"第18波: 动荡",wave_msg_19_heatup:"第19波: 压力点",wave_msg_20_void_serpent:"第20波: BOSS - 虚空之蛇",wave_msg_21_surge:"第21波: 相位猛攻",wave_msg_22_ironwall:"第22波: 铁壁",wave_msg_23_press:"第23波: 压制",wave_msg_24_crosslines:"第24波: 交叉火线",wave_msg_25_multi_formation:"第25波: 方阵编队",wave_msg_26_combined_arms:"第26波: 联合作战",wave_msg_27_ambit:"第27波: 范围",wave_msg_28_thin_red_line:"第28波: 红色警戒线",wave_msg_29_furnace:"第29波: 熔炉",wave_msg_30_omega_nexus:"第30波: BOSS - 欧米茄核心",wave_msg_31_phase_shift:"第31波: 相位转移",wave_msg_32_crossarmor:"第32波: 交叉装甲",wave_msg_33_circle_assault:"第33波: 环形攻击",wave_msg_34_pulse:"第34波: 重脉冲",wave_msg_35_multi_formation:"第35波: 宏大编队",wave_msg_36_barrage:"第36波: 无情弹幕",wave_msg_37_matrix:"第37波: 矩阵",wave_msg_38_overload:"第38波: 系统超载",wave_msg_39_last_stand:"第39波: 背水一战",wave_msg_40_nexus_prime:"第40波: BOSS - 核心PRIME",wave_msg_41_countercharge:"第41波: 反冲锋",wave_msg_42_heavy_push:"第42波: 重型推进",wave_msg_43_v_shape:"第43波: V字编队",wave_msg_44_phase_storm:"第44波: 相位风暴",wave_msg_45_multi_formation_final:"第45波: 最终编队",wave_msg_46_anvil:"第46波: 铁砧",wave_msg_47_circle_strike:"第47波: 环形打击",wave_msg_48_maelstrom:"第48波: 大漩涡",wave_msg_49_critical_mass:"第49波: 临界质量",wave_msg_50_final:"第50波: 最终BOSS - 核心PRIME",game_over_title:"游戏结束",game_over_final_score:"最终分数",victory_title:"胜利！",victory_final_score:"最终分数",victory_prompt:"按 ENTER 返回菜单",intro_prompt:"按 ENTER 开始",intro_prompt_mobile:"点击开始",lang_select_title:"选择语言",exit_title:"再会！",exit_message:"您现在可以安全地关闭此标签页了。",w_tier:"武器等级",off:"关",low:"低",high:"高",on:"开",leaderboard_loading:"正在加载排行榜...",leaderboard_error:"加载排行榜时出错。请稍后再试。",leaderboard_no_entries:"未找到条目。成为第一人！",leaderboard_player:"玩家",waves:"波数"},Pe={lang_native_name:"日本語",score:"スコア",level:"レベル",lives:"残機",highscore:"ハイスコア",main_menu_title:"メインメニュー",pause_header:"一時停止",energy:"エネルギー",tab_spiel:"ゲーム",tab_galerie:"ギャラリー",tab_arsenal:"アーセナル",tab_gegner:"敵",tab_rangliste:"ランキング",tab_einstellungen:"設定",btn_resume:"再開",btn_start_game:"ゲーム開始",btn_restart:"リスタート",btn_quit:"メニューに戻る",btn_quit_to_menu:"メニューに戻る",btn_exit:"ゲームを終了",btn_back:"戻る",btn_shop:"ショップ",btn_buy:"購入",btn_upgrade:"アップグレード",btn_unlock:"アンロック",btn_equip:"装備",btn_equipped:"装備中",btn_max_level:"最大レベル",mode_select_title:"モード選択",btn_campaign:"キャンペーン",btn_endless:"エンドレス",endless_wave:"エンドレスウェーブ",endless_wave_breather:"エンドレスウェーブ：休息ウェーブ",affix_frenzy:"狂乱",affix_thick_skins:"厚皮",affix_bullet_hell:"弾幕地獄",affix_blink_storm:"ブリンクストーム",settings_language_label:"言語",settings_language_desc:"ゲームの表示言語を変更します。",settings_volume_label:"マスター音量",settings_volume_desc:"ゲーム全体の音量を調整します。",settings_music_label:"音楽",settings_music_desc:"BGMのオン/オフを切り替えます。",settings_sfx_label:"効果音",settings_sfx_desc:"ショットや爆発などの効果音のオン/オフを切り替えます。",settings_particles_label:"パーティクル",settings_particles_desc:"爆発のパーティクルエフェクトの量を設定します（高、低、オフ）。",settings_shake_label:"画面の揺れ",settings_shake_desc:"ヒット時や爆発時の画面の揺れを有効/無効にします。",shop_title:"アーセナルショップ",shop_tab_permanent:"アップグレード",shop_tab_consumable:"消耗品",shop_tab_cosmetic:"外観",shop_tab_pi_bundle:"Piコイン",shop_tab_ultimate:"アルティメット",shop_your_coins:"所持コイン",shop_category_permanent:"永続アップグレード",shop_category_consumable:"消耗品",shop_category_cosmetic:"外観の強化",shop_category_pi_bundles:"パイコインバンドル",shop_category_ultimate:"アルティメット・プレステージ",shop_upgrade_active_next_round:"（次のランで有効）",shop_pi_bundle_1_name:"コインポーチ",shop_pi_bundle_1_desc:"ゲーム内コイン1,000枚入りの小さなポーチ。",shop_pi_bundle_2_name:"コインサッチェル",shop_pi_bundle_2_desc:"ゲーム内コイン5,500枚入りの便利なサッチェル（10%ボーナス）。",shop_pi_bundle_3_name:"コインチェスト",shop_pi_bundle_3_desc:"ゲーム内コイン12,000枚で満たされた大きなチェスト（20%ボーナス）。",shop_pi_bundle_4_name:"コインクレート",shop_pi_bundle_4_desc:"ゲーム内コイン65,000枚入りの強化クレート（30%ボーナス）。ベストバリュー！",shop_pi_bundle_5_name:"コインヴォールト",shop_pi_bundle_5_desc:"究極の財産！ゲーム内コイン150,000枚入りの金庫（50%ボーナス）。",shop_start_lives_name:"追加ライフ",shop_start_lives_desc:"毎回追加のライフを持ってスタートします。最大ライフも増加します。",shop_start_energy_name:"強化船体",shop_start_energy_desc:"レベルごとに船の最大エネルギーが10増加します。",shop_coin_value_name:"コインアンプ",shop_coin_value_desc:"収集した各コインの価値が上がります。",shop_powerup_duration_name:"効果時間延長",shop_powerup_duration_desc:"レベルごとに時間制限のあるパワーアップの効果時間が10%延長されます。",shop_luck_chance_name:"幸運のお守り",shop_luck_chance_desc:"敵からより良いパワーアップがドロップする確率をわずかに上昇させます。",shop_special_charge_name:"特殊兵装",shop_special_charge_desc:"毎回、ランダムなスペシャルアイテムを1つ無料でインベントリに所持した状態でスタートします。",shop_coin_magnet_name:"コイン収集フィールド",shop_coin_magnet_desc:"近くのコインを自動的に引き寄せるフィールドを生成します。",shop_revive_chance_name:"フェニックス・コア",shop_revive_chance_desc:"死亡時に自動で復活するフェニックス・コア・クリスタルをアンロックします。アップグレードするたびに、ランごとに新しいクリスタルが追加されます（最大3つ）。",shop_special_stack_name:"スペシャルスタックサイズ",shop_special_stack_desc:"収集したスペシャルアイテムのスタックサイズを{current}から{next}に増やします。",shop_special_stack_desc_max:"スペシャルアイテムのスタックサイズは最大{current}です。",shop_ultimate_drone_mastery_name:"ドローンマスター",shop_ultimate_drone_mastery_desc:"アルティメットアップグレード。毎回、永続的なティア1オービタルドローンを持ってスタートします。",shop_ultimate_weapon_prestige_name:"ウェポンプレステージ",shop_ultimate_weapon_prestige_desc:"アルティメットアップグレード。毎回、永続的に武器ティア2でスタートします。",shop_consume_shield_name:"即時シールド",shop_consume_shield_desc:"次のランをシールドが有効な状態で開始します。",shop_consume_nuke_name:"緊急用ニューク",shop_consume_nuke_desc:"次のランをインベントリにニュークを1つ所持した状態で開始します。",shop_consume_extralife_name:"最後の砦",shop_consume_extralife_desc:"次のランに限り、追加のライフを1つ持ってスタートします。",shop_consume_ghost_name:"フェイズシフト血清",shop_consume_ghost_desc:"次のランを30秒間のゴーストプロトコル効果付きで開始します。",shop_consume_boss_slayer_name:"ボススレイヤー弾",shop_consume_boss_slayer_desc:"1回のランの間、ボスに対する武器のダメージが25%増加します。",shop_skin_default_name:"インターセプター MK-I",shop_skin_sentinel_name:"センティネルスキン",shop_skin_sentinel_desc:"ティア2アップグレードに似た、船のコスメティックスキン。",shop_skin_renegade_name:"レネゲードスキン",shop_skin_renegade_desc:"ティア3アップグレードに似た、船のコスメティックスキン。",shop_skin_avenger_name:"アベンジャースキン",shop_skin_avenger_desc:"ティア4アップグレードに似た、船のコスメティックスキン。",shop_skin_void_name:"ヴォイドストーカースキン",shop_skin_void_desc:"威圧的なダークパープルの船のコスメティックスキン。",shop_skin_gold_name:"ゴールデンパラゴンスキン",shop_skin_gold_desc:"究極のパイロットのための伝説的な黄金のコスメティックスキン。",shop_proj_green_name:"グリーンレーザー",shop_proj_green_desc:"弾の色を鮮やかな緑色に変えるコスメティックスタイル。",shop_proj_fireball_name:"サンファイア弾",shop_proj_fireball_desc:"弾が火の玉のように見えるコスメティックスタイル。",shop_proj_purple_name:"ヴォイドボルト",shop_proj_purple_desc:"弾の色をダークパープルに変えるコスメティックスタイル。",shop_trail_rainbow_name:"レインボートレイル",shop_trail_rainbow_desc:"船尾に鮮やかな虹を残す、コスメティックなエンジントレイル。",arsenal_cat_weapon_upgrade:"武器アップグレード",arsenal_cat_weapon_mod:"武器MOD",arsenal_cat_ultra_weapon:"ウルトラウェポン（インベントリ）",arsenal_cat_defense:"防御",arsenal_cat_special:"スペシャル（インベントリ）",powerup_wup_name:"武器ティアアップ (W+)",powerup_wup_desc:"武器のティアを上げます。ティア2（90秒）、3（60秒）、4（30秒）は時間制で、時間切れでダウングレードします。被弾するとティアが1つ下がります（最低ティア1）。",powerup_rapid_fire_name:"ラピッドファイア",powerup_rapid_fire_desc:"30秒間、連射速度が大幅に向上します。",powerup_side_shots_name:"サイドショット",powerup_side_shots_desc:"アクティブなパワーアップに関係なく、左右に追加のショットを発射します。15秒間有効。",powerup_laser_name:"レーザービーム",powerup_laser_desc:"ウルトラインベントリにレーザービームを収集します。7.75秒間、貫通エネルギービームを発射します。キー4または5で起動。",powerup_homing_missiles_name:"ホーミングミサイル",powerup_homing_missiles_desc:"ウルトラインベントリにホーミングミサイルを収集します。15秒間、追尾ミサイルを発射します。キー4または5で起動。",powerup_shield_name:"シールド",powerup_shield_desc:"一回のヒットを吸収します。ヒットするまで持続します。",powerup_repair_kit_name:"リペアキット",powerup_repair_kit_desc:"船のエネルギーを完全に回復します。",powerup_extra_life_name:"エクストラライフ",powerup_extra_life_desc:"即座に残機を1つ増やします（最大許容数まで）。",powerup_ghost_protocol_name:"ゴーストプロトコル",powerup_ghost_protocol_desc:"短時間、船を無敵にし、衝突の影響を受けなくします。",powerup_orbital_drone_name:"オービタルドローン",powerup_orbital_drone_desc:"自律戦闘ドローンを収集します。最大3機が30秒間活動します。新しいドローンを取得すると、すべてのタイマーがリセットされます。",powerup_nuke_name:"ニューク",powerup_nuke_desc:"画面上のすべての通常敵を即座に破壊します。キー1、2、または3で起動。",powerup_black_hole_name:"ブラックホール",powerup_black_hole_desc:"ブラックホールを生成します。キー1、2、または3を長押しして狙いを定め、離して展開します。敵を引き寄せます（ボスには無効）。",powerup_score_boost_name:"スコアブースト",powerup_score_boost_desc:"20秒間、獲得するすべてのポイントが2倍になります。キー1、2、または3で起動。",gegner_header:"敵ユニット",gegner_grunt_name:"グラント",gegner_grunt_desc:"標準的な歩兵。直線的に飛行する最も基本的な脅威です。",gegner_weaver_name:"ウィーバー",gegner_weaver_desc:"予測不可能なサイン波で動き、命中させるのが困難です。",gegner_tank_name:"タンク",gegner_tank_desc:"遅いが重装甲。複数回のヒットに耐え、衝突ダメージが増加します。",gegner_shooter_name:"シューター",gegner_shooter_desc:"定期的に単発の弾をプレイヤーに向けて発射します。優先度の高いターゲットです。",gegner_teleporter_name:"テレポーター",gegner_teleporter_desc:"異なる場所に消えて再出現し、標的を狙ったショットを撃ちます。捉えにくい。",gegner_sentinel_prime_name:"センティネル・プライム",gegner_sentinel_prime_desc:"拡散弾、螺旋弾、危険な突撃攻撃など、多彩な攻撃を持つ巡視艇。",gegner_void_serpent_name:"ヴォイド・サーペント",gegner_void_serpent_desc:"広範囲に蛇行しながら移動し、広範囲の斉射と狙いを定めた鞭のような攻撃を放つ巨大なリヴァイアサン。",gegner_omega_nexus_name:"オメガ・ネクサス",gegner_omega_nexus_desc:"要塞のような戦闘機械。ダメージに応じて攻撃パターンが変化し、最終的には強力なレーザービームを放ちます。",gegner_nexus_prime_name:"ネクサス・プライム（最終）",gegner_nexus_prime_desc:"ネクサスの究極形態。掃射レーザー、破壊不能なドローン、そして容赦ない弾幕地獄が特徴です。",strength_low:"低",strength_medium:"中",strength_high:"高",strength_extreme:"極",strength_apocalyptic:"黙示録的",strength_final:"最終",formation_incoming:"フォーメーション接近！",wave_msg_1_invasion:"ウェーブ1：侵略",wave_msg_2_sighting:"ウェーブ2：ウィーバー発見",wave_msg_3_heavy:"ウェーブ3：重ユニット",wave_msg_4_returnfire:"ウェーブ4：反撃！",wave_msg_5_multi_formation:"ウェーブ5：連携攻撃",wave_msg_6_weaverrain:"ウェーブ6：ウィーバーの雨",wave_msg_7_skirmish:"ウェーブ7：小競り合い",wave_msg_8_surge:"ウェーブ8：敵の急増",wave_msg_9_pressure:"ウェーブ9：高まる圧力",wave_msg_10_sentinel_prime:"ウェーブ10：ボス - センティネル・プライム",wave_msg_11_reinforcements:"ウェーブ11：増援",wave_msg_12_crossfire:"ウェーブ12：十字砲火",wave_msg_13_swarm:"ウェーブ13：集団戦術",wave_msg_14_ambush:"ウェーブ14：待ち伏せ",wave_msg_15_multi_formation:"ウェーブ15：編隊攻撃",wave_msg_16_flank:"ウェーブ16：側面攻撃",wave_msg_17_composite:"ウェーブ17：混成部隊",wave_msg_18_turbulence:"ウェーブ18：乱気流",wave_msg_19_heatup:"ウェーブ19：プレッシャーポイント",wave_msg_20_void_serpent:"ウェーブ20：ボス - ヴォイド・サーペント",wave_msg_21_surge:"ウェーブ21：フェージングサージ",wave_msg_22_ironwall:"ウェーブ22：鉄の壁",wave_msg_23_press:"ウェーブ23：圧迫",wave_msg_24_crosslines:"ウェーブ24：交差線",wave_msg_25_multi_formation:"ウェーブ25：ファランクスフォーメーション",wave_msg_26_combined_arms:"ウェーブ26：諸兵科連合",wave_msg_27_ambit:"ウェーブ27：包囲",wave_msg_28_thin_red_line:"ウェーブ28：細い赤い線",wave_msg_29_furnace:"ウェーブ29：溶鉱炉",wave_msg_30_omega_nexus:"ウェーブ30：ボス - オメガ・ネクサス",wave_msg_31_phase_shift:"ウェーブ31：フェイズシフト",wave_msg_32_crossarmor:"ウェーブ32：クロスアーマー",wave_msg_33_circle_assault:"ウェーブ33：サークルアサルト",wave_msg_34_pulse:"ウェーブ34：ヘビーパルス",wave_msg_35_multi_formation:"ウェーブ35：グランドフォーメーション",wave_msg_36_barrage:"ウェーブ36：絶え間ない弾幕",wave_msg_37_matrix:"ウェーブ37：マトリックス",wave_msg_38_overload:"ウェーブ38：システム過負荷",wave_msg_39_last_stand:"ウェーブ39：最後の抵抗",wave_msg_40_nexus_prime:"ウェーブ40：ボス - ネクサス・プライム",wave_msg_41_countercharge:"ウェーブ41：反撃",wave_msg_42_heavy_push:"ウェーブ42：重圧",wave_msg_43_v_shape:"ウェーブ43：Vフォーメーション",wave_msg_44_phase_storm:"ウェーブ44：フェイズストーム",wave_msg_45_multi_formation_final:"ウェーブ45：最終フォーメーション",wave_msg_46_anvil:"ウェーブ46：鉄床",wave_msg_47_circle_strike:"ウェーブ47：サークルストライク",wave_msg_48_maelstrom:"ウェーブ48：大渦",wave_msg_49_critical_mass:"ウェーブ49：臨界質量",wave_msg_50_final:"ウェーブ50：最終ボス - ネクサス・プライム",game_over_title:"ゲームオーバー",game_over_final_score:"最終スコア",victory_title:"勝利！",victory_final_score:"最終スコア",victory_prompt:"ENTERキーでメニューに戻ります",intro_prompt:"ENTERキーで開始",intro_prompt_mobile:"タップして開始",lang_select_title:"言語を選択",exit_title:"またね！",exit_message:"このタブは安全に閉じることができます。",w_tier:"Wティア",off:"オフ",low:"低",high:"高",on:"オン",leaderboard_loading:"ランキングを読み込み中...",leaderboard_error:"ランキングの読み込み中にエラーが発生しました。後でもう一度お試しください。",leaderboard_no_entries:"エントリーが見つかりません。最初のエントリーを目指しましょう！",leaderboard_player:"プレイヤー",waves:"ウェーブ"},Ie={lang_native_name:"Italiano",score:"Punteggio",level:"Livello",lives:"Vite",highscore:"Punteggio Massimo",main_menu_title:"MENU PRINCIPALE",pause_header:"PAUSA",energy:"Energia",tab_spiel:"Gioco",tab_galerie:"Galleria",tab_arsenal:"Arsenale",tab_gegner:"Nemici",tab_rangliste:"Classifica",tab_einstellungen:"Impostazioni",btn_resume:"Riprendi",btn_start_game:"INIZIA PARTITA",btn_restart:"Ricomincia",btn_quit:"Esci al Menu",btn_quit_to_menu:"Esci al Menu",btn_exit:"ESCI DAL GIOCO",btn_back:"Indietro",btn_shop:"Negozio",btn_buy:"Compra",btn_upgrade:"Potenzia",btn_unlock:"Sblocca",btn_equip:"Equipaggia",btn_equipped:"Equipaggiato",btn_max_level:"Liv. Max",mode_select_title:"Scegli Modalità",btn_campaign:"Campagna",btn_endless:"Infinita",endless_wave:"Ondata Infinita",endless_wave_breather:"Ondata Infinita: Ondata di Tregua",affix_frenzy:"Frenesia",affix_thick_skins:"Pelle Dura",affix_bullet_hell:"Inferno di Proiettili",affix_blink_storm:"Tempesta di Teletrasporti",settings_language_label:"Lingua",settings_language_desc:"Cambia la lingua di visualizzazione del gioco.",settings_volume_label:"Volume Principale",settings_volume_desc:"Controlla il volume generale del gioco.",settings_music_label:"Musica",settings_music_desc:"Attiva o disattiva la musica di sottofondo.",settings_sfx_label:"Effetti Sonori",settings_sfx_desc:"Attiva o disattiva gli effetti sonori come spari ed esplosioni.",settings_particles_label:"Particelle",settings_particles_desc:"Imposta la quantità di effetti particellari per le esplosioni (ALTO, BASSO, NO).",settings_shake_label:"Vibrazione Schermo",settings_shake_desc:"Abilita o disabilita la vibrazione dello schermo su colpi ed esplosioni.",shop_title:"Negozio Arsenale",shop_tab_permanent:"Potenziamenti",shop_tab_consumable:"Consumabili",shop_tab_cosmetic:"Estetica",shop_tab_pi_bundle:"Monete Pi",shop_tab_ultimate:"Supremo",shop_your_coins:"Le tue Monete",shop_category_permanent:"Potenziamenti Permanenti",shop_category_consumable:"Consumabili",shop_category_cosmetic:"Miglioramenti Estetici",shop_category_pi_bundles:"Pacchetti Monete Pi",shop_category_ultimate:"Potenziamenti di Prestigio Supremi",shop_upgrade_active_next_round:"(Attivo alla prossima partita)",shop_pi_bundle_1_name:"Sacca di Monete",shop_pi_bundle_1_desc:"Una piccola sacca con 1.000 monete di gioco.",shop_pi_bundle_2_name:"Borsa di Monete",shop_pi_bundle_2_desc:"Una comoda borsa contenente 5.500 monete di gioco (10% bonus).",shop_pi_bundle_3_name:"Forziere di Monete",shop_pi_bundle_3_desc:"Un grande forziere pieno di 12.000 monete di gioco (20% bonus).",shop_pi_bundle_4_name:"Cassa di Monete",shop_pi_bundle_4_desc:"Una cassa rinforzata con 65.000 monete di gioco (30% bonus). Miglior offerta!",shop_pi_bundle_5_name:"Caveau di Monete",shop_pi_bundle_5_desc:"La fortuna suprema! Un caveau contenente 150.000 monete di gioco (50% bonus).",shop_start_lives_name:"Vita Extra",shop_start_lives_desc:"Inizia ogni partita con una vita aggiuntiva. Aumenta anche le vite massime.",shop_start_energy_name:"Scafo Rinforzato",shop_start_energy_desc:"Aumenta l'energia massima della tua nave di 10 per livello.",shop_coin_value_name:"Amplificatore di Monete",shop_coin_value_desc:"Ogni moneta raccolta vale di più.",shop_powerup_duration_name:"Durata Estesa",shop_powerup_duration_desc:"Aumenta la durata attiva dei potenziamenti a tempo del 10% per livello.",shop_luck_chance_name:"Portafortuna",shop_luck_chance_desc:"Aumenta leggermente la possibilità che i nemici rilascino potenziamenti migliori.",shop_special_charge_name:"Dotazione Speciale",shop_special_charge_desc:"Inizia ogni partita con un oggetto Speciale casuale e gratuito nel tuo inventario.",shop_coin_magnet_name:"Campo di Raccolta",shop_coin_magnet_desc:"Genera un campo che attira automaticamente le monete vicine.",shop_revive_chance_name:"Nucleo della Fenice",shop_revive_chance_desc:"Sblocca i Cristalli del Nucleo della Fenice che ti rianimano automaticamente alla morte. Ogni livello di potenziamento aggiunge un nuovo cristallo (fino a 3) per ogni partita.",shop_special_stack_name:"Dimensione Pila Speciale",shop_special_stack_desc:"Aumenta la dimensione della pila per gli oggetti Speciali raccolti da {current} a {next}.",shop_special_stack_desc_max:"La dimensione della pila per gli oggetti Speciali è al massimo a {current}.",shop_ultimate_drone_mastery_name:"Maestria dei Droni",shop_ultimate_drone_mastery_desc:"Un potenziamento supremo. Inizia ogni partita con un Drone Orbitale di Livello 1 permanente.",shop_ultimate_weapon_prestige_name:"Prestigio dell'Arma",shop_ultimate_weapon_prestige_desc:"Un potenziamento supremo. Inizia ogni partita permanentemente al Livello Arma 2.",shop_consume_shield_name:"Scudo Istantaneo",shop_consume_shield_desc:"Inizia la tua prossima partita con uno scudo già attivo.",shop_consume_nuke_name:"Bomba d'Emergenza",shop_consume_nuke_desc:"Inizia la tua prossima partita con una Bomba Nucleare nel tuo inventario.",shop_consume_extralife_name:"Ultima Speranza",shop_consume_extralife_desc:"Inizia la tua prossima partita con una vita extra solo per quella partita.",shop_consume_ghost_name:"Siero Sfasamento",shop_consume_ghost_desc:"Inizia la tua prossima partita con un effetto Protocollo Fantasma di 30 secondi.",shop_consume_boss_slayer_name:"Munizioni Ammazzaboss",shop_consume_boss_slayer_desc:"Le tue armi infliggono il 25% di danni in più contro i Boss per una partita.",shop_skin_default_name:"Intercettore MK-I",shop_skin_sentinel_name:"Skin Sentinella",shop_skin_sentinel_desc:"Una skin cosmetica per la tua nave che assomiglia al potenziamento di Livello 2.",shop_skin_renegade_name:"Skin Rinnegato",shop_skin_renegade_desc:"Una skin cosmetica per la tua nave che assomiglia al potenziamento di Livello 3.",shop_skin_avenger_name:"Skin Vendicatore",shop_skin_avenger_desc:"Una skin cosmetica per la tua nave che assomiglia al potenziamento di Livello 4.",shop_skin_void_name:"Skin Predatore del Vuoto",shop_skin_void_desc:"Una minacciosa skin cosmetica viola scuro per la tua nave.",shop_skin_gold_name:"Skin Campione Dorato",shop_skin_gold_desc:"Una leggendaria skin cosmetica dorata per il pilota definitivo.",shop_proj_green_name:"Laser Verdi",shop_proj_green_desc:"Uno stile cosmetico che cambia il colore dei tuoi proiettili in un verde vibrante.",shop_proj_fireball_name:"Proiettili Piro-Solari",shop_proj_fireball_desc:"Uno stile cosmetico che fa sembrare i tuoi proiettili delle palle di fuoco.",shop_proj_purple_name:"Dardi del Vuoto",shop_proj_purple_desc:"Uno stile cosmetico che cambia il colore dei tuoi proiettili in viola scuro.",shop_trail_rainbow_name:"Scia Arcobaleno",shop_trail_rainbow_desc:"Una scia motore cosmetica che lascia un vibrante arcobaleno al tuo passaggio.",arsenal_cat_weapon_upgrade:"Potenziamento Arma",arsenal_cat_weapon_mod:"Mod Arma",arsenal_cat_ultra_weapon:"Ultra Armi (Inventario)",arsenal_cat_defense:"Difesa",arsenal_cat_special:"Speciali (Inventario)",powerup_wup_name:"Aumento Livello Arma (W+)",powerup_wup_desc:"Aumenta il livello dell'arma. Livello 2 (90s), 3 (60s) e 4 (30s) sono a tempo e si riducono alla scadenza. Perdi un livello a ogni colpo subito (min. Livello 1).",powerup_rapid_fire_name:"Fuoco Rapido",powerup_rapid_fire_desc:"Aumenta significativamente la cadenza di fuoco per 30 secondi.",powerup_side_shots_name:"Colpi Laterali",powerup_side_shots_desc:"Spara colpi aggiuntivi ai lati, indipendentemente dal potenziamento attivo. Attivo per 15 secondi.",powerup_laser_name:"Raggio Laser",powerup_laser_desc:"Raccoglie un Raggio Laser nell'Inventario Ultra. Spara un raggio di energia perforante per 7.75 secondi. Attiva con il tasto 4 o 5.",powerup_homing_missiles_name:"Missili a Ricerca",powerup_homing_missiles_desc:"Raccoglie Missili a Ricerca nell'Inventario Ultra. Spara missili che cercano i nemici per 15 secondi. Attiva con il tasto 4 o 5.",powerup_shield_name:"Scudo",powerup_shield_desc:"Assorbe un colpo. Dura finché non viene colpito.",powerup_repair_kit_name:"Kit di Riparazione",powerup_repair_kit_desc:"Ripristina completamente l'energia della nave.",powerup_extra_life_name:"Vita Extra",powerup_extra_life_desc:"Conferisce istantaneamente una vita extra, fino al massimo consentito.",powerup_ghost_protocol_name:"Protocollo Fantasma",powerup_ghost_protocol_desc:"Rende la nave invulnerabile e immune alle collisioni per un breve periodo.",powerup_orbital_drone_name:"Drone Orbitale",powerup_orbital_drone_desc:"Raccoglie un drone da combattimento autonomo. Fino a 3 droni sono attivi per 30s. Ogni nuovo drone resetta il timer per tutti.",powerup_nuke_name:"Bomba Nucleare",powerup_nuke_desc:"Distrugge istantaneamente tutti i nemici standard visibili. Attiva con il tasto 1, 2 o 3.",powerup_black_hole_name:"Buco Nero",powerup_black_hole_desc:"Crea un buco nero. Tieni premuto il tasto 1, 2 o 3 per mirare e rilascia per attivarlo. Attira i nemici (immune ai boss).",powerup_score_boost_name:"Moltiplicatore Punti",powerup_score_boost_desc:"Raddoppia tutti i punti raccolti per 20 secondi. Attiva con il tasto 1, 2 o 3.",gegner_header:"Unità Ostili",gegner_grunt_name:"Grunt",gegner_grunt_desc:"Fanteria standard. Vola in linea retta ed è la minaccia più basilare.",gegner_weaver_name:"Weaver",gegner_weaver_desc:"Si muove in onde sinusoidali imprevedibili ed è difficile da colpire.",gegner_tank_name:"Tank",gegner_tank_desc:"Lento ma pesantemente corazzato. Resiste a più colpi e infligge danni da collisione maggiori.",gegner_shooter_name:"Shooter",gegner_shooter_desc:"Spara regolarmente proiettili singoli verso il giocatore. Un bersaglio ad alta priorità.",gegner_teleporter_name:"Teleporter",gegner_teleporter_desc:"Scompare e riappare in luoghi diversi, sparando colpi mirati. Difficile da bloccare.",gegner_sentinel_prime_name:"Sentinel Prime",gegner_sentinel_prime_desc:"Un'unità di pattuglia con attacchi variegati, inclusi ventagli, spirali e un pericoloso attacco in carica.",gegner_void_serpent_name:"Serpente del Vuoto",gegner_void_serpent_desc:"Un leviatano massiccio che si muove con un ampio andamento serpentino, sparando ampie raffiche e colpi mirati.",gegner_omega_nexus_name:"Omega Nexus",gegner_omega_nexus_desc:"Una macchina da guerra simile a una fortezza. I suoi schemi di attacco cambiano con i danni, culminando in un potente raggio laser.",gegner_nexus_prime_name:"Nexus Prime (Finale)",gegner_nexus_prime_desc:"La forma definitiva del Nexus. Dispone di un laser a spazzata, droni indistruttibili e una pioggia di proiettili implacabile.",strength_low:"Basso",strength_medium:"Medio",strength_high:"Alto",strength_extreme:"Estremo",strength_apocalyptic:"Apocalittico",strength_final:"FINALE",formation_incoming:"Formazione in Arrivo!",wave_msg_1_invasion:"Ondata 1: Invasione",wave_msg_2_sighting:"Ondata 2: Weaver Avvistati",wave_msg_3_heavy:"Ondata 3: Unità Pesanti",wave_msg_4_returnfire:"Ondata 4: Fuoco di Risposta!",wave_msg_5_multi_formation:"Ondata 5: Assalto Coordinato",wave_msg_6_weaverrain:"Ondata 6: Pioggia di Weaver",wave_msg_7_skirmish:"Ondata 7: Schermaglia",wave_msg_8_surge:"Ondata 8: Ondata Nemica",wave_msg_9_pressure:"Ondata 9: Pressione Crescente",wave_msg_10_sentinel_prime:"ONDATA 10: BOSS - SENTINEL PRIME",wave_msg_11_reinforcements:"Ondata 11: Rinforzi",wave_msg_12_crossfire:"Ondata 12: Fuoco Incrociato",wave_msg_13_swarm:"Ondata 13: Tattiche di Sciame",wave_msg_14_ambush:"Ondata 14: Imboscata",wave_msg_15_multi_formation:"Ondata 15: Attacco di Squadriglia",wave_msg_16_flank:"Ondata 16: Manovre di Fiancheggiamento",wave_msg_17_composite:"Ondata 17: Forza Composita",wave_msg_18_turbulence:"Ondata 18: Turbolenza",wave_msg_19_heatup:"Ondata 19: Punto di Pressione",wave_msg_20_void_serpent:"ONDATA 20: BOSS - SERPENTE DEL VUOTO",wave_msg_21_surge:"Ondata 21: Ondata Fasica",wave_msg_22_ironwall:"Ondata 22: Muro di Ferro",wave_msg_23_press:"Ondata 23: La Tenaglia",wave_msg_24_crosslines:"Ondata 24: Linee Incrociate",wave_msg_25_multi_formation:"Ondata 25: Formazione a Falange",wave_msg_26_combined_arms:"Ondata 26: Armi Combinate",wave_msg_27_ambit:"Ondata 27: Il Perimetro",wave_msg_28_thin_red_line:"Ondata 28: Sottile Linea Rossa",wave_msg_29_furnace:"Ondata 29: La Fornace",wave_msg_30_omega_nexus:"ONDATA 30: BOSS - OMEGA NEXUS",wave_msg_31_phase_shift:"Ondata 31: Sfasamento",wave_msg_32_crossarmor:"Ondata 32: Corazza Incrociata",wave_msg_33_circle_assault:"Ondata 33: Assalto Circolare",wave_msg_34_pulse:"Ondata 34: Impulso Pesante",wave_msg_35_multi_formation:"Ondata 35: Grande Formazione",wave_msg_36_barrage:"Ondata 36: Sbarramento Implacabile",wave_msg_37_matrix:"Ondata 37: La Matrice",wave_msg_38_overload:"Ondata 38: Sovraccarico di Sistema",wave_msg_39_last_stand:"Ondata 39: Ultima Resistenza",wave_msg_40_nexus_prime:"ONDATA 40: BOSS - NEXUS PRIME",wave_msg_41_countercharge:"Ondata 41: Controcarica",wave_msg_42_heavy_push:"Ondata 42: Spinta Pesante",wave_msg_43_v_shape:"Ondata 43: Formazione a V",wave_msg_44_phase_storm:"Ondata 44: Tempesta Fasica",wave_msg_45_multi_formation_final:"Ondata 45: La Formazione Finale",wave_msg_46_anvil:"Ondata 46: L'Incudine",wave_msg_47_circle_strike:"Ondata 47: Attacco Circolare",wave_msg_48_maelstrom:"Ondata 48: Maelstrom",wave_msg_49_critical_mass:"Ondata 49: Massa Critica",wave_msg_50_final:"ONDATA 50: BOSS FINALE - NEXUS PRIME",game_over_title:"FINE PARTITA",game_over_final_score:"Punteggio Finale",victory_title:"VITTORIA!",victory_final_score:"Punteggio Finale",victory_prompt:"Premi INVIO per tornare al Menu",intro_prompt:"Premi INVIO per Iniziare",intro_prompt_mobile:"Tocca per Iniziare",lang_select_title:"SELEZIONA LINGUA",exit_title:"A presto!",exit_message:"Ora puoi chiudere questa scheda in sicurezza.",w_tier:"L-Arma",off:"NO",low:"BASSO",high:"ALTO",on:"SÌ",leaderboard_loading:"Caricamento classifica...",leaderboard_error:"Errore nel caricamento della classifica. Riprova più tardi.",leaderboard_no_entries:"Nessun punteggio trovato. Sii il primo!",leaderboard_player:"Giocatore",waves:"Ondate"},Oe={en:Me,de:Ae,es:ke,zh:Ce,ja:Pe,it:Ie},oe="/Galaxy-fall2/assets/player_tier1-BGuEVhdV.png",W="/Galaxy-fall2/assets/player_tier2-BNKSb4SP.png",z="/Galaxy-fall2/assets/player_tier3-CLvfjKA7.png",V="/Galaxy-fall2/assets/player_tier4-B1afeGUG.png",q="/Galaxy-fall2/assets/player_tier4-B1afeGUG.png",j="/Galaxy-fall2/assets/player_tier4-B1afeGUG.png",Re="/Galaxy-fall2/assets/enemy_grunt-CLkKISY_.png",Le="/Galaxy-fall2/assets/enemy_tank-DevmETt8.png",xe="/Galaxy-fall2/assets/enemy_weaver-SPRiRDSK.png",Ne="/Galaxy-fall2/assets/enemy_shooter-CMoO9QtZ.png",Be="/Galaxy-fall2/assets/enemy_shooter-CMoO9QtZ.png",Fe="/Galaxy-fall2/assets/boss_sentinel_prime-Dy4-a5Z_.png",Ge="/Galaxy-fall2/assets/boss_void_serpent-vNYxILcC.png",Ue="/Galaxy-fall2/assets/boss_omega_nexus_base-CEgzkHPT.png",De="/Galaxy-fall2/assets/boss_omega_nexus_ring-D0w1CBIA.png",re="/Galaxy-fall2/assets/powerup_weapon_up-BVpNRrUf.png",F="/Galaxy-fall2/assets/powerup_rapid_fire-D-ryUnye.png",G="/Galaxy-fall2/assets/powerup_side_shots-BpLfr9MP.png",$="/Galaxy-fall2/assets/powerup_laser_beam-CU97HRws.png",Y="/Galaxy-fall2/assets/powerup_homing_missiles-cGzXJkLq.png",X="/Galaxy-fall2/assets/powerup_shield-5awyPx3E.png",J="/Galaxy-fall2/assets/powerup_repair_kit-CHXnFl7N.png",x="/Galaxy-fall2/assets/powerup_extra_life-DYIf3ycm.png",Z="/Galaxy-fall2/assets/powerup_ghost_protocol-CDsToGOK.png",Q="/Galaxy-fall2/assets/powerup_orbital_drone-BiJqGdU1.png",U="/Galaxy-fall2/assets/powerup_nuke-BymPmf-e.png",D="/Galaxy-fall2/assets/powerup_black_hole-Bwd8kZWb.png",H="/Galaxy-fall2/assets/powerup_score_boost-C6cwsuh0.png",He="/Galaxy-fall2/assets/pi_coin-CS16KSM_.png",Ke="/Galaxy-fall2/assets/pi_coin-CS16KSM_.png",We="/Galaxy-fall2/assets/pi_coin-CS16KSM_.png",ze="/Galaxy-fall2/assets/pi_coin-CS16KSM_.png",Ve="/Galaxy-fall2/assets/pi_coin-CS16KSM_.png",qe="/Galaxy-fall2/assets/pi_coin-CS16KSM_.png",je="/Galaxy-fall2/assets/crystal_blue-CJdQb5S3.png",$e="/Galaxy-fall2/assets/crystal_yellow-ClgRf6Vt.png",Ye="/Galaxy-fall2/assets/crystal_purple-q7MJgr2f.png",le="/Galaxy-fall2/assets/orbital_drone_1-BmOkXB0E.png",Xe="/Galaxy-fall2/assets/orbital_drone_2-CJsKYhNq.png",Je="/Galaxy-fall2/assets/orbital_drone_3-B6uMGaBN.png",Ze="/Galaxy-fall2/assets/pi_coin-CS16KSM_.png",C="/Galaxy-fall2/assets/pi_coin2-CXJ9DDsR.png",Qe="/Galaxy-fall2/assets/shoot_tier1-CXkp6WS-.mp3",et="/Galaxy-fall2/assets/shoot_tier2-D4LOk5Q4.mp3",tt="/Galaxy-fall2/assets/shoot_tier3-BGEBniVG.mp3",st="/Galaxy-fall2/assets/shoot_tier4-CT5GPKJ5.mp3",at="/Galaxy-fall2/assets/black_hole-CQZbU2-7.mp3",it="/Galaxy-fall2/assets/laser-83Bw32zr.mp3",nt="/Galaxy-fall2/assets/drone_tier1-D6QQQHQ-.mp3",ot="/Galaxy-fall2/assets/drone_tier2-DjtUz-Pp.mp3",rt="/Galaxy-fall2/assets/drone_tier3-DN_sM1CS.mp3",lt="/Galaxy-fall2/assets/coin_collect-BsAl7R4M.mp3",ht="/Galaxy-fall2/assets/powerup_collect-BHm2Oo25.mp3",ct="/Galaxy-fall2/assets/enemy_explosion-7u-59IH7.mp3",_t="/Galaxy-fall2/assets/nuke-DsEQ3fIM.mp3",pt="/Galaxy-fall2/assets/drone_tier3-DN_sM1CS.mp3",mt="/Galaxy-fall2/assets/menu_music-BTTAbK1z.mp3",he="https://api.galaxy-fall-pi.com",g=m=>{const e=new Image;return e.src=m,e},dt=g(oe),gt=g(W),ut=g(z),ft=g(V),yt=g(q),vt=g(j),wt=g(Re),Et=g(Le),St=g(xe),bt=g(Ne),Tt=g(Be),Mt=g(Fe),At=g(Ge),kt=g(Ue),Ct=g(De),Pt=[g(le),g(Xe),g(Je)],It=g(Ze),Ot={WEAPON_UP:g(re),RAPID_FIRE:g(F),SIDE_SHOTS:g(G),LASER_BEAM:g($),HOMING_MISSILES:g(Y),SHIELD:g(X),REPAIR_KIT:g(J),EXTRA_LIFE:g(x),GHOST_PROTOCOL:g(Z),ORBITAL_DRONE:g(Q),NUKE:g(U),BLACK_HOLE:g(D),SCORE_BOOST:g(H)},L={WEAPON_UP:re,RAPID_FIRE:F,SIDE_SHOTS:G,LASER_BEAM:$,HOMING_MISSILES:Y,SHIELD:X,REPAIR_KIT:J,EXTRA_LIFE:x,GHOST_PROTOCOL:Z,ORBITAL_DRONE:Q,NUKE:U,BLACK_HOLE:D,SCORE_BOOST:H},ce={BLUE:g(je),YELLOW:g($e),PURPLE:g(Ye)},se={skin_default:dt,skin_sentinel:gt,skin_renegade:ut,skin_avenger:ft,skin_void:yt,skin_gold:vt};class Rt{constructor(){this.isAuthenticated=!1,this.username="",this.uid="",this.Pi=window.Pi,this.Pi||console.error("Pi SDK not found!")}setGame(e){this.game=e}async authenticate(){if(this.Pi){console.log("Starting Pi authentication...");try{const e=["username","payments"],t=await this.Pi.authenticate(e,this.onIncompletePaymentFound.bind(this));this.isAuthenticated=!0,this.username=t.user.username,this.uid=t.user.uid,console.log(`Successfully authenticated as ${this.username} (UID: ${this.uid})`),this.game.uiManager.renderShop()}catch(e){console.error("Pi authentication failed:",e),alert("Pi-Authentifizierung fehlgeschlagen. Bitte versuchen Sie es erneut.")}}}onIncompletePaymentFound(e){console.warn("Incomplete payment found:",e)}createPayment(e){if(!this.Pi||!this.isAuthenticated||!e.pi_cost||!e.coin_reward){console.error("Cannot create payment. Not authenticated or bundle is invalid.");return}const t={amount:e.pi_cost,memo:`Kauf von ${e.coin_reward} In-Game Münzen`,metadata:{bundleId:e.id,coins:e.coin_reward}},s={onReadyForServerApproval:a=>{console.log(`[CLIENT-SIDE] onReadyForServerApproval: ${a}`)},onReadyForServerCompletion:(a,i)=>{console.log(`[CLIENT-SIDE] onReadyForServerCompletion: ${a}, TXID: ${i}`),this.game.awardPiCoinBundle(e),alert(`${e.coin_reward} Münzen wurden erfolgreich hinzugefügt!`)},onCancel:a=>{console.log(`[CLIENT-SIDE] Payment cancelled: ${a}`),alert("Zahlungsvorgang abgebrochen.")},onError:(a,i)=>{console.error("[CLIENT-SIDE] Payment error:",a),i&&console.error("--> Payment details:",i),alert("Ein Fehler ist während der Zahlung aufgetreten.")}};try{this.Pi.createPayment(t,s)}catch(a){console.error("Error calling createPayment:",a)}}}class f{constructor(e,t){this.x=e,this.y=t}}class P{constructor(e,t,s,a,i){this.family="none",this.type="NONE",this._isGarbage=!1,this.inFormation=!1,this.game=e,this.pos=new f(t,s),this.width=a,this.height=i}update(e){}draw(e){}isAlive(){return!this._isGarbage}destroy(){this._isGarbage=!0}}class I extends P{constructor(e,t,s,a,i,n,r){super(e,t,s,a,i),this.family=n,this.type=r}}class _e extends P{constructor(e,t,s,a,i=.5,n=2){super(e,t,s,0,0),this.family="effect",this.type="PARTICLE",this.vel=new f((Math.random()-.5)*50,(Math.random()-.5)*50),this.size=Math.random()*n+1,this.life=Math.random()*i,this.initialLife=this.life,this.color=a}update(e){const t=e/1e3;this.pos.x+=this.vel.x*t,this.pos.y+=this.vel.y*t,this.life-=t,this.life<=0&&this.destroy()}draw(e){e.save(),e.globalAlpha=this.life/this.initialLife,e.fillStyle=this.color,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.size,0,Math.PI*2),e.fill(),e.restore()}}class pe extends I{constructor(e,t,s,a="#FFA500",i=1){super(e,t,s,0,0,"effect","EXPLOSION"),this.particles=[];const n=(this.game.uiManager.settings.particles===2?20:this.game.uiManager.settings.particles===1?10:0)*i;for(let r=0;r<n;r++)this.particles.push({pos:new f(t,s),vel:new f(Math.random()*360-180,Math.random()*360-180),size:Math.random()*4+1,life:.7,color:a})}update(e){const t=e/1e3;this.particles.forEach(s=>{s.pos.x+=s.vel.x*t,s.pos.y+=s.vel.y*t,s.life-=t}),this.particles=this.particles.filter(s=>s.life>0),this.particles.length===0&&this.destroy()}draw(e){this.particles.forEach(t=>{e.save(),e.globalAlpha=t.life/.7,e.fillStyle=t.color,e.beginPath(),e.arc(t.pos.x,t.pos.y,t.size,0,Math.PI*2),e.fill(),e.restore()})}}class Lt extends I{constructor(e,t,s,a="#FFF"){super(e,t,s,0,0,"effect","IMPACT"),this.particles=[];const i=this.game.uiManager.settings.particles>0?5:0;for(let n=0;n<i;n++)this.particles.push({pos:new f(t,s),vel:new f(Math.random()*120-60,Math.random()*120-60),size:Math.random()*2+1,life:.2,color:a})}update(e){const t=e/1e3;this.particles.forEach(s=>{s.pos.x+=s.vel.x*t,s.pos.y+=s.vel.y*t,s.life-=t}),this.particles=this.particles.filter(s=>s.life>0),this.particles.length===0&&this.destroy()}draw(e){this.particles.forEach(t=>{e.save(),e.globalAlpha=t.life/.2,e.fillStyle=t.color,e.beginPath(),e.arc(t.pos.x,t.pos.y,t.size,0,Math.PI*2),e.fill(),e.restore()})}}class xt extends P{constructor(e){super(e,e.width/2,e.height/2,0,0),this.radius=0,this.life=1,this.type="EFFECT"}update(e){const t=e/1e3;this.radius+=1200*t,this.life-=t,this.life<=0&&this.destroy()}draw(e){e.save(),e.fillStyle=`rgba(255,255,255,${this.life})`,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius,0,Math.PI*2),e.fill(),e.restore()}}class ee extends P{constructor(e,t,s,a="#F0F"){super(e,t,s,0,0),this.radius=0,this.life=.5,this.initialLife=.5,this.family="effect",this.type="SHOCKWAVE",this.color=a}update(e){const t=e/1e3;this.radius+=800*t,this.life-=t,this.life<=0&&this.destroy()}draw(e){e.save(),e.globalAlpha=this.life/this.initialLife,e.strokeStyle=this.color,e.lineWidth=5,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius,0,Math.PI*2),e.stroke(),e.restore()}}class ae extends P{constructor(e,t,s,a){super(e,t,s,0,0),this.life=.4,this.radius=0,this.maxRadius=40,this.family="effect",this.isOpening=a,this.radius=a?0:this.maxRadius,e.uiManager.soundManager.play(a?"teleporterIn":"teleporterOut")}update(e){const t=e/1e3;this.life-=t,this.radius+=(this.isOpening?1:-1)*(this.maxRadius/.4)*t,this.life<=0&&this.destroy()}draw(e){if(this.radius<0)return;e.save();const t=this.life/.4;e.globalAlpha=t,e.strokeStyle="#EE82EE",e.lineWidth=4,e.shadowColor="#EE82EE",e.shadowBlur=15,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius,0,Math.PI*2),e.stroke(),e.restore()}}class Nt extends P{constructor(e,t,s){super(e,t,s,0,0),this.radius=0,this.life=.8,this.initialLife=.8,this.family="effect",this.type="REVIVE_EFFECT"}update(e){const t=e/1e3;this.radius+=600*t,this.life-=t,this.life<=0&&this.destroy()}draw(e){e.save(),e.globalAlpha=this.life/this.initialLife,e.strokeStyle="#FFD700",e.lineWidth=8,e.shadowColor="#FFFFFF",e.shadowBlur=25,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.radius,0,Math.PI*2),e.stroke(),e.restore()}}class Bt extends P{constructor(e){super(e,e.width-150,10,140,40),this.pulseTimer=0}update(e){this.pulseTimer+=e/1e3,this.pos.x=this.game.width-160}draw(e){if(!this.game.player||this.game.gameState==="REVIVING")return;const t=this.game.player.availableReviveCrystals;if(t.length===0)return;const s=1+Math.sin(this.pulseTimer*3)*.05,a=.8+Math.sin(this.pulseTimer*3)*.2;e.save(),e.globalAlpha=a,t.forEach((i,n)=>{const r=ce[i];if(!r)return;const h=40*s,l=40*s,o=this.pos.x+n*45,_=this.pos.y;e.drawImage(r,o,_,h,l)}),e.restore()}}class Ft extends P{constructor(e,t,s,a,i){super(e,t,s,40,40),this.rotationAngle=0,this.rotationSpeed=3,this.speed=800,this.family="effect",this.target=a,this.image=ce[i],this.game.uiManager.soundManager.play("reviveCrystalFly")}update(e){const t=e/1e3;this.rotationSpeed+=20*t,this.rotationAngle+=this.rotationSpeed*t;const s=this.target.pos.x+this.target.width/2,a=this.target.pos.y+this.target.height/2,i=Math.atan2(a-this.pos.y,s-this.pos.x);this.pos.x+=Math.cos(i)*this.speed*t,this.pos.y+=Math.sin(i)*this.speed*t,Math.hypot(s-this.pos.x,a-this.pos.y)<20&&(this.target.finalizeRevive(),this.destroy())}draw(e){e.save(),e.translate(this.pos.x,this.pos.y),e.rotate(this.rotationAngle),e.drawImage(this.image,-this.width/2,-this.height/2,this.width,this.height),e.restore()}}class Gt extends I{constructor(e,t,s,a){super(e,t,s,45,45,"pickup","COIN"),this.speed=180,this.angle=0,this.rotationSpeed=7,this.value=a,this.image=It}update(e){const t=e/1e3;this.pos.y+=this.speed*t,this.angle+=this.rotationSpeed*t,this.pos.y>this.game.height&&this.destroy()}draw(e){const t=Math.cos(this.angle);e.save(),e.translate(this.pos.x+this.width/2,this.pos.y+this.height/2),e.scale(t,1),e.drawImage(this.image,-this.width/2,-this.height/2,this.width,this.height),e.restore()}onCollect(){if(this.game.player){this.game.uiManager.soundManager.play("coinCollect");const e=this.game.shopManager.getUpgradeLevel("coin_value");this.game.coins+=1+e,this.game.saveGameData()}this.destroy()}}class Ut extends I{constructor(e,t,s){super(e,t,s,38,38,"pickup","POWERUP"),this.speed=150;const a=["WEAPON_UP","SIDE_SHOTS","RAPID_FIRE","SHIELD","REPAIR_KIT","EXTRA_LIFE","GHOST_PROTOCOL","ORBITAL_DRONE","NUKE","BLACK_HOLE","SCORE_BOOST","LASER_BEAM","HOMING_MISSILES"];this.powerUpType=a[Math.floor(Math.random()*a.length)]}update(e){this.pos.y+=this.speed*(e/1e3),this.pos.y>this.game.height&&this.destroy()}draw(e){const t=Ot[this.powerUpType];t&&e.drawImage(t,this.pos.x,this.pos.y,this.width,this.height)}onCollect(){if(this.game.player){const e=["NUKE","BLACK_HOLE","SCORE_BOOST"],t=["LASER_BEAM","HOMING_MISSILES"];e.includes(this.powerUpType)?this.game.player.powerUpManager.collectSpecial(this.powerUpType):t.includes(this.powerUpType)?this.game.player.powerUpManager.collectUltra(this.powerUpType):this.game.player.powerUpManager.activate(this.powerUpType)}this.destroy()}}class T extends I{constructor(e,t,s,a,i,n,r,h){super(e,t,s,a,i,"enemy",h),this.stunTimer=0,this.speed=90,this.isBoss=!1,this.collisionDamage=35,this.isBossAdd=!1,this.baseHealth=n,this.health=this.baseHealth*e.enemyHealthMultiplier,this.maxHealth=this.health,this.pointsValue=r}takeHit(e){if(this.isAlive()&&(this.health-=e,this.health<=0)){this.destroy();let t=this.pointsValue*this.game.level;this.game.player&&this.game.player.isScoreBoosted()&&(t*=2),this.game.score+=t,this.game.scoreEarnedThisLevel+=t,this.isBoss&&(this.game.isBossActive=!1,setTimeout(()=>this.game.changeState("LEVEL_START"),3e3)),this.game.uiManager.settings.particles>0&&this.game.addEntity(new pe(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2)),Math.random()<.2&&this.game.addEntity(new Gt(this.game,this.pos.x,this.pos.y,this.pointsValue)),Math.random()<.15&&this.game.addEntity(new Ut(this.game,this.pos.x,this.pos.y)),this.game.uiManager.soundManager.play("enemyExplosion")}}update(e){if(this.stunTimer>0){this.stunTimer-=e;return}if(this.inFormation)return;const t=e/1e3;this.pos.y+=this.speed*t,this.pos.y>this.game.height&&this.destroy()}stun(e){this.stunTimer=e}drawHealthBar(e){this.health<this.maxHealth&&!this.isBoss&&(e.save(),e.fillStyle="#500",e.fillRect(this.pos.x,this.pos.y-10,this.width,5),e.fillStyle="#f00",e.fillRect(this.pos.x,this.pos.y-10,this.width*(this.health/this.maxHealth),5),e.restore())}}class me extends T{constructor(e){super(e,Math.random()*(e.width-60),-54,60,54,1,10,"GRUNT"),this.speed=100*e.enemySpeedMultiplier,this.collisionDamage=35,this.image=wt}draw(e){e.save(),this.isBossAdd&&(e.shadowColor="#EE82EE",e.shadowBlur=15),e.drawImage(this.image,this.pos.x,this.pos.y,this.width,this.height),this.drawHealthBar(e),e.restore()}}class de extends T{constructor(e){super(e,Math.random()*(e.width-100),-96,100,96,3,30,"TANK"),this.speed=60*e.enemySpeedMultiplier,this.collisionDamage=50,this.image=Et}draw(e){e.save(),e.drawImage(this.image,this.pos.x,this.pos.y,this.width,this.height),this.drawHealthBar(e),e.restore()}}class ge extends T{constructor(e){super(e,Math.random()*(e.width-55),-46,55,46,1,20,"WEAVER"),this.speed=80*e.enemySpeedMultiplier,this.angle=Math.random()*Math.PI*2,this.hSpeed=(Math.random()*2+1)*60,this.collisionDamage=35,this.image=St}update(e){const t=e/1e3;super.update(e),!this.inFormation&&(this.angle+=3*t,this.pos.x+=Math.sin(this.angle)*this.hSpeed*t,(this.pos.x<0||this.pos.x>this.game.width-this.width)&&(this.pos.x=Math.max(0,Math.min(this.pos.x,this.game.width-this.width)),this.hSpeed*=-1))}draw(e){e.save(),this.isBossAdd&&(e.shadowColor="#EE82EE",e.shadowBlur=15),e.drawImage(this.image,this.pos.x,this.pos.y,this.width,this.height),this.drawHealthBar(e),e.restore()}}class ue extends T{constructor(e){super(e,Math.random()*(e.width-52),-52,52,52,2,50,"SHOOTER"),this.speed=70*e.enemySpeedMultiplier,this.fireCooldown=Math.random()*1e3+1500,this.collisionDamage=50,this.image=bt}update(e){super.update(e),this.fireCooldown-=e,this.fireCooldown<=0&&this.pos.y>0&&(this.game.addEntity(new N(this.game,this.pos.x+this.width/2,this.pos.y+this.height)),this.game.uiManager.soundManager.play("enemyShoot"),this.fireCooldown=this.inFormation?2e3+Math.random()*1500:2e3)}draw(e){e.save(),e.drawImage(this.image,this.pos.x,this.pos.y,this.width,this.height),this.drawHealthBar(e),e.restore()}}class fe extends T{constructor(e){super(e,Math.random()*(e.width-60),50+Math.random()*(e.height/3),60,60,2,80,"TELEPORTER"),this.teleportCooldown=4e3,this.isVisible=!0,this.visibleTimer=3e3,this.speed=0,this.image=Tt,this.fireCooldown=2500+Math.random()*2e3}update(e){this.inFormation||(this.teleportCooldown-=e,this.isVisible?(this.visibleTimer-=e,this.visibleTimer<=0&&(this.isVisible=!1,this.game.addEntity(new ae(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2,!1)),this.teleportCooldown=1e3),this.fireCooldown-=e,this.fireCooldown<=0&&this.pos.y>0&&this.game.player&&(this.shoot(),this.fireCooldown=3e3)):this.teleportCooldown<=0&&(this.teleport(),this.isVisible=!0,this.visibleTimer=3e3))}shoot(){if(!this.game.player)return;const e=this.game.player,t=400,s=20,a=this.pos.x+this.width/2,i=this.pos.y+this.height/2,n=e.pos.x+e.width/2,r=e.pos.y+e.height/2,h=Math.atan2(r-i,n-a),l=Math.cos(h)*t,o=Math.sin(h)*t;this.game.addEntity(new N(this.game,a,i,l,o,s)),this.game.uiManager.soundManager.play("enemyShoot")}teleport(){this.pos.x=Math.random()*(this.game.width-this.width),this.pos.y=50+Math.random()*(this.game.height/3),this.game.addEntity(new ae(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2,!0))}draw(e){this.isVisible&&(e.save(),e.drawImage(this.image,this.pos.x,this.pos.y,this.width,this.height),this.drawHealthBar(e),e.restore())}}class Dt extends P{constructor(e,t,s){super(e,t,s,0,0),this.life=1e4,this.pullRadius=300,this.killRadius=20,this.type="EFFECT"}update(e){const t=e/1e3;if(this.life-=e,this.life<=0){this.game.entities.forEach(s=>{Math.hypot(this.pos.x-(s.pos.x+s.width/2),this.pos.y-(s.pos.y+s.height/2))<this.pullRadius&&s instanceof T&&!s.isBoss&&s.takeHit(9999)}),this.destroy(),this.game.addEntity(new ee(this.game,this.pos.x,this.pos.y,"#EE82EE"));return}this.game.entities.forEach(s=>{if(s.family==="enemy"||s.family==="pickup"){const a=Math.hypot(this.pos.x-(s.pos.x+s.width/2),this.pos.y-(s.pos.y+s.height/2));if(a<this.pullRadius&&!(s instanceof T&&s.isBoss)){s instanceof T&&s.stun(50);const n=Math.atan2(this.pos.y-s.pos.y,this.pos.x-s.pos.x),r=180*(1-a/this.pullRadius);s.pos.x+=Math.cos(n)*r*t,s.pos.y+=Math.sin(n)*r*t,a<this.killRadius&&(s instanceof T?s.takeHit(9999):s.destroy())}}})}draw(e){e.save(),e.fillStyle="black",e.beginPath(),e.arc(this.pos.x,this.pos.y,this.killRadius,0,Math.PI*2),e.fill(),e.strokeStyle="#f0f",e.lineWidth=3,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.pullRadius*(this.life/8e3),0,Math.PI*2),e.stroke(),e.restore()}}class E extends I{constructor(e,t,s,a=0,i=-600,n="#00FFFF"){super(e,t-2.5,s,5,20,"projectile","PROJECTILE"),this.damage=1,this.vel=new f(a,i),this.color=n}update(e){const t=e/1e3;this.pos.x+=this.vel.x*t,this.pos.y+=this.vel.y*t,(this.pos.y<-this.height||this.pos.y>this.game.height||this.pos.x<-this.width||this.pos.x>this.game.width)&&this.destroy()}draw(e){e.save();const t=e.createLinearGradient(this.pos.x,this.pos.y,this.pos.x+this.width,this.pos.y),s=`${this.color}80`;t.addColorStop(0,s),t.addColorStop(.5,"#FFFFFF"),t.addColorStop(1,s),e.fillStyle=t,e.shadowColor=this.color,e.shadowBlur=8,e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.restore()}onHit(e){this.game.addEntity(new Lt(this.game,this.pos.x+this.width/2,this.pos.y,this.color)),this.destroy()}}class Ht extends E{constructor(e,t,s,a=0,i=-600){super(e,t,s,a,i),this.pos.x=t-4,this.width=8,this.height=22,this.damage=1.5}draw(e){e.save();const t=e.createLinearGradient(this.pos.x,this.pos.y,this.pos.x+this.width,this.pos.y),s="#FFD70080";t.addColorStop(0,s),t.addColorStop(.5,"#FFFFFF"),t.addColorStop(1,s),e.fillStyle=t,e.shadowColor="#FFA500",e.shadowBlur=10,e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.restore()}}class Kt extends E{constructor(e,t,s,a=0,i=-700){super(e,t,s,a,i),this.hitEnemies=[],this.pos.x=t-3,this.width=6,this.height=25,this.damage=.8}draw(e){e.save();const t=e.createLinearGradient(this.pos.x,this.pos.y,this.pos.x+this.width,this.pos.y),s="#9400D380";t.addColorStop(0,s),t.addColorStop(.5,"#FFFFFF"),t.addColorStop(1,s),e.fillStyle=t,e.shadowColor="#EE82EE",e.shadowBlur=12,e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.restore()}onHit(e){this.hitEnemies.push(e)}hasHit(e){return this.hitEnemies.includes(e)}}class ye extends E{constructor(e,t,s,a,i){super(e,t-10,s-10,a,i),this.width=20,this.height=20,this.type="BLACK_HOLE_PROJECTILE"}draw(e){e.save(),e.fillStyle="#9400D3",e.shadowColor="#EE82EE",e.shadowBlur=15,e.beginPath(),e.arc(this.pos.x+this.width/2,this.pos.y+this.height/2,this.width/2,0,Math.PI*2),e.fill(),e.restore()}onHit(e){this.game.addEntity(new Dt(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2)),this.game.uiManager.soundManager.play("blackHole"),this.destroy()}}class Wt extends I{constructor(e,t){super(e,0,0,60,e.height,"projectile","LASER_BEAM"),this.damage=.2,this.phase=0,this.amplitude=30,this.frequency=.02,this.player=t}update(e){if(!this.player.isAlive()||!this.player.powerUpManager.isActive("LASER_BEAM")){this.destroy();return}this.pos.x=this.player.pos.x+this.player.width/2-this.amplitude,this.pos.y=0,this.height=this.player.pos.y,this.phase+=e/1e3*15}destroy(){this.isAlive()&&this.game.uiManager.soundManager.stopLoop("laser"),super.destroy()}draw(e){e.save();const t=this.player.pos.x+this.player.width/2,s=this.player.pos.y;e.beginPath(),e.moveTo(t+Math.sin(this.phase)*this.amplitude,s);for(let a=s;a>0;a--){const i=Math.sin(a*this.frequency+this.phase)*this.amplitude;e.lineTo(t+i,a)}e.strokeStyle="#9400D3",e.lineWidth=15,e.shadowColor="#EE82EE",e.shadowBlur=20,e.stroke(),e.beginPath(),e.moveTo(t+Math.sin(this.phase)*this.amplitude,s);for(let a=s;a>0;a--){const i=Math.sin(a*this.frequency+this.phase)*this.amplitude;e.lineTo(t+i,a)}e.strokeStyle="#EE82EE",e.lineWidth=8,e.shadowColor="#EE82EE",e.shadowBlur=15,e.stroke(),e.beginPath(),e.moveTo(t+Math.sin(this.phase)*this.amplitude,s);for(let a=s;a>0;a--){const i=Math.sin(a*this.frequency+this.phase)*this.amplitude;e.lineTo(t+i,a)}e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.restore()}}class ve extends E{constructor(e,t,s,a=15){super(e,t,s,(Math.random()-.5)*200,-300),this.target=null,this.searchCooldown=0,this.lifetime=5e3,this.type="HOMING_MISSILE",this.damage=a,this.width=8,this.height=16}findTarget(){const e=this.game.entities.filter(a=>a.family==="enemy"&&a.isAlive());if(e.length===0){this.target=null;return}let t=null,s=1/0;e.forEach(a=>{const i=Math.hypot(this.pos.x-(a.pos.x+a.width/2),this.pos.y-(a.pos.y+a.height/2));i<s&&(s=i,t=a)}),this.target=t}update(e){if(this.lifetime-=e,this.searchCooldown-=e,this.searchCooldown<=0&&(this.findTarget(),this.searchCooldown=500),this.target&&this.target.isAlive()){const a=e/1e3,i=this.target.pos.x+this.target.width/2,n=this.target.pos.y+this.target.height/2,r=i-this.pos.x,h=n-this.pos.y,l=Math.hypot(r,h),o=l>0?r/l*400:0,_=l>0?h/l*400:0;this.vel.x+=(o-this.vel.x)*5*a,this.vel.y+=(_-this.vel.y)*5*a}super.update(e),this.lifetime<=0&&this.destroy()}draw(e){e.save(),e.translate(this.pos.x+this.width/2,this.pos.y+this.height/2);const t=Math.atan2(this.vel.y,this.vel.x)+Math.PI/2;e.rotate(t);const s=e.createLinearGradient(-this.width/2,0,this.width/2,0);s.addColorStop(0,"#ff990080"),s.addColorStop(.5,"#FFFFFF"),s.addColorStop(1,"#ff990080"),e.fillStyle=s,e.shadowColor="#ff5722",e.shadowBlur=10,e.beginPath(),e.moveTo(0,-this.height/2),e.lineTo(-this.width/2,this.height/2),e.lineTo(this.width/2,this.height/2),e.closePath(),e.fill();const a=Math.random()*8+4;e.fillStyle="#ff5722",e.beginPath(),e.moveTo(0,this.height/2),e.lineTo(-this.width/2+2,this.height/2+a/2),e.lineTo(0,this.height/2+a),e.lineTo(this.width/2-2,this.height/2+a/2),e.closePath(),e.fill(),e.restore()}}class ie extends E{constructor(e,t,s,a,i){super(e,t,s,a,i,"#FFA500"),this.width=20,this.height=5,this.pos.x=t-this.width/2,this.pos.y=s-this.height/2}draw(e){e.save();const t=e.createLinearGradient(this.pos.x,this.pos.y,this.pos.x,this.pos.y+this.height),s="#FFA50080";t.addColorStop(0,s),t.addColorStop(.5,"#FFFFFF"),t.addColorStop(1,s),e.fillStyle=t,e.shadowColor=this.color,e.shadowBlur=8,e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.restore()}}class N extends E{constructor(e,t,s,a=0,i=360,n=25){super(e,t-2.5,s,a,i),this.family="projectile",this.type="ENEMY_PROJECTILE",this.playerDamage=n}draw(e){e.save(),e.fillStyle="#FF4136",e.shadowColor="#FF4136",e.shadowBlur=5,e.fillRect(this.pos.x,this.pos.y,this.width,this.height),e.restore()}}class zt extends N{constructor(e,t,s,a,i,n){super(e,t,s,a,i,n),this.width=16,this.height=16}draw(e){e.save();const t=this.pos.x+this.width/2,s=this.pos.y+this.height/2,a=e.createRadialGradient(t,s,0,t,s,this.width/2);a.addColorStop(0,"rgba(255, 255, 150, 1)"),a.addColorStop(.6,"rgba(255, 165, 0, 1)"),a.addColorStop(1,"rgba(255, 69, 0, 0.5)"),e.fillStyle=a,e.shadowColor="#FFA500",e.shadowBlur=15,e.beginPath(),e.arc(t,s,this.width/2,0,Math.PI*2),e.fill(),e.restore()}}class O extends N{constructor(e,t,s,a,i,n){super(e,t,s,a,i,n),this.width=12,this.height=12}draw(e){e.save();const t=this.pos.x+this.width/2,s=this.pos.y+this.height/2,a=e.createRadialGradient(t,s,0,t,s,this.width/2);a.addColorStop(0,"rgba(255, 180, 180, 1)"),a.addColorStop(.5,"rgba(255, 0, 0, 1)"),a.addColorStop(1,"rgba(139, 0, 0, 0.5)"),e.fillStyle=a,e.shadowColor="#FF4136",e.shadowBlur=10,e.beginPath(),e.arc(t,s,this.width/2,0,Math.PI*2),e.fill(),e.restore()}}class Vt extends I{constructor(e,t,s){super(e,0,0,36,36,"player","DRONE"),this.orbitRadius=75,this.fireCooldown=0,this.tier=t,this.index=s,this.image=Pt[this.tier-1]}updateIndex(e){this.index=e}update(e){if(!this.game.player||!this.game.player.isAlive()||!this.game.player.powerUpManager.isActive("ORBITAL_DRONE")){this.destroy();return}const t=this.game.player.drones.length,s=2*Math.PI/t*this.index,a=this.game.player.droneAngle+s,i=this.game.player.pos;this.pos.x=i.x+this.game.player.width/2+Math.cos(a)*this.orbitRadius,this.pos.y=i.y+this.game.player.height/2+Math.sin(a)*this.orbitRadius,this.fireCooldown-=e,this.fireCooldown<=0&&this.shoot()}shoot(){switch(this.tier){case 1:this.game.addEntity(new E(this.game,this.pos.x,this.pos.y)),this.fireCooldown=600,this.game.uiManager.soundManager.play("droneTier1");break;case 2:this.game.addEntity(new Ht(this.game,this.pos.x,this.pos.y)),this.fireCooldown=500,this.game.uiManager.soundManager.play("droneTier2");break;case 3:this.game.addEntity(new ve(this.game,this.pos.x,this.pos.y,1.875)),this.fireCooldown=400,this.game.uiManager.soundManager.play("droneTier3");break}}draw(e){e.save(),e.drawImage(this.image,this.pos.x-this.width/2,this.pos.y-this.height/2,this.width,this.height),e.restore()}}class qt{constructor(e){this.weaponTier=1,this.weaponTierTimer=0,this.ultraWeapon=null,this.timers={},this.specialInventory=[],this.ultraInventory=[],this.player=e,this.game=e.game}update(e){for(const t in this.timers)this.timers[t]-=e,this.timers[t]<=0&&this.deactivate(t);this.weaponTierTimer>0&&(this.weaponTierTimer-=e,this.weaponTierTimer<=0&&(this.weaponTier--,this.setWeaponTierTimer()))}setWeaponTierTimer(){if(this.weaponTier<=1){this.weaponTier=1,this.weaponTierTimer=0;return}switch(this.weaponTier){case 4:this.weaponTierTimer=3e4;break;case 3:this.weaponTierTimer=6e4;break;case 2:this.weaponTierTimer=9e4;break}}deactivate(e){e==="GHOST_PROTOCOL"&&this.game.uiManager.soundManager.play("ghostDeactivate"),delete this.timers[e],this.ultraWeapon===e?(this.ultraWeapon=null,this.player.laser&&(this.player.laser.destroy(),this.player.laser=null)):e==="ORBITAL_DRONE"&&(this.player.drones.forEach(t=>t.destroy()),this.player.drones=[])}resetTemporaryPowerUps(){Object.keys(this.timers).forEach(e=>this.deactivate(e)),this.ultraWeapon=null}isActive(e){return this.timers[e]>0}onPlayerHit(){this.weaponTier>1&&(this.weaponTier--,this.game.uiManager.soundManager.play("weaponDowngrade"),this.setWeaponTierTimer())}collectSpecial(e){this.collectToInventory(e,this.specialInventory,3)}collectUltra(e){this.collectToInventory(e,this.ultraInventory,2)}collectToInventory(e,t,s){const a=[5,10,25];let i=5;if(t===this.specialInventory){const r=this.game.shopManager.getUpgradeLevel("special_stack_size");i=a[r]||5}const n=t.find(r=>r.type===e);n?n.count<i&&(n.count++,this.game.uiManager.soundManager.play("powerup")):t.length<s&&(t.push({type:e,count:1}),this.game.uiManager.soundManager.play("powerup"))}activateSpecial(e){const t=this.specialInventory[e];if(t){if(t.type==="BLACK_HOLE"){const s=this.game.player;this.game.addEntity(new ye(this.game,s.pos.x+s.width/2,s.pos.y,0,-600)),this.game.uiManager.soundManager.play("missileLaunch")}else this.activate(t.type);t.count--,t.count<=0&&this.specialInventory.splice(e,1)}}activateUltra(e){const t=this.ultraInventory[e];t&&(this.ultraWeapon&&this.deactivate(this.ultraWeapon),this.activate(t.type),t.count--,t.count<=0&&this.ultraInventory.splice(e,1))}activate(e,t){const a=1+this.game.shopManager.getUpgradeLevel("powerup_duration")*.1,i={LASER_BEAM:7750,HOMING_MISSILES:15e3},n={SIDE_SHOTS:15e3,RAPID_FIRE:3e4},r=["SHIELD","REPAIR_KIT","EXTRA_LIFE","GHOST_PROTOCOL"],h=["NUKE","SCORE_BOOST"];if(e==="ORBITAL_DRONE"){if(this.player.drones.length<3){const l=this.player.drones.length+1;this.player.drones.push(new Vt(this.game,l,this.player.drones.length)),this.player.drones.forEach((o,_)=>o.updateIndex(_))}this.timers.ORBITAL_DRONE=3e4*a}else if(e==="WEAPON_UP")this.weaponTier<4&&(this.weaponTier++,this.game.uiManager.soundManager.play("weaponUpgrade")),this.setWeaponTierTimer();else if(Object.keys(n).includes(e)){const l=t??n[e];this.timers[e]=l*a}else if(Object.keys(i).includes(e))this.ultraWeapon=e,this.timers[e]=t??i[e];else if(r.includes(e)){if(e==="EXTRA_LIFE")this.player.lives<this.player.maxLives&&this.player.lives++;else if(e==="REPAIR_KIT")this.player.energy=this.player.maxEnergy;else if(e==="SHIELD")this.timers[e]=1/0,this.game.uiManager.soundManager.play("shieldActivate");else if(e==="GHOST_PROTOCOL"){const l=t??15e3;this.timers[e]=t?l:l*a,this.game.uiManager.soundManager.play("ghostActivate")}}else h.includes(e)&&(e==="NUKE"?(this.game.entities.filter(l=>l.family==="enemy"&&!l.isBoss).forEach(l=>l.takeHit(9999)),this.game.addEntity(new xt(this.game)),this.game.uiManager.soundManager.play("nuke")):e==="SCORE_BOOST"&&(this.timers[e]=2e4*a));this.game.uiManager.soundManager.play("powerup")}shoot(){const e=this.player;if(e.fireCooldown=this.isActive("RAPID_FIRE")?75:150,this.ultraWeapon)switch(this.ultraWeapon){case"LASER_BEAM":(!e.laser||!e.laser.isAlive())&&(e.laser=new Wt(this.game,e),this.game.addEntity(e.laser),this.game.uiManager.soundManager.playLoop("laser")),e.fireCooldown=0;return;case"HOMING_MISSILES":this.game.addEntity(new ve(this.game,e.pos.x+e.width/2,e.pos.y)),e.fireCooldown=400,this.game.uiManager.soundManager.play("missileLaunch");break}const t=e.pos.x,s=e.pos.y,a=e.width,i=e.height,n=-600,r=15*(Math.PI/180);let h="#00FFFF";switch(this.weaponTier){case 2:h="#B10DC9";break;case 3:h="#FFFF00";break;case 4:h="#FF4136";break}switch(this.weaponTier){case 1:this.game.addEntity(new E(this.game,t+a/2,s,0,n,h));break;case 2:this.game.addEntity(new E(this.game,t+a*.2,s,0,n,h)),this.game.addEntity(new E(this.game,t+a*.8,s,0,n,h));break;case 3:this.game.addEntity(new E(this.game,t+a/2,s,0,n,h)),this.game.addEntity(new E(this.game,t+a/2,s,Math.sin(-r)*Math.abs(n),Math.cos(-r)*n,h)),this.game.addEntity(new E(this.game,t+a/2,s,Math.sin(r)*Math.abs(n),Math.cos(r)*n,h));break;case 4:this.game.addEntity(new E(this.game,t+a*.1,s,-150,n,h)),this.game.addEntity(new E(this.game,t+a*.9,s,150,n,h)),this.game.addEntity(new E(this.game,t+a*.3,s,0,n,h)),this.game.addEntity(new E(this.game,t+a*.7,s,0,n,h));break}this.isActive("SIDE_SHOTS")&&(this.game.addEntity(new ie(this.game,t,s+i/2,-300,0)),this.game.addEntity(new ie(this.game,t+a,s+i/2,300,0))),this.game.uiManager.soundManager.play("shoot")}}class ne extends I{constructor(e,t){super(e,e.width/2-25,e.height-80,50,40,"player","PLAYER"),this.fireCooldown=0,this.drones=[],this.laser=null,this.droneAngle=0,this.isChargingBlackHole=!1,this.blackHoleChargeSlot=null,this.availableReviveCrystals=[],this.lives=t.lives,this.maxLives=3+e.shopManager.getUpgradeLevel("start_lives"),this.energy=t.energy,this.maxEnergy=t.maxEnergy,this.speed=t.speed,this.powerUpManager=new qt(this),this.initializeReviveCrystals()}initializeReviveCrystals(){this.availableReviveCrystals=[];const e=this.game.shopManager.getUpgradeLevel("revive_chance");e>=1&&this.availableReviveCrystals.push("BLUE"),e>=2&&this.availableReviveCrystals.push("YELLOW"),e>=3&&this.availableReviveCrystals.push("PURPLE")}update(e){const t=e/1e3;if(this.game.isMobile){if(this.game.touchX!==null&&this.game.touchY!==null){const s=this.game.touchX-this.width/2,a=this.game.touchY-this.height/2;this.pos.x+=(s-this.pos.x)*.2,this.pos.y+=(a-this.pos.y)*.2}}else{const s=new f(0,0);(this.game.keys.ArrowLeft||this.game.keys.KeyA)&&(s.x=-1),(this.game.keys.ArrowRight||this.game.keys.KeyD)&&(s.x=1),(this.game.keys.ArrowUp||this.game.keys.KeyW)&&(s.y=-1),(this.game.keys.ArrowDown||this.game.keys.KeyS)&&(s.y=1);const a=Math.hypot(s.x,s.y);a>0&&(this.pos.x+=s.x/a*this.speed*t,this.pos.y+=s.y/a*this.speed*t)}this.pos.x=Math.max(0,Math.min(this.pos.x,this.game.width-this.width)),this.pos.y=Math.max(0,Math.min(this.pos.y,this.game.height-this.height)),this.fireCooldown<=0&&!this.isChargingBlackHole&&this.shoot(),this.fireCooldown>0&&(this.fireCooldown-=e),this.droneAngle+=3*t,this.powerUpManager.update(e),this.drones.forEach(s=>s.update(e))}draw(e){e.save(),e.globalAlpha=this.isGhosted()?.5:1;const t=this.game.shopManager.playerCosmetics.equipped_skin,s=se[t]||se.skin_default,a=this.pos.x+this.width/2-s.width/2,i=this.pos.y+this.height/2-s.height/2;if(this.isShielded()){const n=Math.sin(Date.now()/200)*.5+.5,r=10+n*15,h=.7+n*.3;e.shadowColor=`rgba(11, 255, 255, ${h})`,e.shadowBlur=r}e.drawImage(s,a,i),e.shadowBlur=0,e.shadowColor="transparent",this.drones.forEach(n=>n.draw(e)),e.restore()}shoot(){this.powerUpManager.shoot()}takeHit(e){if(!this.isGhosted()){if(this.isShielded()){this.powerUpManager.deactivate("SHIELD"),this.game.uiManager.soundManager.play("shieldDown");return}if(this.powerUpManager.onPlayerHit(),this.energy-=e,this.game.uiManager.soundManager.play("playerHit"),this.energy<=0)if(this.lives--,this.lives<=0){if(this.availableReviveCrystals.length>0){const t=this.availableReviveCrystals.shift();this.game.startReviveSequence(this,t);return}this.game.uiManager.soundManager.play("reviveFail"),this.destroy(),this.game.addEntity(new pe(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2,"#FFFFFF",2)),this.game.uiManager.soundManager.play("playerExplosion")}else this.energy=this.maxEnergy,this.pos.x=this.game.width/2-this.width/2,this.pos.y=this.game.height-80,this.powerUpManager.activate("GHOST_PROTOCOL",5e3)}}finalizeRevive(){this.lives=1,this.energy=this.maxEnergy*.5,this.game.addEntity(new Nt(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2)),this.game.uiManager.soundManager.play("revive"),this.powerUpManager.activate("GHOST_PROTOCOL",3e3),this.game.changeState("PLAYING")}isShielded(){return this.powerUpManager.isActive("SHIELD")}isGhosted(){return this.powerUpManager.isActive("GHOST_PROTOCOL")}isScoreBoosted(){return this.powerUpManager.isActive("SCORE_BOOST")}}class we extends T{constructor(e,t,s){super(e,e.width/2-112.5,-150,225,100,t,5e3,"BOSS_SENTINEL_PRIME"),this.attackPattern=0,this.attackTimer=5e3,this.movementPattern="ENTER",this.patrolY=50,this.isPreparingCharge=!1,this.chargePreparationTimer=0,this.isPreparingLineAttack=!1,this.lineAttackPreparationTimer=0,this.chargeTargetPos=null,this.chargeOriginPos=null,this.visualOffsetY=50/2,this.isBoss=!0,this.hSpeed=100*s,this.image=Mt,this.collisionDamage=50}update(e){const t=e/1e3;if(this.isPreparingCharge){this.chargePreparationTimer-=e,this.chargePreparationTimer<=0&&this.executeAttack();return}if(this.isPreparingLineAttack){this.lineAttackPreparationTimer-=e,this.lineAttackPreparationTimer<=0&&this.executeAttack();return}if(this.movementPattern==="DASH_TO_PLAYER"&&this.chargeTargetPos){const a=this.chargeTargetPos.x-this.width/2,i=this.chargeTargetPos.y-this.height/2,n=Math.atan2(i-this.pos.y,a-this.pos.x);this.pos.x+=Math.cos(n)*800*t,this.pos.y+=Math.sin(n)*800*t,Math.hypot(a-this.pos.x,i-this.pos.y)<20&&(this.movementPattern="RETURN_TO_ORIGIN")}else if(this.movementPattern==="RETURN_TO_ORIGIN"&&this.chargeOriginPos){const a=this.chargeOriginPos.x,i=this.chargeOriginPos.y,n=Math.atan2(i-this.pos.y,a-this.pos.x);this.pos.x+=Math.cos(n)*400*t,this.pos.y+=Math.sin(n)*400*t,Math.hypot(a-this.pos.x,i-this.pos.y)<20&&(this.movementPattern="PATROL",this.chargeOriginPos=null,this.chargeTargetPos=null,this.pos.x=a,this.pos.y=i)}else this.movementPattern==="ENTER"?(this.pos.y+=100*t,this.pos.y>=this.patrolY&&(this.pos.y=this.patrolY,this.movementPattern="PATROL")):this.movementPattern==="PATROL"?(this.pos.x+=this.hSpeed*t,(this.pos.x<=0||this.pos.x>=this.game.width-this.width)&&(this.pos.x=Math.max(0,Math.min(this.pos.x,this.game.width-this.width)),this.hSpeed*=-1)):this.movementPattern;this.attackTimer-=e,this.attackTimer<=0&&(this.prepareAttack(),this.attackTimer=5e3)}prepareAttack(){switch(this.attackPattern=Math.floor(Math.random()*3),this.attackPattern){case 0:this.isPreparingLineAttack=!0,this.lineAttackPreparationTimer=1500;break;case 1:this.executeAttack();break;case 2:if(this.game.player){this.isPreparingCharge=!0,this.chargePreparationTimer=1500,this.chargeOriginPos=new f(this.pos.x,this.pos.y);const e=this.game.player.pos.x+this.game.player.width/2,t=this.game.player.pos.y+this.game.player.height/2;this.chargeTargetPos=new f(e,t),this.movementPattern="PREPARE_CHARGE",this.game.uiManager.soundManager.playLoop("sentinelChargeUp",{volume:.6})}break}}executeAttack(){const e=this.pos.x,t=this.pos.y,s=this.width,a=this.height;switch(this.attackPattern){case 0:this.game.uiManager.soundManager.play("enemyPlasmaShoot");const i=s*.7,n=e+s*.15;for(let r=0;r<7;r++)this.game.addEntity(new O(this.game,n+r*i/6,t+a,0,360,this.collisionDamage));break;case 1:this.game.uiManager.soundManager.play("enemyPlasmaShoot");for(let r=0;r<12;r++){const h=r*Math.PI/6;this.game.addEntity(new O(this.game,e+s/2,t+a/2,Math.cos(h)*240,Math.sin(h)*240,this.collisionDamage))}break;case 2:this.game.uiManager.soundManager.stopLoop("sentinelChargeUp",{fade:.05}),this.game.uiManager.soundManager.play("sentinelDash"),this.movementPattern="DASH_TO_PLAYER";break}this.isPreparingCharge=!1,this.isPreparingLineAttack=!1}draw(e){if(e.save(),this.isPreparingLineAttack){const s=(1-this.lineAttackPreparationTimer/1500)*.8;e.shadowColor=`rgba(255, 0, 0, ${s})`,e.shadowBlur=30}else if(this.isPreparingCharge){const s=1+Math.sin(Date.now()/100);e.shadowColor="rgba(255, 215, 0, 0.8)",e.shadowBlur=20+s*10}e.drawImage(this.image,this.pos.x,this.pos.y-this.visualOffsetY,this.width,150),e.restore()}}class Ee extends T{constructor(e,t,s){super(e,e.width/2-90,-240,180,100,t*.7,7500,"BOSS_VOID_SERPENT"),this.attackTimer=4e3,this.angle=0,this.verticalTargetY=80,this.waveSpeed=1.2,this.isPreparingToAttack=!1,this.attackPreparationTimer=0,this.attackPreparationDuration=1e3,this.visualOffsetY=140/2,this.isBoss=!0,this.image=At,this.collisionDamage=90,this.speed=40*s,this.waveAmplitude=this.game.width/2-this.width/2-20}update(e){if(this.isPreparingToAttack){this.attackPreparationTimer-=e,this.attackPreparationTimer<=0&&(this.isPreparingToAttack=!1,this.executeAttack());return}const t=e/1e3;if(this.pos.y<this.verticalTargetY?this.pos.y+=this.speed*t:(this.angle+=this.waveSpeed*t,this.pos.x=this.game.width/2-this.width/2+Math.sin(this.angle)*this.waveAmplitude,this.verticalTargetY=80+Math.cos(this.angle*.5)*40,this.pos.y+=(this.verticalTargetY-this.pos.y)*.1),this.attackTimer-=e,this.attackTimer<=0&&this.pos.y>=60){this.isPreparingToAttack=!0,this.attackPreparationTimer=this.attackPreparationDuration;const s=Math.max(2e3,3500-this.game.level*100);this.attackTimer=s*(1+Math.random()*.5)}}executeAttack(){const e=this.pos.x,t=this.pos.y,s=this.width,a=this.height;if((Math.random()>.5?"SPREAD":"WHIP")==="SPREAD"){this.game.uiManager.soundManager.play("enemyPlasmaShoot");const n=e+s/2,r=t+a/2,h=180,l=120,o=4,_=Math.PI/2.5,d=Math.PI/2-_/2,u=_/(o-1);for(let y=0;y<o;y++){const w=d+y*u,S=Math.cos(w)*h-Math.sin(w)*l,c=Math.sin(w)*h+Math.cos(w)*l;this.game.addEntity(new zt(this.game,n,r,S,c,this.collisionDamage))}}else if(this.game.player){const n=this.game.player;for(let r=0;r<3;r++)setTimeout(()=>{if(!this.isAlive())return;const h=n.pos.x+n.width/2,l=n.pos.y+n.height/2,o=this.pos.x+this.width/2,_=this.pos.y+this.height,d=Math.atan2(l-_,h-o);this.game.addEntity(new O(this.game,o,_,Math.cos(d)*600,Math.sin(d)*600,this.collisionDamage)),this.game.uiManager.soundManager.play("enemyShoot")},r*150)}}draw(e){e.save();const t=1+Math.sin(Date.now()/500)*.1;if(e.globalAlpha=.85,e.shadowColor="rgba(148, 0, 211, 0.7)",e.shadowBlur=25*t,this.isPreparingToAttack){const s=(1-this.attackPreparationTimer/this.attackPreparationDuration)*.9;e.shadowColor=`rgba(148, 0, 211, ${s})`,e.shadowBlur=20+s*15}e.drawImage(this.image,this.pos.x,this.pos.y-this.visualOffsetY,this.width,240),e.restore()}}class Se extends T{constructor(e,t,s){super(e,e.width/2-240/2,-184,240,110,t,2e4,"BOSS_OMEGA_NEXUS"),this.ringAngle1=0,this.plasmaFlicker=0,this.ringRotationSpeed=.4,this.phase=1,this.attackTimer=5e3,this.movementPattern="ENTERING",this.isInvulnerable=!1,this.isPreparingAttack=!1,this.preparationTimer=0,this.currentAttack="NONE",this.laserFanActive=!1,this.laserFanDuration=3500,this.laserFanAngle=0,this.laserFanSweepSpeed=.4,this.energyOrbs=[],this.isChargingCannon=!1,this.cannonChargeTimer=4e3,this.isFiringCannon=!1,this.cannonDurationTimer=3e3,this.visualOffsetY=74/2,this.isBoss=!0,this.baseImage=kt,this.collisionDamage=150,this.movementTarget=new f(e.width/2,80)}takeHit(e){if(this.isInvulnerable||(super.takeHit(e),!this.isAlive()))return;const t=this.health/this.maxHealth;this.phase===1&&t<=.7?this.startPhaseTransition(2):this.phase===2&&t<=.35&&this.startPhaseTransition(3)}startPhaseTransition(e){this.phase=e,this.isInvulnerable=!0,this.isPreparingAttack=!1,this.laserFanActive=!1,this.isChargingCannon=!1,this.isFiringCannon=!1,this.attackTimer=2e3,this.game.addEntity(new ee(this.game,this.pos.x+this.width/2,this.pos.y+this.visualOffsetY,"#FFFFFF")),this.game.uiManager.soundManager.play("nexusPhaseTransition"),this.ringRotationSpeed+=.3,e===3&&this.spawnEnergyOrbs(),setTimeout(()=>{this.isInvulnerable=!1},2500)}update(e){const t=e/1e3;if(this.ringAngle1+=this.ringRotationSpeed*1*t,this.plasmaFlicker=Math.random(),this.handleMovement(t),this.movementPattern!=="SWOOPING"&&(this.attackTimer-=e),this.isPreparingAttack){this.preparationTimer-=e,this.preparationTimer<=0&&(this.isPreparingAttack=!1,this.executeAttack());return}this.laserFanActive&&(this.updateLaserFan(t),this.laserFanDuration-=e,this.laserFanDuration<=0&&(this.laserFanActive=!1,this.movementPattern="SWOOPING",this.selectNewDriftTarget())),this.isChargingCannon&&(this.cannonChargeTimer-=e,this.cannonChargeTimer<=0&&(this.isChargingCannon=!1,this.isFiringCannon=!0,this.cannonDurationTimer=3e3,this.game.uiManager.soundManager.stopLoop("nexusCannonCharge"),this.game.uiManager.soundManager.playLoop("nexusCannonFire",{volume:.9}))),this.isFiringCannon&&(this.cannonDurationTimer-=e,this.cannonDurationTimer<=0&&(this.isFiringCannon=!1,this.movementPattern="SWOOPING",this.selectNewDriftTarget(),this.game.uiManager.soundManager.stopLoop("nexusCannonFire"))),this.phase===3&&this.updateEnergyOrbs(t),this.attackTimer<=0&&this.movementPattern==="DRIFTING"&&!this.isPreparingAttack&&!this.laserFanActive&&!this.isChargingCannon&&this.prepareNextAttack()}handleMovement(e){const t=this.movementPattern==="SWOOPING"?4:1.2;this.pos.x+=(this.movementTarget.x-(this.pos.x+this.width/2))*t*e,this.pos.y+=(this.movementTarget.y-this.pos.y)*t*e,this.pos.x=Math.max(0,Math.min(this.pos.x,this.game.width-this.width));const s=Math.hypot(this.movementTarget.x-(this.pos.x+this.width/2),this.movementTarget.y-this.pos.y);s<15&&this.movementPattern!=="DRIFTING"&&(this.movementPattern="DRIFTING",this.selectNewDriftTarget()),this.movementPattern==="DRIFTING"&&s<20&&this.selectNewDriftTarget()}selectNewDriftTarget(){const e=this.width/2,t=Math.random()*(this.game.width-e*2)+e;this.movementTarget=new f(t,60+Math.random()*40)}prepareNextAttack(){this.isPreparingAttack=!0,this.movementPattern="SWOOPING";const e=this.width/2;switch(this.phase){case 1:this.currentAttack="CROSSFIRE",this.preparationTimer=1200,this.attackTimer=4e3,this.movementTarget=new f(this.game.width/2,80);break;case 2:if(Math.random()>.4){this.currentAttack="LASER_FAN",this.preparationTimer=2e3,this.attackTimer=7e3;const s=this.pos.x>this.game.width/2?e:this.game.width-e;this.movementTarget=new f(s,80)}else this.currentAttack="CROSSFIRE",this.preparationTimer=1200,this.attackTimer=5e3,this.movementTarget=new f(this.game.width/2,80);break;case 3:const t=Math.random();if(t>.65)this.currentAttack="NEXUS_CANNON",this.preparationTimer=1500,this.attackTimer=12e3,this.movementTarget=new f(this.game.width/2,60);else if(t>.3){this.currentAttack="LASER_FAN",this.preparationTimer=1800,this.attackTimer=6e3;const s=this.pos.x>this.game.width/2?e:this.game.width-e;this.movementTarget=new f(s,80)}else this.currentAttack="CROSSFIRE",this.preparationTimer=1e3,this.attackTimer=4e3,this.movementPattern="DRIFTING";break}}executeAttack(){switch(this.currentAttack){case"CROSSFIRE":this.fireCrossfirePulse(),this.phase<3&&(this.movementPattern="DRIFTING");break;case"LASER_FAN":this.laserFanActive=!0,this.laserFanDuration=3500,this.laserFanAngle=0,this.laserFanSweepSpeed=(this.pos.x>this.game.width/2?-1:1)*.3;break;case"NEXUS_CANNON":this.isChargingCannon=!0,this.cannonChargeTimer=4e3,this.game.uiManager.soundManager.playLoop("nexusCannonCharge",{volume:.8});break}this.currentAttack="NONE"}fireCrossfirePulse(){this.game.uiManager.soundManager.play("enemyPlasmaShoot");const e=new f(this.pos.x+40,this.pos.y+this.height*.5+this.visualOffsetY),t=new f(this.pos.x+this.width-40,this.pos.y+this.height*.5+this.visualOffsetY),s=500,a=5,i=Math.PI/7;for(let n=0;n<a;n++){const r=Math.PI/4+n*i-i*(a-1)/2,h=3*Math.PI/4-n*i+i*(a-1)/2;setTimeout(()=>{this.isAlive()&&(this.game.addEntity(new O(this.game,e.x,e.y,Math.cos(r)*s,Math.sin(r)*s,35)),this.game.addEntity(new O(this.game,t.x,t.y,Math.cos(h)*s,Math.sin(h)*s,35)))},n*80)}}updateLaserFan(e){this.laserFanAngle+=this.laserFanSweepSpeed*e;const t=Math.PI/4;Math.abs(this.laserFanAngle)>t&&(this.laserFanSweepSpeed*=-1,this.laserFanAngle=Math.sign(this.laserFanAngle)*t)}spawnEnergyOrbs(){const e=this.pos.y+this.visualOffsetY;this.energyOrbs.push({pos:new f(this.pos.x,e),fireCooldown:1500,speed:120},{pos:new f(this.pos.x+this.width,e),fireCooldown:1500,speed:120})}updateEnergyOrbs(e){if(!this.game.player)return;const t=this.game.player;this.energyOrbs.forEach(s=>{const a=t.pos.y-100,i=Math.atan2(a-s.pos.y,t.pos.x-s.pos.x);if(s.pos.x+=Math.cos(i)*s.speed*e,s.pos.y+=Math.sin(i)*s.speed*e,s.fireCooldown-=e*1e3,s.fireCooldown<=0){this.game.uiManager.soundManager.play("enemyShoot");const n=Math.atan2(t.pos.y+t.height/2-s.pos.y,t.pos.x+t.width/2-s.pos.x);this.game.addEntity(new O(this.game,s.pos.x,s.pos.y,Math.cos(n)*400,Math.sin(n)*400,30)),s.fireCooldown=1500+Math.random()*800}})}drawNexusRings(e,t,s){let a;switch(this.phase){case 1:a="#00FFFF";break;case 2:a="#EE82EE";break;case 3:a="#FF4136";break}e.save(),e.globalCompositeOperation="lighter",e.save();const i=1+Math.sin(Date.now()/200)*.15,n=e.createRadialGradient(t,s,0,t,s,40*i);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.6,a),n.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=n,e.beginPath(),e.arc(t,s,40*i,0,Math.PI*2),e.fill(),e.restore(),e.save(),e.translate(t,s),e.rotate(this.ringAngle1),e.lineWidth=2+this.plasmaFlicker*3,e.strokeStyle=a,e.globalAlpha=.4+this.plasmaFlicker*.4;const r=30;for(let h=0;h<r;h++){const l=h/r*Math.PI*2,o=80,_=100+Math.sin(h*5+Date.now()/100)*20;e.beginPath(),e.moveTo(Math.cos(l)*o,Math.sin(l)*o),e.lineTo(Math.cos(l)*_,Math.sin(l)*_),e.stroke()}e.restore(),e.restore()}draw(e){const t=this.pos.x,s=this.pos.y-this.visualOffsetY,a=t+this.width/2,i=s+this.height/2+this.visualOffsetY;if(this.isInvulnerable){e.save();const n=1+Math.sin(Date.now()/100)*.05;e.globalAlpha=.8,e.shadowColor="#FFFFFF",e.shadowBlur=40,e.translate(a,i),e.scale(n,n),e.translate(-a,-i)}if(e.drawImage(this.baseImage,t,s,this.width,this.height+this.visualOffsetY*2),this.drawNexusRings(e,a,i),this.isInvulnerable&&e.restore(),this.isChargingCannon){const n=1-this.cannonChargeTimer/4e3,r=this.width*.4*n;Math.random()>.5&&this.game.addEntity(new _e(this.game,a+(Math.random()-.5)*800,i+(Math.random()-.5)*800,"#FF4136",.3,4)),e.save();const h=e.createRadialGradient(a,i,0,a,i,r);h.addColorStop(0,`rgba(255, 255, 255, ${n})`),h.addColorStop(.8,`rgba(255, 65, 54, ${n*.7})`),h.addColorStop(1,"rgba(255, 140, 0, 0)"),e.fillStyle=h,e.beginPath(),e.arc(a,i,r,0,Math.PI*2),e.fill(),e.restore()}if(this.isFiringCannon){const n=this.game.width*1.2,r=a-n/2;e.save(),e.fillStyle=`rgba(255, 255, 255, ${.7+Math.sin(Date.now()/50)*.2})`,e.fillRect(r,s,n,this.game.height);const h=e.createLinearGradient(a-150,0,a+150,0);h.addColorStop(0,"rgba(255, 65, 54, 0)"),h.addColorStop(.5,"rgba(255, 65, 54, 0.6)"),h.addColorStop(1,"rgba(255, 65, 54, 0)"),e.fillStyle=h,e.fillRect(a-150,s,300,this.game.height),e.restore()}if(this.laserFanActive){const n=this.pos.x>this.game.width/2?t+40:t+this.width-40,r=i,h=7,l=Math.PI/2;for(let o=0;o<h;o++){const _=this.laserFanAngle+(o-(h-1)/2)*(l/(h-1)),d=n+Math.sin(_)*this.game.height*1.5,u=r+Math.cos(_)*this.game.height*1.5;e.save(),e.beginPath(),e.moveTo(n,r),e.lineTo(d,u),e.strokeStyle="rgba(255, 0, 255, 0.6)",e.lineWidth=10,e.shadowColor="#EE82EE",e.shadowBlur=20,e.stroke(),e.strokeStyle="rgba(255, 255, 255, 0.8)",e.lineWidth=3,e.stroke(),e.restore()}}this.energyOrbs.forEach(n=>{e.save();const h=25+Math.sin(Date.now()/200)*5,l=e.createRadialGradient(n.pos.x,n.pos.y,0,n.pos.x,n.pos.y,h);l.addColorStop(0,"rgba(255, 255, 255, 1)"),l.addColorStop(.5,"rgba(255, 100, 100, 1)"),l.addColorStop(1,"rgba(255, 0, 0, 0)"),e.fillStyle=l,e.shadowColor="#FF4136",e.shadowBlur=30,e.beginPath(),e.arc(n.pos.x,n.pos.y,h,0,Math.PI*2),e.fill(),e.restore()})}}class jt extends N{constructor(e,t,s,a,i){super(e,t,s,a,i,40),this.width=6,this.height=30}draw(e){e.save();const t=e.createLinearGradient(this.pos.x,this.pos.y,this.pos.x,this.pos.y+this.height);t.addColorStop(0,"#FFFFFF"),t.addColorStop(.5,"#FF4136"),t.addColorStop(1,"#B10DC9"),e.fillStyle=t,e.shadowColor="#FF00FF",e.shadowBlur=15,e.beginPath(),e.moveTo(this.pos.x+this.width/2,this.pos.y),e.lineTo(this.pos.x,this.pos.y+this.height),e.lineTo(this.pos.x+this.width,this.pos.y+this.height),e.closePath(),e.fill(),e.restore()}}class K extends T{constructor(e,t,s){super(e,t,s,40,40,150,500,"NEXUS_FRAGMENT"),this.fireCooldown=2e3,this.pulse=0}update(e){const t=e/1e3;if(this.pulse+=t*4,this.fireCooldown-=e,this.fireCooldown<=0&&this.game.player){const s=this.game.player,a=Math.atan2(s.pos.y-(this.pos.y+this.height/2),s.pos.x-(this.pos.x+this.width/2));this.game.uiManager.soundManager.play("enemyPlasmaShoot");for(let i=0;i<3;i++)setTimeout(()=>{this.isAlive()&&this.game.addEntity(new O(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2,Math.cos(a)*450,Math.sin(a)*450,25))},i*120);this.fireCooldown=2800+Math.random()*1e3}}draw(e){e.save();const t=this.pos.x+this.width/2,s=this.pos.y+this.height/2,a=1+Math.sin(this.pulse)*.1,i=this.width/2*a,n=e.createRadialGradient(t,s,0,t,s,i);n.addColorStop(0,"rgba(255, 180, 180, 0.9)"),n.addColorStop(.6,"rgba(255, 0, 0, 0.7)"),n.addColorStop(1,"rgba(139, 0, 0, 0.1)"),e.fillStyle=n,e.shadowColor="#FF4136",e.shadowBlur=25,e.beginPath(),e.arc(t,s,i,0,Math.PI*2),e.fill(),e.restore(),this.drawHealthBar(e)}}class be extends T{constructor(e,t,s){super(e,e.width/2-100,-200,200,120,t*2,6e4,"BOSS_NEXUS_PRIME"),this.phase=1,this.attackTimer=4e3,this.isPreparingAttack=!1,this.preparationTimer=0,this.currentAttack="NONE",this.phaseTransitionTimer=0,this.movementPattern="ENTERING",this.corePulse=0,this.scythes=[],this.plasmaSweepProgress=-1,this.eventHorizonCharge=0,this.isBoss=!0,this.collisionDamage=300,this.movementTarget=new f(this.game.width/2,120)}takeHit(e){if(this.phaseTransitionTimer>0||(super.takeHit(e),!this.isAlive()))return;const t=this.health/this.maxHealth;this.phase===1&&t<=.66?this.transitionToPhase(2):this.phase===2&&t<=.33&&this.transitionToPhase(3)}transitionToPhase(e){if(this.phase=e,this.phaseTransitionTimer=3e3,this.isPreparingAttack=!1,this.currentAttack="NONE",this.attackTimer=4e3,this.scythes=[],this.game.entities.filter(t=>t instanceof K).forEach(t=>t.destroy()),this.game.addEntity(new ee(this.game,this.pos.x+this.width/2,this.pos.y+this.height/2,"#FF4136")),this.game.uiManager.soundManager.play("nexusPhaseTransition"),e===2)for(let t=0;t<6;t++)this.scythes.push({angle:t/6*Math.PI*2,radius:150,speed:(Math.random()-.5)*2})}handleMovement(e){const t=this.movementPattern==="REPOSITIONING"?3.5:.8;this.pos.x+=(this.movementTarget.x-(this.pos.x+this.width/2))*t*e,this.pos.y+=(this.movementTarget.y-(this.pos.y+this.height/2))*t*e,Math.hypot(this.movementTarget.x-(this.pos.x+this.width/2),this.movementTarget.y-(this.pos.y+this.height/2))<15&&(this.movementPattern==="ENTERING"||this.movementPattern==="REPOSITIONING"?(this.movementPattern="DRIFTING",this.selectNewDriftTarget()):this.movementPattern==="DRIFTING"&&this.selectNewDriftTarget())}selectNewDriftTarget(){const e=this.width/2+50,t=50,s=Math.random()*(this.game.width-e*2)+e,a=Math.random()*(this.game.height/3.5-t)+t;this.movementTarget=new f(s,a)}update(e){const t=e/1e3;if(this.corePulse+=t*5,this.handleMovement(t),this.phaseTransitionTimer>0){this.phaseTransitionTimer-=e;return}this.isPreparingAttack?(this.preparationTimer-=e,this.preparationTimer<=0&&(this.isPreparingAttack=!1,this.executeAttack())):this.attackTimer>0?this.attackTimer-=e:this.plasmaSweepProgress<0&&this.eventHorizonCharge<=0&&this.prepareNextAttack(),this.updateActiveMechanics(e,t)}prepareNextAttack(){switch(this.isPreparingAttack=!0,this.movementPattern="REPOSITIONING",this.phase){case 1:this.currentAttack=Math.random()>.5?"LANCE":"ORB",this.movementTarget=new f(this.game.width/2,100),this.preparationTimer=2e3,this.attackTimer=6e3;break;case 2:const e=["SCYTHE","SWEEP","PLASMA_BURST"];if(this.currentAttack=e[Math.floor(Math.random()*e.length)],this.currentAttack==="SWEEP"){const t=this.game.player&&this.game.player.pos.x<this.game.width/2?this.game.width-150:150;this.movementTarget=new f(t,this.game.height/3)}else this.movementTarget=new f(this.game.width/2,120);this.preparationTimer=2500,this.attackTimer=7e3;break;case 3:this.currentAttack="HORIZON",this.movementTarget=new f(this.game.width/2,this.game.height/2-50),this.preparationTimer=8e3,this.attackTimer=15e3;break}}executeAttack(){const e=this.pos.x+this.width/2,t=this.pos.y+this.height/2;switch(this.currentAttack){case"LANCE":this.game.uiManager.soundManager.play("primeLanceAttack");for(let s=0;s<8;s++){const a=s/8*Math.PI*2;this.game.addEntity(new jt(this.game,e,t,Math.cos(a)*700,Math.sin(a)*700))}break;case"ORB":this.game.entities.filter(s=>s instanceof K).length<2&&this.game.addEntity(new K(this.game,e,t));break;case"PLASMA_BURST":if(this.game.player){const s=this.game.player;for(let a=0;a<5;a++)setTimeout(()=>{if(!this.isAlive())return;const i=s.pos.x+s.width/2,n=s.pos.y+s.height/2,r=Math.atan2(n-(this.pos.y+this.height/2),i-(this.pos.x+this.width/2));this.game.addEntity(new O(this.game,e,t,Math.cos(r)*600,Math.sin(r)*600,30)),this.game.uiManager.soundManager.play("enemyShoot")},a*150)}break;case"SCYTHE":this.scythes.forEach(s=>s.speed=(Math.random()>.5?1:-1)*2.5),setTimeout(()=>this.scythes.forEach(s=>s.speed=(Math.random()-.5)*2),2e3);break;case"SWEEP":this.plasmaSweepProgress=0,this.game.uiManager.soundManager.play("primeSweepAttack");break;case"HORIZON":this.eventHorizonCharge=1;break}}updateActiveMechanics(e,t){if(this.scythes.forEach(s=>s.angle+=s.speed*t),this.plasmaSweepProgress>=0&&(this.plasmaSweepProgress+=t/5,this.plasmaSweepProgress>=1&&(this.plasmaSweepProgress=-1)),this.eventHorizonCharge>0&&(this.eventHorizonCharge=Math.max(0,this.eventHorizonCharge-t/6),this.game.player)){const s=this.game.player,a=this.pos.x+this.width/2,i=this.pos.y+this.height/2,r=(1-(1-(this.preparationTimer>0?this.preparationTimer/8e3:0)))*this.game.width;if(Math.hypot(a-(s.pos.x+s.width/2),i-(s.pos.y+s.height/2))>r){const l=Math.atan2(i-s.pos.y,a-s.pos.x);s.pos.x+=Math.cos(l)*350*t,s.pos.y+=Math.sin(l)*350*t}}}draw(e){const t=this.pos.x+this.width/2,s=this.pos.y+this.height/2;if(e.save(),this.phaseTransitionTimer>0){const a=1-this.phaseTransitionTimer/3e3;this.drawTransition(e,t,s,a)}else this.drawCoreWithWhips(e,t,s);this.drawAttackVisuals(e,t,s),e.restore()}drawCoreWithWhips(e,t,s){e.save(),e.globalCompositeOperation="lighter";const a=this.phase===1?"#00FFFF":this.phase===2?"#FF851B":"#FF4136";e.save();const i=1+Math.sin(this.corePulse)*.05;e.globalAlpha=.7,e.translate(t,s),e.scale(i,i);const n=180+this.phase*20;e.drawImage(Ct,-n/2,-n/2,n,n),e.restore();const r=8;for(let o=0;o<r;o++){e.beginPath();const _=o/r*Math.PI*2,d=120+this.phase*20+Math.sin(this.corePulse*1.5+o)*40,u=Math.sin(this.corePulse*3+o)*.6;e.moveTo(t,s),e.quadraticCurveTo(t+Math.cos(_+u)*d*.6,s+Math.sin(_+u)*d*.6,t+Math.cos(_)*d,s+Math.sin(_)*d),e.strokeStyle=a,e.lineWidth=3+Math.sin(this.corePulse+o*2)*2,e.globalAlpha=.6+Math.sin(this.corePulse*4+o)*.2,e.shadowColor=a,e.shadowBlur=15,e.stroke()}const h=(this.phase===3?60:40)+Math.sin(this.corePulse)*10,l=e.createRadialGradient(t,s,0,t,s,h);l.addColorStop(0,"rgba(255, 255, 255, 1)"),l.addColorStop(.7,a),l.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=l,e.shadowColor=a,e.shadowBlur=30,e.beginPath(),e.arc(t,s,h,0,Math.PI*2),e.fill(),e.restore()}drawAttackVisuals(e,t,s){if(this.scythes.forEach(a=>{e.save();const i=t+Math.cos(a.angle)*a.radius,n=s+Math.sin(a.angle)*a.radius;e.translate(i,n),e.rotate(a.angle+Math.PI/2),e.fillStyle="#FF4136",e.shadowColor="#FF4136",e.shadowBlur=25,e.beginPath(),e.moveTo(0,-30),e.lineTo(-20,30),e.lineTo(20,30),e.closePath(),e.fill(),e.restore()}),this.plasmaSweepProgress>=0){const a=this.pos.x<this.game.width/2?1:-1,i=this.game.width/2-a*this.game.width/2+a*this.game.width*this.plasmaSweepProgress,n=e.createLinearGradient(i-60,0,i+60,0);n.addColorStop(0,"rgba(255, 133, 27, 0)"),n.addColorStop(.5,`rgba(255, 133, 27, ${.9*Math.sin(this.plasmaSweepProgress*Math.PI)})`),n.addColorStop(1,"rgba(255, 133, 27, 0)"),e.fillStyle=n,e.fillRect(i-60,0,120,this.game.height)}if(this.isPreparingAttack&&this.currentAttack==="HORIZON"){const a=1-this.preparationTimer/8e3;e.fillStyle=`rgba(0, 0, 0, ${a*.9})`,e.fillRect(0,0,this.game.width,this.game.height);const i=(1-a)*this.game.width;e.save(),e.globalCompositeOperation="lighter",e.strokeStyle=`rgba(255, 255, 255, ${1-a})`,e.lineWidth=5,e.shadowColor="#FFF",e.shadowBlur=20,e.beginPath(),e.arc(t,s,i,0,Math.PI*2),e.stroke(),e.restore()}else this.eventHorizonCharge>0&&(e.fillStyle=`rgba(255, 65, 54, ${this.eventHorizonCharge*.5})`,e.fillRect(0,0,this.game.width,this.game.height))}drawTransition(e,t,s,a){const i=Math.sin(a*Math.PI);e.fillStyle=`rgba(255, 255, 255, ${i*.9})`,e.fillRect(0,0,this.game.width,this.game.height);const n=a*this.game.width;e.strokeStyle=`rgba(255, 133, 27, ${i*.8})`,e.lineWidth=15,e.beginPath(),e.arc(t,s,n,0,Math.PI*2),e.stroke()}}class $t{constructor(e){this.loadUpgrades=()=>JSON.parse(localStorage.getItem("galaxyFallUpgrades")||"{}"),this.saveUpgrades=()=>localStorage.setItem("galaxyFallUpgrades",JSON.stringify(this.playerUpgrades)),this.loadCosmetics=()=>JSON.parse(localStorage.getItem("galaxyFallCosmetics")||JSON.stringify({unlocked_skins:["skin_default"],unlocked_projectiles:["default"],unlocked_trails:["default"],equipped_skin:"skin_default",equipped_projectile:"default",equipped_trail:"default"})),this.saveCosmetics=()=>localStorage.setItem("galaxyFallCosmetics",JSON.stringify(this.playerCosmetics)),this.getUpgradeLevel=t=>this.playerUpgrades[t]||0,this.game=e,this.playerUpgrades=this.loadUpgrades(),this.playerCosmetics=this.loadCosmetics(),this.shopItems=[{id:"start_lives",type:"PERMANENT",nameKey:"shop_start_lives_name",descKey:"shop_start_lives_desc",iconSrc:x,maxLevel:5,cost:[150,450,1e3,2500,5e3]},{id:"start_energy",type:"PERMANENT",nameKey:"shop_start_energy_name",descKey:"shop_start_energy_desc",iconSrc:J,maxLevel:10,cost:[100,200,400,800,1600,3200,5e3,7500,1e4,15e3]},{id:"coin_value",type:"PERMANENT",nameKey:"shop_coin_value_name",descKey:"shop_coin_value_desc",iconSrc:C,maxLevel:10,cost:[250,500,1250,3e3,7500,15e3,25e3,4e4,6e4,9e4]},{id:"powerup_duration",type:"PERMANENT",nameKey:"shop_powerup_duration_name",descKey:"shop_powerup_duration_desc",iconSrc:H,maxLevel:10,cost:[500,1e3,2e3,4e3,8e3,12e3,18e3,25e3,35e3,5e4]},{id:"luck_chance",type:"PERMANENT",nameKey:"shop_luck_chance_name",descKey:"shop_luck_chance_desc",iconSrc:G,maxLevel:5,cost:[1e3,2500,5e3,1e4,2e4]},{id:"special_charge",type:"PERMANENT",nameKey:"shop_special_charge_name",descKey:"shop_special_charge_desc",iconSrc:U,maxLevel:1,cost:[25e3]},{id:"coin_magnet",type:"PERMANENT",nameKey:"shop_coin_magnet_name",descKey:"shop_coin_magnet_desc",iconSrc:He,maxLevel:5,cost:[5e3,1e4,2e4,35e3,5e4]},{id:"revive_chance",type:"PERMANENT",nameKey:"shop_revive_chance_name",descKey:"shop_revive_chance_desc",iconSrc:Ke,maxLevel:3,cost:[15e3,3e4,75e3]},{id:"special_stack_size",type:"PERMANENT",nameKey:"shop_special_stack_name",descKey:"shop_special_stack_desc",iconSrc:We,maxLevel:2,cost:[2e4,5e4]},{id:"ultimate_drone_mastery",type:"ULTIMATE",nameKey:"shop_ultimate_drone_mastery_name",descKey:"shop_ultimate_drone_mastery_desc",iconSrc:le,maxLevel:1,cost:[75e3]},{id:"ultimate_weapon_prestige",type:"ULTIMATE",nameKey:"shop_ultimate_weapon_prestige_name",descKey:"shop_ultimate_weapon_prestige_desc",iconSrc:Ve,maxLevel:1,cost:[125e3]},{id:"consume_shield",type:"CONSUMABLE",nameKey:"shop_consume_shield_name",descKey:"shop_consume_shield_desc",iconSrc:X,cost:[400],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.activate("SHIELD")}},{id:"consume_nuke",type:"CONSUMABLE",nameKey:"shop_consume_nuke_name",descKey:"shop_consume_nuke_desc",iconSrc:U,cost:[1e3],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.collectSpecial("NUKE")}},{id:"consume_extralife",type:"CONSUMABLE",nameKey:"shop_consume_extralife_name",descKey:"shop_consume_extralife_desc",iconSrc:x,cost:[2500],applyEffect:t=>{t.player&&t.player.lives<t.player.maxLives&&t.player.lives++}},{id:"consume_ghost",type:"CONSUMABLE",nameKey:"shop_consume_ghost_name",descKey:"shop_consume_ghost_desc",iconSrc:Z,cost:[1500],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.activate("GHOST_PROTOCOL",3e4)}},{id:"consume_boss_slayer",type:"CONSUMABLE",nameKey:"shop_consume_boss_slayer_name",descKey:"shop_consume_boss_slayer_desc",iconSrc:ze,cost:[5e3],applyEffect:t=>{}},{id:"consume_black_hole",type:"CONSUMABLE",nameKey:"shop_consume_black_hole_name",descKey:"shop_consume_black_hole_desc",iconSrc:D,cost:[1200],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.collectSpecial("BLACK_HOLE")}},{id:"consume_score_boost",type:"CONSUMABLE",nameKey:"shop_consume_score_boost_name",descKey:"shop_consume_score_boost_desc",iconSrc:H,cost:[800],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.collectSpecial("SCORE_BOOST")}},{id:"consume_laser_beam",type:"CONSUMABLE",nameKey:"shop_consume_laser_beam_name",descKey:"shop_consume_laser_beam_desc",iconSrc:$,cost:[1750],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.collectUltra("LASER_BEAM")}},{id:"consume_homing_missiles",type:"CONSUMABLE",nameKey:"shop_consume_homing_missiles_name",descKey:"shop_consume_homing_missiles_desc",iconSrc:Y,cost:[1750],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.collectUltra("HOMING_MISSILES")}},{id:"consume_rapid_fire",type:"CONSUMABLE",nameKey:"shop_consume_rapid_fire_name",descKey:"shop_consume_rapid_fire_desc",iconSrc:F,cost:[1e3],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.activate("RAPID_FIRE")}},{id:"consume_side_shots",type:"CONSUMABLE",nameKey:"shop_consume_side_shots_name",descKey:"shop_consume_side_shots_desc",iconSrc:G,cost:[1e3],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.activate("SIDE_SHOTS")}},{id:"consume_orbital_drone",type:"CONSUMABLE",nameKey:"shop_consume_orbital_drone_name",descKey:"shop_consume_orbital_drone_desc",iconSrc:Q,cost:[2e3],applyEffect:t=>{var s;(s=t.player)==null||s.powerUpManager.activate("ORBITAL_DRONE")}},{id:"skin_sentinel",type:"COSMETIC",nameKey:"shop_skin_sentinel_name",descKey:"shop_skin_sentinel_desc",iconSrc:W,cost:[1e4],cosmeticType:"player_skin"},{id:"skin_renegade",type:"COSMETIC",nameKey:"shop_skin_renegade_name",descKey:"shop_skin_renegade_desc",iconSrc:z,cost:[15e3],cosmeticType:"player_skin"},{id:"skin_avenger",type:"COSMETIC",nameKey:"shop_skin_avenger_name",descKey:"shop_skin_avenger_desc",iconSrc:V,cost:[2e4],cosmeticType:"player_skin"},{id:"skin_void",type:"COSMETIC",nameKey:"shop_skin_void_name",descKey:"shop_skin_void_desc",iconSrc:q,cost:[25e3],cosmeticType:"player_skin"},{id:"skin_gold",type:"COSMETIC",nameKey:"shop_skin_gold_name",descKey:"shop_skin_gold_desc",iconSrc:j,cost:[8e4],cosmeticType:"player_skin"},{id:"proj_green",type:"COSMETIC",nameKey:"shop_proj_green_name",descKey:"shop_proj_green_desc",iconSrc:L.WEAPON_UP,cost:[5e3],cosmeticType:"projectile_style"},{id:"proj_fireball",type:"COSMETIC",nameKey:"shop_proj_fireball_name",descKey:"shop_proj_fireball_desc",iconSrc:F,cost:[7500],cosmeticType:"projectile_style"},{id:"proj_purple",type:"COSMETIC",nameKey:"shop_proj_purple_name",descKey:"shop_proj_purple_desc",iconSrc:D,cost:[7500],cosmeticType:"projectile_style"},{id:"trail_rainbow",type:"COSMETIC",nameKey:"shop_trail_rainbow_name",descKey:"shop_trail_rainbow_desc",iconSrc:qe,cost:[12e3],cosmeticType:"engine_trail"},{id:"pi_bundle_1",type:"PI_BUNDLE",nameKey:"shop_pi_bundle_1_name",descKey:"shop_pi_bundle_1_desc",iconSrc:C,pi_cost:.1,coin_reward:1e3},{id:"pi_bundle_2",type:"PI_BUNDLE",nameKey:"shop_pi_bundle_2_name",descKey:"shop_pi_bundle_2_desc",iconSrc:C,pi_cost:.5,coin_reward:5500},{id:"pi_bundle_3",type:"PI_BUNDLE",nameKey:"shop_pi_bundle_3_name",descKey:"shop_pi_bundle_3_desc",iconSrc:C,pi_cost:1,coin_reward:12e3},{id:"pi_bundle_4",type:"PI_BUNDLE",nameKey:"shop_pi_bundle_4_name",descKey:"shop_pi_bundle_4_desc",iconSrc:C,pi_cost:5,coin_reward:65e3},{id:"pi_bundle_5",type:"PI_BUNDLE",nameKey:"shop_pi_bundle_5_name",descKey:"shop_pi_bundle_5_desc",iconSrc:C,pi_cost:10,coin_reward:15e4}]}getCost(e){if(!e.cost)return null;if(e.type==="PERMANENT"||e.type==="ULTIMATE"){if(!e.maxLevel)return null;const t=this.getUpgradeLevel(e.id);return t>=e.maxLevel?null:e.cost[t]}return e.type==="CONSUMABLE"||e.type==="COSMETIC"?e.cost[0]:null}purchaseItem(e){const t=this.shopItems.find(a=>a.id===e);if(!t)return!1;if(t.type==="PI_BUNDLE")return this.game.piManager.createPayment(t),!0;const s=this.getCost(t);return s===null||this.game.coins<s?(this.game.uiManager.soundManager.play("uiError"),!1):(this.game.coins-=s,t.type==="PERMANENT"||t.type==="ULTIMATE"?(this.playerUpgrades[t.id]=(this.playerUpgrades[t.id]||0)+1,this.saveUpgrades()):t.type==="CONSUMABLE"&&t.applyEffect?t.applyEffect(this.game):t.type==="COSMETIC"&&t.cosmeticType&&(t.cosmeticType==="player_skin"?this.playerCosmetics.unlocked_skins.push(t.id):t.cosmeticType==="projectile_style"?this.playerCosmetics.unlocked_projectiles.push(t.id):t.cosmeticType==="engine_trail"&&this.playerCosmetics.unlocked_trails.push(t.id),this.saveCosmetics(),this.equipCosmetic(t.id,t.cosmeticType)),this.game.saveGameData(),this.game.uiManager.soundManager.play("purchaseSuccess"),!0)}equipCosmetic(e,t){t==="player_skin"?this.playerCosmetics.equipped_skin=e:t==="projectile_style"?this.playerCosmetics.equipped_projectile=e:t==="engine_trail"&&(this.playerCosmetics.equipped_trail=e),this.saveCosmetics()}isCosmeticUnlocked(e,t){return t==="player_skin"?this.playerCosmetics.unlocked_skins.includes(e):t==="projectile_style"?this.playerCosmetics.unlocked_projectiles.includes(e):t==="engine_trail"?this.playerCosmetics.unlocked_trails.includes(e):!1}getInitialPlayerStats(){const a=this.getUpgradeLevel("start_lives"),n=100+this.getUpgradeLevel("start_energy")*10;return{lives:3+a,energy:n,maxEnergy:n,speed:560}}}class Yt{constructor(e){this.audioCtx=null,this.masterGain=null,this.musicPlaying=!1,this.musicScheduler=null,this.currentStep=0,this.bpm=160,this.stepsPerBeat=4,this.totalSteps=64,this.scheduleAheadTime=.1,this.nextNoteTime=0,this.currentTrack="menu",this.leadMelody=[],this.bassLine=[],this.arpeggioMelody=[],this.kickPattern=[],this.snarePattern=[],this.hihatPattern=[],this.bossLeadMelody=[],this.bossBassLine=[],this.bossArpeggioMelody=[],this.bossKickPattern=[],this.bossSnarePattern=[],this.bossHihatPattern=[],this.shootTier1Buffer=null,this.shootTier2Buffer=null,this.shootTier3Buffer=null,this.shootTier4Buffer=null,this.blackHoleBuffer=null,this.laserBuffer=null,this.droneTier1Buffer=null,this.droneTier2Buffer=null,this.droneTier3Buffer=null,this.coinCollectBuffer=null,this.powerupCollectBuffer=null,this.enemyExplosionBuffer=null,this.nukeBuffer=null,this.missileLaunchBuffer=null,this.menuMusicBuffer=null,this.menuMusicSource=null,this.continuousSounds={},this.isResetting=!1,this.uiManager=e,this.stepDuration=60/this.bpm/this.stepsPerBeat,this.defineMusicPatterns(),this.defineBossMusicPatterns()}async loadAudioFile(e){if(!this.audioCtx)return null;try{const s=await(await fetch(e)).arrayBuffer();return await this.audioCtx.decodeAudioData(s)}catch(t){return console.error(`Fehler beim Laden der Audiodatei: ${e}`,t),null}}async loadSounds(){this.shootTier1Buffer=await this.loadAudioFile(Qe),this.shootTier2Buffer=await this.loadAudioFile(et),this.shootTier3Buffer=await this.loadAudioFile(tt),this.shootTier4Buffer=await this.loadAudioFile(st),this.blackHoleBuffer=await this.loadAudioFile(at),this.laserBuffer=await this.loadAudioFile(it),this.droneTier1Buffer=await this.loadAudioFile(nt),this.droneTier2Buffer=await this.loadAudioFile(ot),this.droneTier3Buffer=await this.loadAudioFile(rt),this.coinCollectBuffer=await this.loadAudioFile(lt),this.powerupCollectBuffer=await this.loadAudioFile(ht),this.enemyExplosionBuffer=await this.loadAudioFile(ct),this.nukeBuffer=await this.loadAudioFile(_t),this.missileLaunchBuffer=await this.loadAudioFile(pt),this.menuMusicBuffer=await this.loadAudioFile(mt)}async initAudio(){if(!this.isResetting)try{if(!this.audioCtx){console.log("AudioContext wird zum ersten Mal erstellt."),await this.resetAudioSystem();return}if(this.audioCtx.state==="closed"){console.error("AudioContext war geschlossen. Erzwinge kompletten Neustart des Soundsystems."),await this.resetAudioSystem();return}this.audioCtx.state==="suspended"&&(console.log("AudioContext ist unterbrochen, versuche Reaktivierung..."),await this.audioCtx.resume(),console.log("AudioContext erfolgreich reaktiviert."),this.setVolume(this.uiManager.settings.masterVolume),this.toggleMusic(this.uiManager.settings.music))}catch(e){console.error("Fehler bei der Initialisierung/Reaktivierung des AudioContext. Führe Fallback-Reset durch:",e),await this.resetAudioSystem()}}async resetAudioSystem(){this.isResetting=!0,console.warn("--- FÜHRE EINEN VOLLSTÄNDIGEN SOUNDSYSTEM-RESET DURCH ---"),this.stopProceduralMusic(),this.stopMenuMusic(),Object.keys(this.continuousSounds).forEach(e=>this.stopLoop(e)),this.continuousSounds={},this.audioCtx&&this.audioCtx.state!=="closed"&&await this.audioCtx.close().catch(e=>console.error("Fehler beim Schließen des alten AudioContext:",e)),this.audioCtx=null,this.masterGain=null,this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioCtx.createGain(),this.masterGain.connect(this.audioCtx.destination),console.log("Neuer AudioContext erstellt."),console.log("Lade alle Sounds neu..."),await this.loadSounds(),console.log("Alle Sounds wurden neu geladen."),this.setVolume(this.uiManager.settings.masterVolume),this.isResetting=!1,console.warn("--- SOUNDSYSTEM-RESET ABGESCHLOSSEN ---")}restoreAudioState(){console.log("Stelle Audio-Zustand wieder her...");const e=this.uiManager.game;e.isBossActive?(this.setTrack("boss"),console.log("-> Boss-Musik wiederhergestellt.")):e.gameState==="PLAYING"||e.gameState==="PAUSED"||e.gameState==="REVIVING"?(this.setTrack("normal"),console.log("-> Normale Spiel-Musik wiederhergestellt.")):(this.setTrack("menu"),console.log("-> Menü-Musik wiederhergestellt."))}defineMusicPatterns(){const e={C2:65.41,G2:98,Ab2:103.83,Eb2:77.78,Eb3:155.56,G3:196,Ab3:207.65,Bb3:233.08,C4:261.63,D4:293.66,Eb4:311.13,F4:349.23,G4:392,Ab4:415.3},t=0;this.leadMelody=[e.G4,t,e.Eb4,t,e.G4,t,e.F4,t,e.Eb4,t,e.D4,t,e.C4,t,t,t,e.G4,t,e.Eb4,t,e.G4,t,e.F4,t,e.G4,e.Ab4,e.G4,e.F4,e.Eb4,t,t,t,e.Ab4,t,e.F4,t,e.Ab4,t,e.G4,t,e.F4,t,e.Eb4,t,e.C4,t,e.Eb4,t,e.G4,e.F4,e.Eb4,t,e.D4,t,e.C4,t,e.C4,t,t,t,t,t,t,t],this.bassLine=[...Array(16).fill(e.C2),...Array(16).fill(e.G2),...Array(16).fill(e.Ab2),...Array(16).fill(e.Eb2)];const s=[e.C4,e.Eb4,e.G4,e.Eb4],a=[e.G3,e.Bb3,e.D4,e.Bb3],i=[e.Ab3,e.C4,e.Eb4,e.C4],n=[e.Eb3,e.G3,e.Bb3,e.G3];this.arpeggioMelody=[...s,...s,...s,...s,...a,...a,...a,...a,...i,...i,...i,...i,...n,...n,...n,...n];const r=!0,h=!0,l=!0,o=!1;this.kickPattern=[r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,o,o,r,o,r,o,r,o,o,o],this.snarePattern=[o,o,o,o,h,o,o,o,o,o,o,o,h,o,o,o,o,o,o,o,h,o,o,o,o,o,o,o,h,o,o,o,o,o,o,o,h,o,o,o,o,o,o,o,h,o,o,o,o,o,o,o,h,o,o,o,o,o,h,o,h,o,h,o],this.hihatPattern=[l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,o,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,o,l,o,l,o,l,o,l,l,l,o,l,l,l,o]}defineBossMusicPatterns(){const e={A2:110,E2:82.41,F2:87.31,G2:98,A3:220,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,Gs4:415.3,A4:440},t=0;this.bossLeadMelody=[e.A4,e.A4,t,e.Gs4,t,e.A4,t,e.E4,e.F4,e.F4,t,e.E4,t,e.D4,t,e.C4,e.A4,e.A4,t,e.Gs4,t,e.A4,t,e.E4,e.F4,t,e.E4,t,e.D4,t,e.C4,t,e.A4,e.A4,t,e.Gs4,t,e.A4,t,e.E4,e.F4,e.F4,t,e.E4,t,e.D4,t,e.C4,e.B3,e.C4,e.D4,e.E4,e.F4,e.E4,e.D4,e.C4,e.B3,t,t,t,t,t,t,t],this.bossBassLine=[...Array(16).fill(e.A2),...Array(16).fill(e.G2),...Array(16).fill(e.F2),...Array(16).fill(e.E2)];const s=[e.A3,e.C4,e.E4,e.C4],a=[e.G2,e.B3,e.D4,e.B3],i=[e.F2,e.A3,e.C4,e.A3],n=[e.E2,e.Gs4,e.B3,e.Gs4];this.bossArpeggioMelody=[...s,...s,...s,...s,...a,...a,...a,...a,...i,...i,...i,...i,...n,...n,...n,...n];const r=!0,h=!0,l=!0,o=!1,_=(d,u)=>Array(u).fill(d).flat();this.bossKickPattern=_([r,r,o,o,r,o,o,o,r,r,o,o,r,o,o,r],4),this.bossSnarePattern=_([o,o,o,o,h,o,o,o,o,o,o,o,h,o,h,o],4),this.bossHihatPattern=_([l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],4)}setTrack(e){!this.audioCtx||this.currentTrack===e||(this.currentTrack=e,this.stopProceduralMusic(),this.stopMenuMusic(),this.uiManager.settings.music&&(e==="menu"?this.playMenuMusic():this.startProceduralMusic()))}playMenuMusic(){if(!this.audioCtx||!this.masterGain||!this.menuMusicBuffer||this.menuMusicSource)return;const e=this.audioCtx.createGain();e.gain.value=.2,this.menuMusicSource=this.audioCtx.createBufferSource(),this.menuMusicSource.buffer=this.menuMusicBuffer,this.menuMusicSource.loop=!0,this.menuMusicSource.connect(e),e.connect(this.masterGain),this.menuMusicSource.start()}stopMenuMusic(){if(this.menuMusicSource){try{this.menuMusicSource.stop(),this.menuMusicSource.disconnect()}catch{}this.menuMusicSource=null}}startProceduralMusic(){!this.audioCtx||this.musicScheduler!==null||(this.currentStep=0,this.nextNoteTime=this.audioCtx.currentTime,this.musicScheduler=window.setInterval(()=>this.scheduler(),25))}stopProceduralMusic(){this.musicScheduler!==null&&(clearInterval(this.musicScheduler),this.musicScheduler=null)}playNote(e,t,s,a,i=1){if(!this.audioCtx||!this.masterGain||e===0)return;const n=this.audioCtx.createOscillator(),r=this.audioCtx.createGain();n.connect(r),r.connect(this.masterGain),n.type=a,n.frequency.setValueAtTime(e,t);const h=i*this.uiManager.settings.masterVolume;r.gain.setValueAtTime(h,t),r.gain.exponentialRampToValueAtTime(1e-4,t+s),n.start(t),n.stop(t+s)}playDrum(e,t){if(!this.audioCtx||!this.masterGain)return;const s=this.audioCtx.createBufferSource(),a=this.audioCtx.sampleRate*.2,i=this.audioCtx.createBuffer(1,a,this.audioCtx.sampleRate),n=i.getChannelData(0);for(let d=0;d<a;d++)n[d]=Math.random()*2-1;s.buffer=i;const r=this.audioCtx.createBiquadFilter(),h=this.audioCtx.createGain();s.connect(r),r.connect(h),h.connect(this.masterGain);const l=this.uiManager.settings.masterVolume;let o=.1,_=l;switch(e){case"kick":r.type="lowpass",r.frequency.setValueAtTime(120,t),_*=1,o=.15;break;case"snare":r.type="highpass",r.frequency.setValueAtTime(1500,t),_*=.8,o=.1;break;case"hihat":r.type="highpass",r.frequency.setValueAtTime(8e3,t),_*=.4,o=.05;break}h.gain.setValueAtTime(_,t),h.gain.exponentialRampToValueAtTime(.001,t+o),s.start(t),s.stop(t+o)}scheduler(){if(!(!this.audioCtx||!this.musicPlaying||this.currentTrack==="menu"))for(;this.nextNoteTime<this.audioCtx.currentTime+this.scheduleAheadTime;){let e,t,s,a,i,n;this.currentTrack==="boss"?[e,t,s,a,i,n]=[this.bossLeadMelody,this.bossArpeggioMelody,this.bossBassLine,this.bossKickPattern,this.bossSnarePattern,this.bossHihatPattern]:[e,t,s,a,i,n]=[this.leadMelody,this.arpeggioMelody,this.bassLine,this.kickPattern,this.snarePattern,this.hihatPattern],this.playNote(e[this.currentStep],this.nextNoteTime,this.stepDuration*.9,"square",.15),this.playNote(t[this.currentStep],this.nextNoteTime,this.stepDuration,"square",.07),this.currentStep%2===0&&this.playNote(s[this.currentStep],this.nextNoteTime,this.stepDuration*1.8,"triangle",.3),a[this.currentStep]&&this.playDrum("kick",this.nextNoteTime),i[this.currentStep]&&this.playDrum("snare",this.nextNoteTime),n[this.currentStep]&&this.playDrum("hihat",this.nextNoteTime),this.nextNoteTime+=this.stepDuration,this.currentStep=(this.currentStep+1)%this.totalSteps}}toggleMusic(e){this.musicPlaying=e,e?this.uiManager.game.restoreAllGameAudio():(this.stopProceduralMusic(),this.stopMenuMusic())}setVolume(e){this.masterGain&&this.audioCtx&&this.masterGain.gain.setValueAtTime(e,this.audioCtx.currentTime)}playLoop(e,t={}){if(!this.audioCtx||!this.masterGain||!this.uiManager.settings.sfx||this.continuousSounds[e])return;const s=(t.volume??1)*this.uiManager.settings.masterVolume,a=this.audioCtx.createGain();a.gain.setValueAtTime(0,this.audioCtx.currentTime),a.gain.linearRampToValueAtTime(s,this.audioCtx.currentTime+(t.fade??.05)),a.connect(this.masterGain);let i;switch(e){case"laser":if(!this.laserBuffer)return;const n=this.audioCtx.createBufferSource();n.buffer=this.laserBuffer,n.loop=!0,n.playbackRate.value=t.playbackRate??1,n.start(),i=n;break;case"shieldHum":const r=this.audioCtx.createOscillator();r.type="sine",r.frequency.value=880;const h=this.audioCtx.createOscillator();h.type="sine",h.frequency.value=5;const l=this.audioCtx.createGain();l.gain.value=10,h.connect(l),l.connect(r.frequency),h.start(),r.start(),i=r;break;case"sentinelChargeUp":const o=this.audioCtx.createOscillator();o.type="sawtooth",o.frequency.setValueAtTime(80,this.audioCtx.currentTime),o.frequency.linearRampToValueAtTime(200,this.audioCtx.currentTime+1.5),o.start(),i=o;break;case"nexusCannonCharge":const _=this.audioCtx.createBufferSource(),d=this.audioCtx.sampleRate*2,u=this.audioCtx.createBuffer(1,d,this.audioCtx.sampleRate),y=u.getChannelData(0);for(let A=0;A<d;A++)y[A]=Math.random()*2-1;_.buffer=u,_.loop=!0;const w=this.audioCtx.createBiquadFilter();w.type="lowpass",w.frequency.setValueAtTime(5e3,this.audioCtx.currentTime),w.frequency.exponentialRampToValueAtTime(200,this.audioCtx.currentTime+4),_.connect(w),_.start(),i=w;break;case"nexusCannonFire":const S=this.audioCtx.createBufferSource(),c=this.audioCtx.sampleRate*2,p=this.audioCtx.createBuffer(1,c,this.audioCtx.sampleRate),b=p.getChannelData(0);for(let A=0;A<c;A++)b[A]=Math.random()*2-1;S.buffer=p,S.loop=!0;const k=this.audioCtx.createBiquadFilter();k.type="bandpass",k.frequency.value=1e3,k.Q.value=5;const M=this.audioCtx.createOscillator();M.frequency.value=30;const v=this.audioCtx.createGain();v.gain.value=400,M.connect(v),v.connect(k.frequency),S.connect(k),M.start(),S.start(),i=k;break;default:console.warn(`Loop sound not found: ${e}`);return}i.connect(a),this.continuousSounds[e]={source:i,gain:a}}stopLoop(e,t={}){const s=this.continuousSounds[e];if(s&&this.audioCtx&&this.audioCtx.state==="running"){try{const a=this.audioCtx.currentTime+(t.fade??.1);s.gain.gain.cancelScheduledValues(this.audioCtx.currentTime),s.gain.gain.linearRampToValueAtTime(0,a),"stop"in s.source&&typeof s.source.stop=="function"&&s.source.stop(a),setTimeout(()=>{s.source.disconnect(),s.gain.disconnect()},(t.fade??.1)*1e3+50)}catch(a){console.warn(`Fehler beim Stoppen des Loops ${e}:`,a)}delete this.continuousSounds[e]}}play(e){if(!this.audioCtx||!this.masterGain||!this.uiManager.settings.sfx||this.audioCtx.state!=="running")return;const t=this.audioCtx.currentTime,s=this.uiManager.settings.masterVolume,a=(r,h,l)=>{const o=this.audioCtx.createOscillator();return o.type=r,o.frequency.value=h,l&&(o.detune.value=l),o},i=(r,h,l,o=t)=>{const _=this.audioCtx.createGain();return _.gain.setValueAtTime(r*s,o),_.gain.exponentialRampToValueAtTime(h*s,o+l),_},n=(r,h,l)=>{r.connect(h),h.connect(this.masterGain),r.start(t),r.stop(t+l)};switch(e){case"shieldActivate":{const c=a("sine",440),p=this.audioCtx.createGain();p.gain.setValueAtTime(0,t),p.gain.linearRampToValueAtTime(.4*s,t+.05),p.gain.linearRampToValueAtTime(0,t+.2),c.frequency.setValueAtTime(440,t),c.frequency.exponentialRampToValueAtTime(1200,t+.2),n(c,p,.2),this.playLoop("shieldHum",{volume:.08,fade:.2});break}case"shieldDown":{this.stopLoop("shieldHum",{fade:.1});const c=a("sawtooth",800),p=i(.4,.001,.3);c.frequency.setValueAtTime(800,t),c.frequency.exponentialRampToValueAtTime(100,t+.3),n(c,p,.3);break}case"ghostActivate":{const c=a("sawtooth",500),p=i(.3,.001,.25);c.frequency.setValueAtTime(500,t),c.frequency.exponentialRampToValueAtTime(2e3,t+.25),n(c,p,.25);break}case"ghostDeactivate":{const c=a("sawtooth",2e3),p=i(.3,.001,.25);c.frequency.setValueAtTime(2e3,t),c.frequency.exponentialRampToValueAtTime(500,t+.25),n(c,p,.25);break}case"weaponUpgrade":{const c=a("square",100),p=i(.5,.001,.15);c.frequency.setValueAtTime(100,t),c.frequency.exponentialRampToValueAtTime(300,t+.1),n(c,p,.15);break}case"weaponDowngrade":{const c=a("sawtooth",300),p=i(.5,.001,.2);c.frequency.setValueAtTime(300,t),c.frequency.exponentialRampToValueAtTime(50,t+.2),n(c,p,.2);break}case"reviveCrystalFly":{const c=a("sine",800),p=i(0,.001,1,t+.8);p.gain.setValueAtTime(0,t),p.gain.linearRampToValueAtTime(.5*s,t+.1),c.frequency.setValueAtTime(800,t),c.frequency.exponentialRampToValueAtTime(2500,t+1),n(c,p,1);break}case"reviveFail":{const c=a("sawtooth",400,30),p=i(.6,.001,1.5);c.frequency.setValueAtTime(400,t),c.frequency.exponentialRampToValueAtTime(50,t+1.5),n(c,p,1.5);break}case"teleporterOut":{const c=a("sine",1500),p=i(.4,.001,.15);c.frequency.setValueAtTime(1500,t),c.frequency.exponentialRampToValueAtTime(50,t+.15),n(c,p,.15);break}case"teleporterIn":{const c=a("sine",50),p=i(.4,.001,.2);c.frequency.setValueAtTime(50,t),c.frequency.exponentialRampToValueAtTime(1500,t+.2),n(c,p,.2);break}case"sentinelDash":{const c=a("sawtooth",50),p=i(.8,.001,.7);c.frequency.setValueAtTime(50,t),c.frequency.exponentialRampToValueAtTime(800,t+.1),c.frequency.exponentialRampToValueAtTime(50,t+.7),n(c,p,.7);break}case"nexusPhaseTransition":{const c=a("sawtooth",200),p=i(.9,.001,1.2);c.frequency.setValueAtTime(200,t),c.frequency.exponentialRampToValueAtTime(30,t+1.2),n(c,p,1.2);break}case"primeLanceAttack":{for(let c=0;c<8;c++){const p=a("sawtooth",1200,Math.random()*200-100),b=i(.3,.001,.4);n(p,b,.4)}break}case"primeSweepAttack":{const c=a("sawtooth",300),p=i(0,.001,5,t+4.5);p.gain.setValueAtTime(0,t),p.gain.linearRampToValueAtTime(.7*s,t+.5),c.frequency.setValueAtTime(300,t),c.frequency.linearRampToValueAtTime(500,t+5);const b=this.audioCtx.createStereoPanner();b.pan.setValueAtTime(this.uiManager.game.player.pos.x<this.uiManager.game.width/2?-1:1,t),b.pan.linearRampToValueAtTime(this.uiManager.game.player.pos.x<this.uiManager.game.width/2?1:-1,t+5),c.connect(p),p.connect(b),b.connect(this.masterGain),c.start(t),c.stop(t+5);break}case"uiTabSwitch":{const c=a("sine",800),p=i(.3,.001,.1);n(c,p,.1);break}case"cosmeticEquip":{const c=a("square",150),p=i(.4,.001,.1);n(c,p,.1);break}case"modeSelectConfirm":{const c=a("sine",300),p=i(.5,.001,.3);c.frequency.setValueAtTime(300,t),c.frequency.exponentialRampToValueAtTime(600,t+.3),n(c,p,.3);break}default:let r=null,h=1,l=!1;switch(e){case"shoot":const c=this.uiManager.game.player;if(c)switch(c.powerUpManager.weaponTier){case 1:r=this.shootTier1Buffer,h=.2;break;case 2:r=this.shootTier2Buffer,h=.2;break;case 3:r=this.shootTier3Buffer,h=.18;break;case 4:r=this.shootTier4Buffer,h=.16;break}l=!0;break;case"blackHole":r=this.blackHoleBuffer,h=.6,l=!0;break;case"droneTier1":r=this.droneTier1Buffer,h=.1,l=!0;break;case"droneTier2":r=this.droneTier2Buffer,h=.1,l=!0;break;case"droneTier3":r=this.droneTier3Buffer,h=.1,l=!0;break;case"coinCollect":r=this.coinCollectBuffer,h=.1,l=!0;break;case"powerup":r=this.powerupCollectBuffer,h=.1,l=!0;break;case"enemyExplosion":r=this.enemyExplosionBuffer,h=.4,l=!0;break;case"nuke":r=this.nukeBuffer,h=.7,l=!0;break;case"missileLaunch":r=this.missileLaunchBuffer,h=.1,l=!0;break}if(r){const c=this.audioCtx.createBufferSource();c.buffer=r;const p=this.audioCtx.createGain();p.gain.setValueAtTime(h*s,t),c.connect(p),p.connect(this.masterGain),c.start(t);return}if(l)return;let o=440,_=.1,d="sine",u=1,y=o;switch(e){case"playerHit":o=200,_=.2,d="square";break;case"playerExplosion":o=100,_=.5,d="sawtooth";break;case"uiClick":o=1200,_=.05,d="triangle",u=.4;break;case"purchaseSuccess":o=1500,_=.1,d="sine",u=.5;break;case"uiError":o=200,_=.15,d="sawtooth",u=.4;break;case"enemyShoot":o=800,y=400,_=.1,d="triangle",u=.15;break;case"enemyPlasmaShoot":o=400,_=.2,d="sawtooth",u=.2;break;case"bossLanceShoot":o=1500,_=.15,d="square",u=.3;break;case"revive":const c=this.audioCtx.createOscillator(),p=this.audioCtx.createGain();c.connect(p),p.connect(this.masterGain),c.type="triangle",c.frequency.setValueAtTime(400,t),c.frequency.linearRampToValueAtTime(400*3,t+.8*.9),p.gain.setValueAtTime(.7*s,t),p.gain.exponentialRampToValueAtTime(1e-4,t+.8),c.start(t),c.stop(t+.8);return}const w=a(d,o),S=this.audioCtx.createGain();w.connect(S),S.connect(this.masterGain),y!==o&&w.frequency.exponentialRampToValueAtTime(y,t+_),S.gain.setValueAtTime(u*s,t),S.gain.exponentialRampToValueAtTime(1e-4,t+_),w.start(t),w.stop(t+_)}}}class Xt{constructor(){this.currentLanguage="en",this.translations=Oe,this.setLanguage(localStorage.getItem("galaxyFallLanguage")||"en")}setLanguage(e){this.currentLanguage=this.translations[e]?e:"en",localStorage.setItem("galaxyFallLanguage",this.currentLanguage)}translate(e,t){var a,i;let s=((a=this.translations[this.currentLanguage])==null?void 0:a[e])||((i=this.translations.en)==null?void 0:i[e])||e;return t&&Object.keys(t).forEach(n=>{s=s.replace(`{${n}}`,t[n])}),s}applyTranslationsToUI(){document.querySelectorAll("[data-translate-key]").forEach(e=>{const t=e.dataset.translateKey;t&&(e.textContent=this.translate(t))})}}class Jt{constructor(e,t){this.langSelectSource="startup",this.currentShopTabId="permanent",this.game=e,this.ctx=e.ctx,this.scoreEl=t.score,this.coinsEl=t.coins,this.levelEl=t.level,this.highscoreEl=t.highscore,this.specialInventoryEl=t.specialInventory,this.ultraInventoryEl=t.ultraInventory,this.livesDisplay=t.livesDisplay,this.weaponStatusEl=t.weaponStatus,this.energyBarEl=t.energyBar,this.weaponTierDisplayEl=t.weaponTierDisplay,this.levelDisplayContainer=t.levelDisplay,this.menuContainer=document.getElementById("menu-container"),this.gameOverContainer=document.getElementById("game-over-container"),this.modeSelectContainer=document.getElementById("mode-select-container"),this.langSelectScreen=document.getElementById("language-select-screen"),this.langBackButton=document.getElementById("lang-back-button"),this.tabButtons={spiel:document.getElementById("tab-spiel"),galerie:document.getElementById("tab-galerie"),arsenal:document.getElementById("tab-arsenal"),gegner:document.getElementById("tab-gegner"),rangliste:document.getElementById("tab-rangliste"),einstellungen:document.getElementById("tab-einstellungen")},this.tabPanes={spiel:document.getElementById("spiel-view"),galerie:document.getElementById("galerie-view"),arsenal:document.getElementById("arsenal-view"),gegner:document.getElementById("gegner-view"),rangliste:document.getElementById("rangliste-view"),einstellungen:document.getElementById("einstellungen-view")},this.mainMenuElements={resume:document.getElementById("resume-button"),restart:document.getElementById("restart-button"),quit:document.getElementById("quit-button"),header:this.menuContainer.querySelector(".menu-header h1")},this.settings=this.loadSettings(),this.localizationManager=new Xt,this.soundManager=new Yt(this),document.getElementById("coin-icon").src=C,this.shopContainer=document.getElementById("shop-container"),this.shopCoinsEl=document.getElementById("shop-coins"),this.shopContentEl=document.getElementById("shop-content"),this.shopTabsContainerEl=document.getElementById("shop-tabs"),document.getElementById("shop-coin-icon").src=C,this.toggleMainMenu=this.toggleMainMenu.bind(this),this.togglePauseMenu=this.togglePauseMenu.bind(this),this.showTab=this.showTab.bind(this),this.drawLevelMessage=this.drawLevelMessage.bind(this),this.drawGameOver=this.drawGameOver.bind(this),this.drawWinScreen=this.drawWinScreen.bind(this),this.initButtons()}update(){if(this.scoreEl.textContent=this.game.score.toString(),this.coinsEl.textContent=this.game.coins.toString(),this.levelEl.textContent=this.game.level.toString(),(this.game.isPaused||["MENU","GAME_OVER","WIN","MODE_SELECT"].includes(this.game.gameState))&&(this.highscoreEl.textContent=this.game.highscore.toString()),!this.game.player||!this.game.player.isAlive()){this.specialInventoryEl.innerHTML="",this.ultraInventoryEl.innerHTML="",this.livesDisplay.innerHTML="",this.weaponStatusEl.innerHTML="",this.energyBarEl.style.width="0%",this.weaponTierDisplayEl.innerHTML="",this.levelDisplayContainer.style.display="none";return}this.levelDisplayContainer.style.display="block",this.livesDisplay.innerHTML=`<img src="${x}" alt="Leben" class="ui-icon" />: ${this.game.player.lives}`;const e=this.game.player.energy/this.game.player.maxEnergy*100;this.energyBarEl.style.width=`${e}%`,this.updateInventoryUI(this.specialInventoryEl,this.game.player.powerUpManager.specialInventory,3,1),this.updateInventoryUI(this.ultraInventoryEl,this.game.player.powerUpManager.ultraInventory,2,4),this.updateWeaponStatusUI()}updateInventoryUI(e,t,s,a){let i="";const n=e.id==="special-inventory"?"special":"ultra";for(let r=0;r<s;r++){const h=t[r],l=a+r;if(h){const o=L[h.type];i+=`<div class="inventory-slot" data-slot-index="${r}" data-inventory-type="${n}">
                            <div class="slot-key">${l}</div>
                            <img src="${o}" class="slot-image" alt="${h.type}"/>
                            ${h.count>1?`<div class="slot-count">x${h.count}</div>`:""}
                         </div>`}else i+=`<div class="inventory-slot"><div class="slot-key">${l}</div></div>`}e.innerHTML=i}updateWeaponStatusUI(){if(!this.game.player){this.weaponTierDisplayEl.innerHTML="",this.weaponStatusEl.innerHTML="",this.weaponStatusEl.style.display="none";return}const e=this.game.player.powerUpManager;let s=`<img src="${L.WEAPON_UP}" alt="Waffenstufe" class="ui-icon" />: ${e.weaponTier}`,a=e.weaponTierTimer;if(a>0&&e.weaponTier>1){const r=Math.ceil(a/1e3);s+=` <span class="${r<=5?"timer-warning":""}">(${r}s)</span>`}this.weaponTierDisplayEl.innerHTML=s;const i=["RAPID_FIRE","GHOST_PROTOCOL","ORBITAL_DRONE","LASER_BEAM","HOMING_MISSILES","SCORE_BOOST","SIDE_SHOTS"];let n="";for(const r of i)if(e.isActive(r)){const h=L[r],l=Math.ceil(e.timers[r]/1e3);n+=`
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <img src="${h}" alt="${r}" style="width: 24px; height: 24px;" />
                        <span>${l}s</span>
                    </div>
                `}n!==""?(this.weaponStatusEl.innerHTML=n,this.weaponStatusEl.style.display="flex",this.weaponStatusEl.style.gap="15px",this.weaponStatusEl.style.alignItems="center"):(this.weaponStatusEl.innerHTML="",this.weaponStatusEl.style.display="none")}toggleMainMenu(e){this.menuContainer.style.display=e?"flex":"none";const t=document.getElementById("exit-button");e&&(this.mainMenuElements.header.dataset.translateKey="main_menu_title",this.mainMenuElements.header.textContent=this.localizationManager.translate("main_menu_title"),this.mainMenuElements.resume.style.display="none",this.mainMenuElements.quit.style.display="none",t&&(t.style.display="block"),this.mainMenuElements.restart.style.display="block",this.mainMenuElements.restart.dataset.translateKey="btn_start_game",this.mainMenuElements.restart.textContent=this.localizationManager.translate("btn_start_game"),this.populateAllTranslatedContent(),this.showTab("spiel"))}togglePauseMenu(e){this.menuContainer.style.display=e?"flex":"none";const t=document.getElementById("exit-button");e&&(this.mainMenuElements.header.dataset.translateKey="pause_header",this.mainMenuElements.header.textContent=this.localizationManager.translate("pause_header"),this.mainMenuElements.resume.style.display="block",this.mainMenuElements.quit.style.display="block",t&&(t.style.display="block"),this.mainMenuElements.restart.style.display="block",this.mainMenuElements.restart.dataset.translateKey="btn_restart",this.mainMenuElements.restart.textContent=this.localizationManager.translate("btn_restart"),this.populateAllTranslatedContent(),this.showTab("spiel"))}toggleGameOverScreen(e){if(e){const t=document.getElementById("final-score");t.textContent=this.game.score.toString(),this.gameOverContainer.style.display="flex"}else this.gameOverContainer.style.display="none"}toggleModeSelectScreen(e){this.modeSelectContainer.style.display=e?"flex":"none"}toggleShopScreen(e){e?(this.renderShop(),this.shopContainer.style.display="flex"):this.shopContainer.style.display="none"}renderShop(){const e=this.game.shopManager,t=this.game.piManager;this.shopCoinsEl.textContent=this.game.coins.toString(),this.shopContentEl.innerHTML="";const s=document.getElementById("pi-user-display");t.isAuthenticated?(document.getElementById("pi-username").textContent=t.username,s.style.display="block"):s.style.display="none";const a=e.shopItems.reduce((i,n)=>{const r=n.type.toLowerCase();return i[r]||(i[r]=[]),i[r].push(n),i},{});for(const i of Object.keys(a)){const n=document.createElement("div");n.id=`shop-pane-${i}`,n.className="shop-tab-pane";const r=a[i];if(i==="pi_bundle"&&!t.isAuthenticated){const h=document.createElement("button");h.id="pi-connect-btn",h.className="pi-connect-button",h.textContent="Mit Pi Wallet verbinden",h.onclick=()=>t.authenticate(),n.appendChild(h)}r.forEach(h=>{const l=this.createShopItemElement(h);n.appendChild(l)}),this.shopContentEl.appendChild(n)}this.showShopTab(this.currentShopTabId)}createShopItemElement(e){var o;const t=this.game.shopManager,s=(_,d)=>this.localizationManager.translate(_,d),a=document.createElement("div");a.className="shop-item",e.type==="PI_BUNDLE"&&a.classList.add("pi-bundle");let i="",n="",r=s(e.descKey);if(e.id==="special_stack_size"){const _=[5,10,25],d=t.getUpgradeLevel(e.id),u=_[d]||5;if(d<e.maxLevel){const y=_[d+1];r=s(e.descKey,{current:u.toString(),next:(y||"").toString()})}else r=s("shop_special_stack_desc_max",{current:u.toString()})}switch((e.type==="PERMANENT"||e.type==="ULTIMATE")&&(r+=` <span style='color: #FF8C00;'>(${s("shop_upgrade_active_next_round")})</span>`),e.type){case"PERMANENT":case"ULTIMATE":const _=t.getUpgradeLevel(e.id),d=e.maxLevel,u=t.getCost(e),y=_>=d,w=u!==null&&this.game.coins>=u;n=`
                    <h3 class="shop-item-title">${s(e.nameKey)}</h3>
                    <p class="shop-item-desc">${r}</p>
                    <div class="shop-item-level-container">
                        ${s("level")}: ${_} / ${d}
                        <div class="shop-item-level-progress">
                            <div class="shop-item-level-bar" style="width: ${_/d*100}%;"></div>
                        </div>
                    </div>`,y?i=`<button class="shop-buy-button maxed" disabled>${s("btn_max_level")}</button>`:i=`<button class="shop-buy-button" id="buy-${e.id}" ${w?"":"disabled"}>
                        <div class="shop-item-cost"><span>${s("btn_upgrade")}</span><img src="${C}" alt="Coin"/><span>${u}</span></div>
                    </button>`;break;case"CONSUMABLE":const S=t.getCost(e),c=this.game.coins>=S;n=`<h3 class="shop-item-title">${s(e.nameKey)}</h3><p class="shop-item-desc">${r}</p>`,i=`<button class="shop-buy-button" id="buy-${e.id}" ${c?"":"disabled"}>
                    <div class="shop-item-cost"><span>${s("btn_buy")}</span><img src="${C}" alt="Coin"/><span>${S}</span></div>
                </button>`;break;case"COSMETIC":const p=t.isCosmeticUnlocked(e.id,e.cosmeticType),b=t.getCost(e),k=this.game.coins>=b;if(n=`<h3 class="shop-item-title">${s(e.nameKey)}</h3><p class="shop-item-desc">${r}</p>`,p){const v=t.playerCosmetics.equipped_skin===e.id||t.playerCosmetics.equipped_projectile===e.id||t.playerCosmetics.equipped_trail===e.id;i=`<button class="shop-buy-button cosmetic-equip-button ${v?"equipped":""}" id="equip-${e.id}" ${v?"disabled":""}>
                        ${s(v?"btn_equipped":"btn_equip")}
                    </button>`}else i=`<button class="shop-buy-button" id="buy-${e.id}" ${k?"":"disabled"}>
                        <div class="shop-item-cost"><span>${s("btn_unlock")}</span><img src="${C}" alt="Coin"/><span>${b}</span></div>
                    </button>`;break;case"PI_BUNDLE":const M=this.game.piManager.isAuthenticated;n=`<h3 class="shop-item-title">${s(e.nameKey)}</h3><p class="shop-item-desc">${r}</p>`,i=`<button class="shop-buy-button pi-purchase" id="buy-${e.id}" ${M?"":"disabled"}>
                    <div class="shop-item-cost"><span>${s("btn_buy")}</span><span class="pi-symbol">π</span><span>${(o=e.pi_cost)==null?void 0:o.toFixed(2)}</span></div>
                </button>`;break}a.innerHTML=`
            <img src="${e.iconSrc}" alt="${s(e.nameKey)}" class="shop-item-icon">
            <div class="shop-item-details">${n}</div>
            <div class="shop-item-purchase">${i}</div>`;const h=a.querySelector(`#buy-${e.id}`);h&&h.addEventListener("click",()=>{t.purchaseItem(e.id)&&this.renderShop()});const l=a.querySelector(`#equip-${e.id}`);return l&&l.addEventListener("click",()=>{t.equipCosmetic(e.id,e.cosmeticType),this.renderShop()}),a}showShopTab(e){this.currentShopTabId=e,this.shopContentEl.querySelectorAll(".shop-tab-pane").forEach(a=>{a.classList.remove("active")}),this.shopTabsContainerEl.querySelectorAll(".tab-button").forEach(a=>{a.classList.remove("active")});const t=this.shopContentEl.querySelector(`#shop-pane-${e}`),s=this.shopTabsContainerEl.querySelector(`[data-tab="${e}"]`);t&&t.classList.add("active"),s&&s.classList.add("active")}showTab(e){for(const t in this.tabPanes){const s=this.tabPanes[t],a=this.tabButtons[t];t===e?(s.classList.add("active"),a.classList.add("active")):(s.classList.remove("active"),a.classList.remove("active"))}}initButtons(){const e=(i,n)=>{if(i){const r=this.game.isMobile?"touchstart":"click";i.addEventListener(r,h=>{h.preventDefault(),(this.game.isPaused||["MENU","GAME_OVER","WIN","MODE_SELECT"].includes(this.game.gameState))&&this.soundManager.play("uiClick"),n(h)})}};e(this.mainMenuElements.restart,()=>{this.soundManager.initAudio(),this.soundManager.play("modeSelectConfirm"),this.game.changeState("MODE_SELECT")}),e(this.mainMenuElements.resume,()=>this.game.togglePause()),e(this.mainMenuElements.quit,()=>this.game.changeState("MENU")),e(document.getElementById("exit-button"),()=>{if(this.game.isMobile){const i=document.getElementById("exit-screen");i&&(i.style.display="flex",this.localizationManager.applyTranslationsToUI()),this.soundManager.toggleMusic(!1)}else window.close()}),e(document.getElementById("restart-from-gameover-button"),()=>{this.game.changeState("MODE_SELECT")}),e(document.getElementById("quit-from-gameover-button"),()=>{this.game.changeState("MENU")}),e(document.getElementById("mobile-pause-button"),()=>this.game.togglePause()),e(document.getElementById("select-campaign-button"),()=>{this.soundManager.play("modeSelectConfirm"),this.game.gameMode="CAMPAIGN",this.game.changeState("LEVEL_START",!0)}),e(document.getElementById("select-endless-button"),()=>{this.soundManager.play("modeSelectConfirm"),this.game.gameMode="ENDLESS",this.game.changeState("LEVEL_START",!0)});const t=document.getElementById("shop-button"),s=document.getElementById("shop-back-button");e(t,()=>{this.toggleMainMenu(!1),this.toggleShopScreen(!0)}),e(s,()=>{this.toggleShopScreen(!1),this.game.isPaused?this.togglePauseMenu(!0):this.toggleMainMenu(!0)}),this.shopTabsContainerEl.querySelectorAll(".tab-button").forEach(i=>{e(i,()=>{const n=i.dataset.tab;n&&this.showShopTab(n)})});for(const i in this.tabButtons)e(this.tabButtons[i],()=>{this.soundManager.play("uiTabSwitch"),this.showTab(i),i==="rangliste"&&this.populateLeaderboard("campaign","score")});const a=document.getElementById("volume-master");if(a&&(a.addEventListener("input",i=>{this.settings.masterVolume=parseFloat(i.target.value),this.applySettings(),this.saveSettings()}),a.value=this.settings.masterVolume.toString()),e(document.getElementById("toggle-music"),()=>{this.settings.music=!this.settings.music,this.applySettings(),this.saveSettings()}),e(document.getElementById("toggle-sfx"),()=>{this.settings.sfx=!this.settings.sfx,this.applySettings(),this.saveSettings()}),e(document.getElementById("toggle-particles"),()=>{this.settings.particles=(this.settings.particles+1)%3,this.applySettings(),this.saveSettings()}),e(document.getElementById("toggle-shake"),()=>{this.settings.screenShake=!this.settings.screenShake,this.applySettings(),this.saveSettings()}),e(document.getElementById("toggle-language"),()=>{this.langSelectSource="settings",this.menuContainer.style.display="none",this.langSelectScreen.style.display="flex",this.langBackButton.style.display="block"}),e(document.getElementById("lang-back-button"),()=>{this.langSelectScreen.style.display="none",this.menuContainer.style.display="flex",this.langSelectSource="startup"}),document.querySelectorAll(".lang-button").forEach(i=>{e(i,()=>{this.soundManager.initAudio();const n=i.dataset.lang;n&&(this.localizationManager.setLanguage(n),this.populateAllTranslatedContent(),this.langSelectScreen.style.display="none",this.langSelectSource==="settings"?this.menuContainer.style.display="flex":this.game.changeState("INTRO"))})}),this.game.isMobile){const i=n=>{if(!this.game.player||this.game.isPaused)return;const h=n.target.closest(".inventory-slot");if(h){const l=parseInt(h.dataset.slotIndex||"-1",10),o=h.dataset.inventoryType;if(l>-1&&this.game.player)if(o==="special"){const _=this.game.player.powerUpManager.specialInventory[l];_&&_.type!=="BLACK_HOLE"&&this.game.player.powerUpManager.activateSpecial(l)}else o==="ultra"&&this.game.player.powerUpManager.activateUltra(l)}};this.specialInventoryEl.addEventListener("click",i),this.ultraInventoryEl.addEventListener("click",i),this.specialInventoryEl.addEventListener("touchstart",n=>{if(!this.game.player||this.game.isPaused)return;const h=n.target.closest(".inventory-slot");if(h){const l=parseInt(h.dataset.slotIndex||"-1",10),o=this.game.player.powerUpManager.specialInventory[l];o&&o.type==="BLACK_HOLE"&&(n.preventDefault(),this.game.player.isChargingBlackHole=!0,this.game.player.blackHoleChargeSlot=l)}},{passive:!1}),window.addEventListener("touchend",n=>{this.game.player&&this.game.player.isChargingBlackHole&&(n.preventDefault(),this.game.player.powerUpManager.activateSpecial(this.game.player.blackHoleChargeSlot),this.game.player.isChargingBlackHole=!1,this.game.player.blackHoleChargeSlot=null)})}else{const i=n=>{if(!this.game.player||this.game.isPaused)return;const h=n.target.closest(".inventory-slot");if(h){const l=parseInt(h.dataset.slotIndex||"-1",10),o=h.dataset.inventoryType;if(l>-1&&this.game.player)if(o==="special"){const _=this.game.player.powerUpManager.specialInventory[l];_&&_.type!=="BLACK_HOLE"&&this.game.player.powerUpManager.activateSpecial(l)}else o==="ultra"&&this.game.player.powerUpManager.activateUltra(l)}};this.specialInventoryEl&&this.specialInventoryEl.addEventListener("click",i),this.ultraInventoryEl&&this.ultraInventoryEl.addEventListener("click",i)}}applySettings(){const e=a=>this.localizationManager.translate(a),t=(a,i)=>{const n=document.getElementById(a);n&&(n.textContent=i)},s=(a,i)=>{const n=document.getElementById(a);n&&n.classList.toggle("active",i)};t("toggle-language",e("lang_native_name")),t("toggle-music",this.settings.music?e("on"):e("off")),t("toggle-sfx",this.settings.sfx?e("on"):e("off")),t("toggle-particles",[e("off"),e("low"),e("high")][this.settings.particles]),t("toggle-shake",this.settings.screenShake?e("on"):e("off")),s("toggle-music",this.settings.music),s("toggle-sfx",this.settings.sfx),s("toggle-shake",this.settings.screenShake),this.soundManager.setVolume(this.settings.masterVolume),this.soundManager.toggleMusic(this.settings.music)}saveSettings(){localStorage.setItem("galaxyFallCelestialSettings",JSON.stringify(this.settings))}loadSettings(){const e=localStorage.getItem("galaxyFallCelestialSettings");return e?JSON.parse(e):{masterVolume:.5,music:!0,sfx:!0,particles:2,screenShake:!1}}populateAllTranslatedContent(){this.populateGalerie(),this.populateArsenal(),this.populateGegner(),this.localizationManager.applyTranslationsToUI(),this.applySettings()}createEnemyIcon(e){const t=document.createElement("canvas");t.width=60,t.height=40;const s=t.getContext("2d"),a={width:60,height:40,enemySpeedMultiplier:1,level:1,uiManager:{settings:{particles:0}}};let i=null;switch(e){case"GRUNT":i=new me(a);break;case"WEAVER":i=new ge(a);break;case"TANK":i=new de(a);break;case"SHOOTER":i=new ue(a);break;case"TELEPORTER":i=new fe(a);break;case"BOSS_SENTINEL_PRIME":i=new we(a,1,1);break;case"BOSS_VOID_SERPENT":i=new Ee(a,1,1);break;case"BOSS_OMEGA_NEXUS":i=new Se(a,1,1);break;case"BOSS_NEXUS_PRIME":i=new be(a,1,1);break}return i&&(i.width=54,i.height=36,i.pos=new f(t.width/2-i.width/2,t.height/2-i.height/2),i.draw(s)),t.toDataURL()}populateArsenal(){const e=[{c:"arsenal_cat_weapon_upgrade",n:"powerup_wup_name",d:"powerup_wup_desc",t:"WEAPON_UP"},{c:"arsenal_cat_weapon_mod",n:"powerup_rapid_fire_name",d:"powerup_rapid_fire_desc",t:"RAPID_FIRE"},{c:"arsenal_cat_weapon_mod",n:"powerup_side_shots_name",d:"powerup_side_shots_desc",t:"SIDE_SHOTS"},{c:"arsenal_cat_ultra_weapon",n:"powerup_laser_name",d:"powerup_laser_desc",t:"LASER_BEAM"},{c:"arsenal_cat_ultra_weapon",n:"powerup_homing_missiles_name",d:"powerup_homing_missiles_desc",t:"HOMING_MISSILES"},{c:"arsenal_cat_defense",n:"powerup_shield_name",d:"powerup_shield_desc",t:"SHIELD"},{c:"arsenal_cat_defense",n:"powerup_repair_kit_name",d:"powerup_repair_kit_desc",t:"REPAIR_KIT"},{c:"arsenal_cat_defense",n:"powerup_extra_life_name",d:"powerup_extra_life_desc",t:"EXTRA_LIFE"},{c:"arsenal_cat_defense",n:"powerup_ghost_protocol_name",d:"powerup_ghost_protocol_desc",t:"GHOST_PROTOCOL"},{c:"arsenal_cat_defense",n:"powerup_orbital_drone_name",d:"powerup_orbital_drone_desc",t:"ORBITAL_DRONE"},{c:"arsenal_cat_special",n:"powerup_nuke_name",d:"powerup_nuke_desc",t:"NUKE"},{c:"arsenal_cat_special",n:"powerup_black_hole_name",d:"powerup_black_hole_desc",t:"BLACK_HOLE"},{c:"arsenal_cat_special",n:"powerup_score_boost_name",d:"powerup_score_boost_desc",t:"SCORE_BOOST"}],t=document.getElementById("arsenal-list");t.innerHTML="";let s="";e.forEach(a=>{const i=this.localizationManager.translate(a.c);i!==s&&(s=i,t.innerHTML+=`<h3>- ${s} -</h3>`);const n=L[a.t];t.innerHTML+=`<div class="powerup-entry"><img src="${n}" class="arsenal-icon" alt="${a.n}"/><div class="powerup-info"><div class="powerup-title">${this.localizationManager.translate(a.n)}</div><div class="powerup-desc">${this.localizationManager.translate(a.d)}</div></div></div>`})}populateGalerie(){const e=i=>this.localizationManager.translate(i),t=document.getElementById("galerie-list");t.innerHTML="";const s=[{id:"skin_default",nameKey:"shop_skin_default_name",imageSrc:oe},{id:"skin_sentinel",nameKey:"shop_skin_sentinel_name",imageSrc:W},{id:"skin_renegade",nameKey:"shop_skin_renegade_name",imageSrc:z},{id:"skin_avenger",nameKey:"shop_skin_avenger_name",imageSrc:V},{id:"skin_void",nameKey:"shop_skin_void_name",imageSrc:q},{id:"skin_gold",nameKey:"shop_skin_gold_name",imageSrc:j}],a=this.game.shopManager.playerCosmetics.equipped_skin;s.forEach(i=>{const n=this.game.shopManager.isCosmeticUnlocked(i.id,"player_skin"),r=document.createElement("div");r.className="gallery-item",n?(i.id===a&&r.classList.add("selected"),r.addEventListener("click",()=>{this.game.shopManager.equipCosmetic(i.id,"player_skin"),this.soundManager.play("cosmeticEquip"),this.populateGalerie()})):r.classList.add("locked"),r.innerHTML=`
                <img src="${i.imageSrc}" alt="${e(i.nameKey)}">
                <div class="gallery-item-name">${e(i.nameKey)}</div>
            `,t.appendChild(r)})}populateGegner(){const e=[{nameKey:"gegner_grunt_name",descKey:"gegner_grunt_desc",type:"GRUNT",strengthKey:"strength_low"},{nameKey:"gegner_weaver_name",descKey:"gegner_weaver_desc",type:"WEAVER",strengthKey:"strength_low"},{nameKey:"gegner_tank_name",descKey:"gegner_tank_desc",type:"TANK",strengthKey:"strength_medium"},{nameKey:"gegner_shooter_name",descKey:"gegner_shooter_desc",type:"SHOOTER",strengthKey:"strength_medium"},{nameKey:"gegner_teleporter_name",descKey:"gegner_teleporter_desc",type:"TELEPORTER",strengthKey:"strength_high"},{nameKey:"gegner_sentinel_prime_name",descKey:"gegner_sentinel_prime_desc",type:"BOSS_SENTINEL_PRIME",strengthKey:"strength_high"},{nameKey:"gegner_void_serpent_name",descKey:"gegner_void_serpent_desc",type:"BOSS_VOID_SERPENT",strengthKey:"strength_extreme"},{nameKey:"gegner_omega_nexus_name",descKey:"gegner_omega_nexus_desc",type:"BOSS_OMEGA_NEXUS",strengthKey:"strength_apocalyptic"},{nameKey:"gegner_nexus_prime_name",descKey:"gegner_nexus_prime_desc",type:"BOSS_NEXUS_PRIME",strengthKey:"strength_final"}],t=a=>this.localizationManager.translate(a),s=document.getElementById("gegner-list");s.innerHTML=`<h3>- ${t("gegner_header")} -</h3>`,e.forEach(a=>{const i=this.createEnemyIcon(a.type),n=a.strengthKey.split("_")[1];s.innerHTML+=`<div class="powerup-entry"> <img src="${i}" class="arsenal-icon" alt="${t(a.nameKey)} icon"/> <div class="powerup-info"> <div class="powerup-title"> <span>${t(a.nameKey)}</span> <span class="strength-indicator strength-${n}">${t(a.strengthKey)}</span> </div> <div class="powerup-desc">${t(a.descKey)}</div> </div> </div>`})}async populateLeaderboard(e,t){const s=i=>this.localizationManager.translate(i),a=document.getElementById("leaderboard-content");a.innerHTML=`
            <div class="leaderboard-controls">
                <button class="menu-button ${e==="campaign"?"active":""}" id="lb-btn-campaign">${s("btn_campaign")}</button>
                <button class="menu-button ${e==="endless"?"active":""}" id="lb-btn-endless">${s("btn_endless")}</button>
            </div>
            <div class="leaderboard-controls">
                <button class="menu-button ${t==="score"?"active":""}" id="lb-btn-score">${s("score")}</button>
                <button class="menu-button ${t==="waves"?"active":""}" id="lb-btn-waves">${s("waves")}</button>
            </div>
            <p>${s("leaderboard_loading")}...</p>`,this.attachLeaderboardControlEvents(e,t);try{const i=await fetch(`${he}/leaderboard?mode=${e}&metric=${t}`);if(!i.ok)throw new Error(`Server responded with status: ${i.status}`);const n=await i.json();if(!n||n.length===0){const l=a.querySelector("p");l&&(l.textContent=s("leaderboard_no_entries"));return}let r=`
                <div class="leaderboard-table">
                    <div class="leaderboard-header">
                        <div class="rank">#</div>
                        <div class="username">${s("leaderboard_player")}</div>
                        <div class="score">${s("score")}</div>
                        <div class="waves">${s("waves")}</div>
                    </div>`;n.forEach(l=>{r+=`
                    <div class="leaderboard-row">
                        <div class="rank">${l.rank}</div>
                        <div class="username">${l.username}</div>
                        <div class="score">${l.score.toLocaleString()}</div>
                        <div class="waves">${l.waves}</div>
                    </div>`}),r+="</div>";const h=a.querySelector("p");h&&h.remove(),a.innerHTML+=r}catch(i){console.error("Fehler beim Laden der Rangliste:",i);const n=a.querySelector("p");n&&(n.innerHTML=`<span class="leaderboard-error">${s("leaderboard_error")}</span>`)}}attachLeaderboardControlEvents(e,t){var s,a,i,n;(s=document.getElementById("lb-btn-campaign"))==null||s.addEventListener("click",()=>this.populateLeaderboard("campaign",t)),(a=document.getElementById("lb-btn-endless"))==null||a.addEventListener("click",()=>this.populateLeaderboard("endless",t)),(i=document.getElementById("lb-btn-score"))==null||i.addEventListener("click",()=>this.populateLeaderboard(e,"score")),(n=document.getElementById("lb-btn-waves"))==null||n.addEventListener("click",()=>this.populateLeaderboard(e,"waves"))}drawLevelMessage(){const e=this.ctx,t=this.game.width/this.game.baseWidth,s=Math.max(16,30*t);e.textAlign="center",e.fillStyle="rgba(0,0,0,0.7)",e.fillRect(0,this.game.height/2-50,this.game.width,100),e.fillStyle="#FFFF00",e.font=`${s}px 'Press Start 2P'`,e.fillText(this.game.levelMessage,this.game.width/2,this.game.height/2+10,this.game.width*.95)}drawGameOver(){const e=this.ctx;e.fillStyle="rgba(0,0,0,0.7)",e.fillRect(0,0,this.game.width,this.game.height)}drawWinScreen(){const e=this.ctx,t=s=>this.localizationManager.translate(s);e.textAlign="center",e.fillStyle="rgba(0,0,0,0.7)",e.fillRect(0,0,this.game.width,this.game.height),e.fillStyle="#39FF14",e.font="50px 'Press Start 2P'",e.fillText(t("victory_title"),this.game.width/2,this.game.height/2-50),e.fillStyle="#FFF",e.font="24px 'Press Start 2P'",e.fillText(`${t("victory_final_score")}: ${this.game.score}`,this.game.width/2,this.game.height/2+20),e.font="20px 'Press Start 2P'",e.fillText(t("victory_prompt"),this.game.width/2,this.game.height/2+80)}drawOverlay(){if(this.game.isBossActive){const e=this.game.entities.find(t=>t.isBoss);e&&(this.ctx.fillStyle="red",this.ctx.fillRect(10,55,this.game.width-20,15),this.ctx.fillStyle="green",this.ctx.fillRect(10,55,(this.game.width-20)*(e.health/e.maxHealth),15))}}}const R=[{wave:1,scoreToEarn:2e3,enemies:["GRUNT"],msgKey:"wave_msg_1_invasion",s:1200,m:1},{wave:2,scoreToEarn:4e3,enemies:["GRUNT","WEAVER"],msgKey:"wave_msg_2_sighting",s:1100,m:1.05},{wave:3,scoreToEarn:7e3,enemies:["GRUNT","WEAVER","TANK"],msgKey:"wave_msg_3_heavy",s:1e3,m:1.1},{wave:4,scoreToEarn:12e3,enemies:["GRUNT","WEAVER","TANK","SHOOTER"],msgKey:"wave_msg_4_returnfire",s:950,m:1.15},{wave:5,scoreToEarn:0,enemies:[],isMultiFormation:!0,msgKey:"wave_msg_5_multi_formation",s:0,m:1.2,h:5},{wave:6,scoreToEarn:25e3,enemies:["SHOOTER","WEAVER","WEAVER"],msgKey:"wave_msg_6_weaverrain",s:700,m:1.35},{wave:7,scoreToEarn:35e3,enemies:["SHOOTER","TANK","GRUNT"],msgKey:"wave_msg_7_skirmish",s:700,m:1.4},{wave:8,scoreToEarn:45e3,enemies:["GRUNT","SHOOTER"],msgKey:"wave_msg_8_surge",s:650,m:1.45},{wave:9,scoreToEarn:55e3,enemies:["WEAVER","TANK","WEAVER"],msgKey:"wave_msg_9_pressure",s:600,m:1.55},{wave:10,scoreToEarn:0,enemies:[],boss:"BOSS_SENTINEL_PRIME",msgKey:"wave_msg_10_sentinel_prime",s:0,m:1.6,h:12},{wave:11,scoreToEarn:68e3,enemies:["TELEPORTER","GRUNT"],msgKey:"wave_msg_11_reinforcements",s:1e3,m:1.65},{wave:12,scoreToEarn:8e4,enemies:["SHOOTER","SHOOTER","TANK"],msgKey:"wave_msg_12_crossfire",s:550,m:1.7},{wave:13,scoreToEarn:95e3,enemies:["WEAVER","WEAVER","TELEPORTER"],msgKey:"wave_msg_13_swarm",s:500,m:1.75},{wave:14,scoreToEarn:11e4,enemies:["TELEPORTER","SHOOTER"],msgKey:"wave_msg_14_ambush",s:900,m:1.8},{wave:15,scoreToEarn:0,enemies:[],isMultiFormation:!0,msgKey:"wave_msg_15_multi_formation",s:0,m:1.9,h:6},{wave:16,scoreToEarn:15e4,enemies:["SHOOTER","TELEPORTER","WEAVER"],msgKey:"wave_msg_16_flank",s:800,m:1.95},{wave:17,scoreToEarn:175e3,enemies:["TANK","SHOOTER","WEAVER","GRUNT"],msgKey:"wave_msg_17_composite",s:500,m:2},{wave:18,scoreToEarn:19e4,enemies:["GRUNT","TELEPORTER","SHOOTER"],msgKey:"wave_msg_18_turbulence",s:680,m:2.05},{wave:19,scoreToEarn:21e4,enemies:["WEAVER","TANK","SHOOTER"],msgKey:"wave_msg_19_heatup",s:620,m:2.1},{wave:20,scoreToEarn:0,enemies:[],boss:"BOSS_VOID_SERPENT",msgKey:"wave_msg_20_void_serpent",s:0,m:2.3,h:20},{wave:21,scoreToEarn:24e4,enemies:["WEAVER","TELEPORTER","WEAVER"],msgKey:"wave_msg_21_surge",s:700,m:2.4},{wave:22,scoreToEarn:27e4,enemies:["TANK","TANK","SHOOTER"],msgKey:"wave_msg_22_ironwall",s:380,m:2.5},{wave:23,scoreToEarn:3e5,enemies:["GRUNT","SHOOTER","TANK"],msgKey:"wave_msg_23_press",s:350,m:2.6},{wave:24,scoreToEarn:34e4,enemies:["SHOOTER","SHOOTER","TELEPORTER"],msgKey:"wave_msg_24_crosslines",s:650,m:2.7},{wave:25,scoreToEarn:0,enemies:[],isMultiFormation:!0,msgKey:"wave_msg_25_multi_formation",s:0,m:2.8,h:7},{wave:26,scoreToEarn:43e4,enemies:["GRUNT","WEAVER","TANK","SHOOTER"],msgKey:"wave_msg_26_combined_arms",s:320,m:2.9},{wave:27,scoreToEarn:48e4,enemies:["TELEPORTER","TANK","SHOOTER"],msgKey:"wave_msg_27_ambit",s:300,m:3},{wave:28,scoreToEarn:52e4,enemies:["GRUNT","SHOOTER","TELEPORTER"],msgKey:"wave_msg_28_thin_red_line",s:500,m:3.1},{wave:29,scoreToEarn:56e4,enemies:["WEAVER","TANK","WEAVER","TELEPORTER"],msgKey:"wave_msg_29_furnace",s:450,m:3.2},{wave:30,scoreToEarn:0,enemies:[],boss:"BOSS_OMEGA_NEXUS",msgKey:"wave_msg_30_omega_nexus",s:0,m:3.4,h:30},{wave:31,scoreToEarn:62e4,enemies:["TELEPORTER","TELEPORTER"],msgKey:"wave_msg_31_phase_shift",s:780,m:3.5},{wave:32,scoreToEarn:68e4,enemies:["SHOOTER","TANK","SHOOTER","TANK"],msgKey:"wave_msg_32_crossarmor",s:280,m:3.6},{wave:33,scoreToEarn:75e4,enemies:["WEAVER","SHOOTER","TELEPORTER"],msgKey:"wave_msg_33_circle_assault",s:250,m:3.7},{wave:34,scoreToEarn:83e4,enemies:["TELEPORTER","SHOOTER","TANK"],msgKey:"wave_msg_34_pulse",s:380,m:3.8},{wave:35,scoreToEarn:0,enemies:[],isMultiFormation:!0,msgKey:"wave_msg_35_multi_formation",s:0,m:4,h:8},{wave:36,scoreToEarn:102e4,enemies:["SHOOTER","SHOOTER","TELEPORTER","TELEPORTER"],msgKey:"wave_msg_36_barrage",s:340,m:4.2},{wave:37,scoreToEarn:114e4,enemies:["GRUNT","WEAVER","TANK","SHOOTER","TELEPORTER"],msgKey:"wave_msg_37_matrix",s:200,m:4.5},{wave:38,scoreToEarn:128e4,enemies:["WEAVER","SHOOTER","TANK","TELEPORTER"],msgKey:"wave_msg_38_overload",s:220,m:4.7},{wave:39,scoreToEarn:144e4,enemies:["GRUNT","GRUNT","SHOOTER","TANK","TELEPORTER"],msgKey:"wave_msg_39_last_stand",s:200,m:4.9},{wave:40,scoreToEarn:0,enemies:[],boss:"BOSS_NEXUS_PRIME",msgKey:"wave_msg_40_nexus_prime",s:0,m:5,h:40},{wave:41,scoreToEarn:165e4,enemies:["SHOOTER","TELEPORTER","WEAVER"],msgKey:"wave_msg_41_countercharge",s:420,m:5.1},{wave:42,scoreToEarn:19e5,enemies:["TANK","SHOOTER","TANK","WEAVER"],msgKey:"wave_msg_42_heavy_push",s:300,m:5.2},{wave:43,scoreToEarn:22e5,enemies:["GRUNT","SHOOTER","TANK"],msgKey:"wave_msg_43_v_shape",s:260,m:5.3},{wave:44,scoreToEarn:255e4,enemies:["TELEPORTER","TELEPORTER","SHOOTER"],msgKey:"wave_msg_44_phase_storm",s:360,m:5.4},{wave:45,scoreToEarn:0,enemies:[],isMultiFormation:!0,msgKey:"wave_msg_45_multi_formation_final",s:0,m:5.5,h:10},{wave:46,scoreToEarn:34e5,enemies:["TANK","TANK","SHOOTER","TELEPORTER"],msgKey:"wave_msg_46_anvil",s:240,m:5.6},{wave:47,scoreToEarn:39e5,enemies:["WEAVER","SHOOTER","TELEPORTER"],msgKey:"wave_msg_47_circle_strike",s:220,m:5.7},{wave:48,scoreToEarn:445e4,enemies:["GRUNT","WEAVER","TANK","SHOOTER","TELEPORTER"],msgKey:"wave_msg_48_maelstrom",s:200,m:5.8},{wave:49,scoreToEarn:505e4,enemies:["TANK","SHOOTER","TELEPORTER","TELEPORTER"],msgKey:"wave_msg_49_critical_mass",s:170,m:5.9},{wave:50,scoreToEarn:0,enemies:[],boss:"BOSS_NEXUS_PRIME",msgKey:"wave_msg_50_final",s:0,m:6,h:60}];class Zt{constructor(e,t){this.baseWidth=800,this.baseHeight=800,this.keys={},this.gameState="LANGUAGE_SELECT",this.isPaused=!1,this.entities=[],this.player=null,this.score=0,this.coins=0,this.scoreEarnedThisLevel=0,this.level=1,this.highscore=0,this.isBossActive=!1,this.stars=[],this.enemySpawnTypes=[],this.enemySpawnInterval=1200,this.enemySpawnTimer=0,this.enemySpeedMultiplier=1,this.enemyHealthMultiplier=1,this.levelMessage="",this.levelScoreToEarn=0,this.gameMode="CAMPAIGN",this.isMobile=!1,this.touchX=null,this.touchY=null,this.scale=1,this.isFormationActive=!1,this.activeFormationEnemies=[],this.formationMovementDirection=1,this.formationMoveTimer=0,this.formationMoveInterval=1e3,this.formationVerticalStep=20,this.isMultiFormationWaveActive=!1,this.multiFormationStage=0,this.introAnimationTimer=0,this.canvas=e,this.ctx=e.getContext("2d"),this.width=this.baseWidth,this.height=this.baseHeight,this.container=document.getElementById("gameContainer"),this.isMobile=/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent),this.shopManager=new $t(this),this.uiManager=new Jt(this,t),this.piManager=new Rt,this.piManager.setGame(this),this.phoenixCoreUI=new Bt(this),this.loadGameData(),this.initEventListeners(),this.createParallaxStarfield(),this.uiManager.populateAllTranslatedContent(),this.resizeGame(),localStorage.getItem("galaxyFallLanguage")?this.changeState("INTRO"):document.getElementById("language-select-screen").style.display="flex"}saveGameData(){localStorage.setItem("galaxyFallSave",JSON.stringify({coins:this.coins,highscore:this.highscore}))}loadGameData(){const e=localStorage.getItem("galaxyFallSave");if(e){const t=JSON.parse(e);this.coins=t.coins||0,this.highscore=t.highscore||0}}awardPiCoinBundle(e){e.coin_reward&&(this.coins+=e.coin_reward,this.saveGameData(),this.uiManager.renderShop())}resizeGame(){const e=window.innerWidth,t=window.innerHeight;this.container.style.transform="",this.container.style.left="",this.container.style.top="",this.width=e,this.height=t-90,this.canvas.width=this.width,this.canvas.height=this.height,this.createParallaxStarfield()}restoreAllGameAudio(){this.uiManager.soundManager.restoreAudioState(),this.player&&this.player.isAlive()&&(console.log("Prüfe Spieler-Sound-Loops zur Wiederherstellung..."),this.player.powerUpManager.isActive("LASER_BEAM")&&(console.log("-> Stelle Laser-Sound wieder her."),this.uiManager.soundManager.playLoop("laser")),this.player.isShielded()&&(console.log("-> Stelle Schild-Sound wieder her."),this.uiManager.soundManager.playLoop("shieldHum",{volume:.08,fade:.1})))}initEventListeners(){window.addEventListener("resize",()=>this.resizeGame());const e=async()=>{await this.uiManager.soundManager.initAudio(),this.restoreAllGameAudio()};document.body.addEventListener("pointerdown",e,!0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(console.log("App wieder im Vordergrund. Nächste User-Interaktion reaktiviert den Sound."),this.uiManager.soundManager.initAudio().then(()=>{this.restoreAllGameAudio()}))});const t=s=>{(this.gameState==="INTRO"||this.gameState==="MENU")&&(s.preventDefault(),this.uiManager.soundManager.initAudio().then(()=>{this.restoreAllGameAudio()}),this.gameState==="INTRO"?this.changeState("MENU"):this.gameState==="MENU"&&s.target===this.canvas&&this.changeState("MODE_SELECT"))};this.isMobile?(this.initMobileControls(),document.body.addEventListener("pointerdown",t,{once:!0})):this.initDesktopControls()}initMobileControls(){const e=document.getElementById("special-inventory"),t=document.getElementById("ultra-inventory"),s=a=>{const i=this.canvas.getBoundingClientRect(),n=a.changedTouches[0];if(!n)return null;const r=n.clientX-i.left,h=n.clientY-i.top;return{x:r,y:h}};this.canvas.addEventListener("touchstart",a=>{if(this.gameState!=="PLAYING"||this.isPaused)return;const i=a.changedTouches[0];if(!i||!e||!t)return;const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();if(!(i.clientX>=n.left&&i.clientX<=n.right&&i.clientY>=n.top&&i.clientY<=n.bottom||i.clientX>=r.left&&i.clientX<=r.right&&i.clientY>=r.top&&i.clientY<=r.bottom)){a.preventDefault();const l=s(a);l&&(this.touchX=l.x,this.touchY=l.y)}},{passive:!1}),this.canvas.addEventListener("touchmove",a=>{if(!(this.gameState!=="PLAYING"||this.isPaused)&&this.touchX!==null&&this.touchY!==null){a.preventDefault();const i=s(a);i&&(this.touchX=i.x,this.touchY=i.y)}},{passive:!1}),this.canvas.addEventListener("touchend",a=>{Array.from(a.touches).some(n=>n.target===this.canvas)||(this.touchX=null,this.touchY=null)})}initDesktopControls(){const e={Digit1:{type:"special",index:0},Digit2:{type:"special",index:1},Digit3:{type:"special",index:2},Digit4:{type:"ultra",index:0},Digit5:{type:"ultra",index:1}};window.addEventListener("keydown",t=>{if(this.keys[t.code]=!0,t.code==="Escape"&&(this.gameState==="PLAYING"||this.isPaused)&&this.togglePause(),t.code==="Enter"&&(t.preventDefault(),this.gameState==="INTRO"?this.changeState("MENU"):this.gameState==="MENU"?this.changeState("MODE_SELECT"):["WIN"].includes(this.gameState)&&this.changeState("MENU")),this.gameState==="PLAYING"&&this.player&&!this.isPaused&&!this.player.isChargingBlackHole){const s=e[t.code];if(s&&s.type==="special"){const a=this.player.powerUpManager.specialInventory[s.index];a&&a.type==="BLACK_HOLE"&&(t.preventDefault(),this.player.isChargingBlackHole=!0,this.player.blackHoleChargeSlot=s.index)}}}),window.addEventListener("keyup",t=>{if(this.keys[t.code]=!1,this.gameState==="PLAYING"&&this.player&&!this.isPaused){const s=e[t.code];if(this.player.isChargingBlackHole&&this.player.blackHoleChargeSlot!==null){const a=Object.values(e).find(n=>n.index===this.player.blackHoleChargeSlot&&n.type==="special"),i=Object.keys(e).find(n=>e[n]===a);t.code===i&&(t.preventDefault(),this.player.powerUpManager.activateSpecial(this.player.blackHoleChargeSlot),this.player.isChargingBlackHole=!1,this.player.blackHoleChargeSlot=null)}else if(s)if(t.preventDefault(),s.type==="special"){const a=this.player.powerUpManager.specialInventory[s.index];a&&a.type!=="BLACK_HOLE"&&this.player.powerUpManager.activateSpecial(s.index)}else s.type==="ultra"&&this.player.powerUpManager.activateUltra(s.index)}})}togglePause(){this.isPaused=!this.isPaused,this.changeState(this.isPaused?"PAUSED":"PLAYING")}startReviveSequence(e,t){this.changeState("REVIVING");const s=this.shopManager.getUpgradeLevel("revive_chance");let a=0;t==="BLUE"&&(a=0),t==="YELLOW"&&(a=s>1?1:0),t==="PURPLE"&&(a=s>2?2:s>1?1:0);const i=this.width-160+a*45+20,n=30;this.addEntity(new Ft(this,i,n,e,t))}changeState(e,t=!1){if(e===this.gameState&&!t)return;const s=document.getElementById("mobile-pause-button");switch(this.isMobile&&(e==="PLAYING"?s.style.display="block":s.style.display="none"),this.uiManager.toggleMainMenu(!1),this.uiManager.togglePauseMenu(!1),this.uiManager.toggleGameOverScreen(!1),this.uiManager.toggleShopScreen(!1),this.uiManager.toggleModeSelectScreen(!1),e==="PAUSED"?this.isPaused=!0:this.gameState==="PAUSED"&&e!=="PAUSED"&&(this.isPaused=!1),this.gameState,this.gameState=e,this.restoreAllGameAudio(),e){case"INTRO":this.introAnimationTimer=0;break;case"MENU":this.entities=[],this.player=null,this.uiManager.toggleMainMenu(!0);break;case"MODE_SELECT":this.uiManager.toggleModeSelectScreen(!0);break;case"PAUSED":this.uiManager.togglePauseMenu(!0);break;case"PLAYING":break;case"LEVEL_START":if(t||!this.player||!this.player.isAlive()){this.level=1,this.score=0,this.entities=[];const i=this.shopManager.getInitialPlayerStats();this.player=new ne(this,i),this.addEntity(this.player)}else this.level++,this.entities=this.entities.filter(i=>i.family==="player"||i.family==="pickup"||i.type==="LASER_BEAM");if(this.gameMode==="CAMPAIGN"&&this.level>R.length){this.changeState("WIN");return}this.isBossActive=!1,this.isFormationActive=!1,this.isMultiFormationWaveActive=!1,this.activeFormationEnemies=[],this.scoreEarnedThisLevel=0,this.configureLevel(),this.changeState("PLAYING_TRANSITION");break;case"PLAYING_TRANSITION":setTimeout(()=>this.changeState("PLAYING"),3e3);break;case"GAME_OVER":this.score>this.highscore&&(this.highscore=this.score),this.saveGameData(),this.submitScoreToServer(),this.uiManager.toggleGameOverScreen(!0);break;case"WIN":this.score>this.highscore&&(this.highscore=this.score),this.saveGameData(),this.submitScoreToServer();break}}async submitScoreToServer(){if(!this.piManager.isAuthenticated||!this.piManager.uid){console.log("Spieler nicht via Pi authentifiziert. Score wird nicht übermittelt.");return}const e={pi_uid:this.piManager.uid,username:this.piManager.username,score:this.score,waves:this.gameMode==="CAMPAIGN"&&this.level>R.length?R.length:this.level,mode:this.gameMode};console.log("Versuche, Score an den Server zu senden:",e);try{const t=await fetch(`${he}/submit-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?console.log("Score erfolgreich an den Server übermittelt."):console.error("Server meldet Fehler beim Speichern des Scores:",t.statusText)}catch(t){console.error("Netzwerkfehler beim Übermitteln des Scores:",t)}}update(e){if(this.gameState==="REVIVING"){this.updateParallaxStarfield(e),this.entities.forEach(t=>{(t.family==="effect"||t instanceof ne)&&t.update(e)}),this.cleanupEntities();return}if(!this.isPaused){if(this.gameState==="INTRO"&&(this.introAnimationTimer+=e),this.gameState!=="PLAYING"){this.gameState!=="LANGUAGE_SELECT"&&this.updateParallaxStarfield(e);return}if(this.updateParallaxStarfield(e),this.entities.forEach(t=>t.update(e)),this.phoenixCoreUI.update(e),this.enemySpawnTimer+=e,this.isMultiFormationWaveActive)this.activeFormationEnemies.length>0&&this.activeFormationEnemies.every(t=>!t.isAlive())?(this.multiFormationStage++,this.activeFormationEnemies=[],this.multiFormationStage>3?(this.isMultiFormationWaveActive=!1,this.changeState("LEVEL_START")):this.spawnNextFormationStage()):this.activeFormationEnemies.length>0&&this.updateActiveFormation(e);else if(this.isFormationActive)this.updateActiveFormation(e),this.activeFormationEnemies.every(t=>!t.isAlive())&&(this.isFormationActive=!1,this.changeState("LEVEL_START"));else if(this.isBossActive){const t=this.entities.find(s=>s.isBoss);if(t){const a=1e3+4e3*(t.health/t.maxHealth);this.enemySpawnTimer>a&&(this.spawnEnemy(!0),this.enemySpawnTimer=0)}else this.isBossActive=!1}else this.enemySpawnTimer>this.enemySpawnInterval&&(this.spawnEnemy(),this.enemySpawnTimer=0),this.levelScoreToEarn>0&&this.scoreEarnedThisLevel>=this.levelScoreToEarn&&this.changeState("LEVEL_START");this.handleCollisions(),this.cleanupEntities(),this.player&&!this.player.isAlive()&&this.changeState("GAME_OVER"),this.uiManager.update()}}draw(){switch(this.ctx.clearRect(0,0,this.width,this.height),this.drawParallaxStarfield(),(this.gameState==="PLAYING"||this.gameState==="PLAYING_TRANSITION"||this.gameState==="PAUSED"||this.gameState==="REVIVING")&&(this.entities.forEach(e=>{e.family!=="player"&&e.draw(this.ctx)}),this.entities.forEach(e=>{e.family==="player"&&e.draw(this.ctx)}),this.phoenixCoreUI.draw(this.ctx)),this.uiManager.drawOverlay(),this.gameState){case"INTRO":case"MENU":this.drawProfessionalIntro();break;case"PLAYING_TRANSITION":this.uiManager.drawLevelMessage();break;case"GAME_OVER":this.uiManager.drawGameOver();break;case"WIN":this.uiManager.drawWinScreen();break}}generateEndlessWave(e){var b,k;const t=M=>this.uiManager.localizationManager.translate(M),s=e>0&&e%4===0;let a=1+e*.02,i=1+e*.015,n=8+Math.pow(e,1.25);s&&(n*=.6);const r={GRUNT:1,WEAVER:2,TANK:3,SHOOTER:4,TELEPORTER:6},h=[{type:"GRUNT",weight:5},{type:"WEAVER",weight:4},{type:"TANK",weight:3},{type:"SHOOTER",weight:3},{type:"TELEPORTER",weight:2}],l=[];let o=0,_=n;for(;_>0;){const M=h.reduce((B,Te)=>B+Te.weight,0);let v=Math.random()*M,A="GRUNT";for(const B of h)if(v-=B.weight,v<=0){A=B.type;break}const te=r[A];if(_-te>=0)l.push(A),_-=te,o+=((b=this.createEnemyByType(A))==null?void 0:b.pointsValue)||10;else if(_-r.GRUNT>=0)l.push("GRUNT"),_-=r.GRUNT,o+=((k=this.createEnemyByType("GRUNT"))==null?void 0:k.pointsValue)||10;else break}l.length===0&&l.push("GRUNT");let d=Math.max(200,800-e*10);s&&(d*=1.5);let u="none",y=s?t("endless_wave_breather"):`${t("endless_wave")} ${e}`;if(!s&&Math.random()<.25){const M=["Frenzy","Thick Skins","Bullet Hell","Blink Storm"];switch(u=M[Math.floor(Math.random()*M.length)],u){case"Frenzy":i*=1.3,d*=.7,y=`${t("endless_wave")} ${e}: ${t("affix_frenzy")}`;break;case"Thick Skins":a*=1.5;for(let v=0;v<Math.ceil(l.length/4);v++)l[Math.floor(Math.random()*l.length)]="TANK";y=`${t("endless_wave")} ${e}: ${t("affix_thick_skins")}`;break;case"Bullet Hell":for(let v=0;v<Math.ceil(l.length/2);v++)l[Math.floor(Math.random()*l.length)]="SHOOTER";y=`${t("endless_wave")} ${e}: ${t("affix_bullet_hell")}`;break;case"Blink Storm":for(let v=0;v<Math.ceil(l.length/2);v++)l[Math.floor(Math.random()*l.length)]="TELEPORTER";y=`${t("endless_wave")} ${e}: ${t("affix_blink_storm")}`;break}}const S=35*1e3/d,c=o/l.length,p=Math.floor(S*c*e*.8);return{wave:e,scoreToEarn:p,enemies:l,msgKey:y,s:d,m:i,h:a}}configureLevel(){let e;if(this.gameMode==="CAMPAIGN"){if(this.level>R.length){this.changeState("WIN");return}e=R[this.level-1]}else e=this.generateEndlessWave(this.level);this.enemySpawnTypes=e.enemies,this.enemySpawnInterval=e.s,this.enemySpeedMultiplier=e.m,this.enemyHealthMultiplier=e.h??1,this.levelMessage=this.uiManager.localizationManager.translate(e.msgKey)||e.msgKey,this.levelScoreToEarn=e.scoreToEarn,this.enemySpawnTimer=0,this.uiManager.update(),e.isMultiFormation?(this.isMultiFormationWaveActive=!0,this.multiFormationStage=1,this.spawnNextFormationStage(),this.isBossActive=!1):e.boss?(this.isBossActive=!0,this.spawnEnemy(!1,e.boss)):e.formation&&e.formation!=="random"?(this.isFormationActive=!0,this.spawnFormation(e.formation),this.isBossActive=!1):this.isBossActive=!1}spawnNextFormationStage(){const e=R[this.level-1];this.levelMessage=this.uiManager.localizationManager.translate(e.msgKey)+` (${this.multiFormationStage}/3)`,this.uiManager.update(),setTimeout(()=>{switch(this.multiFormationStage){case 1:this.spawnFormation_Stage1();break;case 2:this.spawnFormation_Stage2();break;case 3:this.spawnFormation_Stage3();break}},2e3)}updateActiveFormation(e){const t=e/1e3;let s=this.height;if(this.activeFormationEnemies.forEach(i=>{i.isAlive()&&(s=Math.min(s,i.pos.y))}),s<50){this.activeFormationEnemies.forEach(i=>{i.isAlive()&&(i.pos.y+=120*t)});return}if(this.formationMoveTimer+=e,this.formationMoveTimer<this.formationMoveInterval)return;this.formationMoveTimer=0;let a=!1;for(const i of this.activeFormationEnemies){if(!i.isAlive())continue;const n=i.pos.x+10*this.formationMovementDirection;if(n<=0||n+i.width>=this.width){a=!0;break}}a?(this.formationMovementDirection*=-1,this.activeFormationEnemies.forEach(i=>{i.isAlive()&&(i.pos.y+=this.formationVerticalStep)})):this.activeFormationEnemies.forEach(i=>{i.isAlive()&&(i.pos.x+=10*this.formationMovementDirection)})}addEnemyToFormation(e,t,s){e&&(e.pos.x=t,e.pos.y,e.speed=0,e.inFormation=!0,this.activeFormationEnemies.push(e),this.addEntity(e))}spawnFormation_Stage1(){const e={r:4,c:8,hS:60,vS:50,sX:(this.width-480)/2,sY:-250};for(let t=0;t<e.r;t++)for(let s=0;s<e.c;s++){const a=t<1?"TANK":t<2?"WEAVER":"GRUNT";this.addEnemyToFormation(this.createEnemyByType(a),e.sX+s*e.hS,e.sY+t*e.vS)}}spawnFormation_Stage2(){const e={c:5,hS:80,vS:60,sX:this.width/2,sY:-200};for(let t=0;t<e.c;t++){const s=t<2?"SHOOTER":t<4?"WEAVER":"GRUNT";this.addEnemyToFormation(this.createEnemyByType(s),e.sX-t*e.hS/2,e.sY+t*e.vS),t>0&&this.addEnemyToFormation(this.createEnemyByType(s),e.sX+t*e.hS/2,e.sY+t*e.vS)}}spawnFormation_Stage3(){const e={r:5,c:8,hS:60,vS:50,sX:(this.width-480)/2,sY:-250},t=["GRUNT","WEAVER","SHOOTER","TANK"];for(let s=0;s<e.r;s++)for(let a=0;a<e.c;a++){const i=t[Math.floor(Math.random()*t.length)];this.addEnemyToFormation(this.createEnemyByType(i),e.sX+a*e.hS,e.sY+s*e.vS)}}spawnFormation(e){this.activeFormationEnemies=[];const t={rows:5,cols:8,hSpacing:60,vSpacing:50,startX:(this.width-480)/2,startY:-250};for(let s=0;s<t.rows;s++)for(let a=0;a<t.cols;a++){let i=null;switch(e){case"V_SHAPE":(a===s||a===t.cols-1-s)&&(i=this.createEnemyByType(this.enemySpawnTypes[Math.floor(Math.random()*this.enemySpawnTypes.length)]));break;case"CIRCLE":const n=a/t.cols*2*Math.PI,r=150+s*30,h=this.width/2+Math.cos(n)*r,l=-200+Math.sin(n)*r+s*50;i=this.createEnemyByType(this.enemySpawnTypes[Math.floor(Math.random()*this.enemySpawnTypes.length)]),i&&(i.pos=new f(h,l));break;default:const o=s<1?"TANK":s<3?"WEAVER":"GRUNT";i=this.createEnemyByType(o);break}i&&(!i.pos.x&&!i.pos.y&&(i.pos.x=t.startX+a*t.hSpacing,i.pos.y=t.startY+s*t.vSpacing),i.speed=0,i.inFormation=!0,this.activeFormationEnemies.push(i),this.addEntity(i))}}createParallaxStarfield(){this.stars=[];for(let e=0;e<300;e++){const t=e<100?1:e<200?2:3;this.stars.push({pos:new f(Math.random()*this.width,Math.random()*this.height),s:(4-t)*.8,v:(4-t)*24,a:1-t/4})}}updateParallaxStarfield(e){this.stars.forEach(t=>{t.pos.y+=t.v*(e/1e3),t.pos.y>this.height&&(t.pos.y=-(Math.random()*50),t.pos.x=Math.random()*this.width)})}drawParallaxStarfield(){this.stars.forEach(e=>{this.ctx.fillStyle=`rgba(255,255,255,${e.a})`,this.ctx.beginPath(),this.ctx.arc(e.pos.x,e.pos.y,e.s,0,Math.PI*2),this.ctx.fill()})}createEnemyByType(e){switch(e){case"GRUNT":return new me(this);case"TANK":return new de(this);case"WEAVER":return new ge(this);case"SHOOTER":return new ue(this);case"TELEPORTER":return new fe(this);case"BOSS_SENTINEL_PRIME":return new we(this,8*(1+this.level/5),1+this.level/10);case"BOSS_VOID_SERPENT":return new Ee(this,9*(1+this.level/5),1.1+this.level/10);case"BOSS_OMEGA_NEXUS":return new Se(this,10*(1+this.level/5),1.2+this.level/10);case"BOSS_NEXUS_PRIME":return new be(this,12*(1+this.level/5),1.3+this.level/10);default:return null}}spawnEnemy(e=!1,t){let s;if(t)s=t;else if(e){const i=["GRUNT","WEAVER"];s=i[Math.floor(Math.random()*i.length)]}else s=this.enemySpawnTypes[Math.floor(Math.random()*this.enemySpawnTypes.length)];const a=this.createEnemyByType(s);a&&(e&&(a.isBossAdd=!0,a.health*=.5,a.maxHealth*=.5),this.addEntity(a))}drawProfessionalIntro(){const e=this.introAnimationTimer,t=this.width,s=this.height,a=this.ctx;a.textAlign="center",a.textBaseline="middle",a.globalAlpha=1;const i=Math.min(1,t/this.baseWidth),n=Math.max(28,60*i),r=Math.max(32,80*i),h=Math.max(14,20*i),l=Math.min(1,e/2e3);a.globalAlpha=l,a.font=`${n}px 'Press Start 2P'`,a.fillStyle="#00FFFF";const o=Math.sin(e/400)*5+15;if(a.shadowColor="#00FFFF",a.shadowBlur=o,a.fillText("GALAXY FALL",t/2,s/2-r/2),a.shadowBlur=0,e>1500){const _=e-1500,d=Math.min(1,_/2e3),u=1+Math.max(0,1-_/500)*.2;a.save(),a.globalAlpha=d,a.font=`${r}px 'Press Start 2P'`,a.fillStyle="#FFD700",a.shadowColor="#FFA500",a.shadowBlur=20,a.translate(t/2,s/2+n/1.5),a.scale(u,u),a.fillText("PI EDITION",0,0),a.restore()}if(this.gameState==="INTRO"&&e>3500){const _=e-3500,d=Math.sin(_/500)*.4+.6;a.globalAlpha=d,a.fillStyle=`rgba(255, 255, 255, ${d})`,a.font=`${h}px 'Press Start 2P'`;const u=this.isMobile?"intro_prompt_mobile":"intro_prompt";a.fillText(this.uiManager.localizationManager.translate(u),t/2,s/2+180)}a.globalAlpha=1}isColliding(e,t){return e.pos.x<t.pos.x+t.width&&e.pos.x+e.width>t.pos.x&&e.pos.y<t.pos.y+t.height&&e.pos.y+e.height>t.pos.y}addEntity(e){this.entities.push(e)}cleanupEntities(){this.entities=this.entities.filter(e=>e.isAlive())}handleCollisions(){const e=this.entities.filter(i=>i.family==="projectile"),t=this.entities.filter(i=>i.family==="enemy"),s=this.player;if(!s||!s.isAlive())return;if(s.laser&&s.laser.isAlive())for(const i of t){if(!s.laser)break;this.isColliding(s.laser,i)&&(i.takeHit(s.laser.damage),this.uiManager.settings.particles>0&&s.laser&&this.addEntity(new _e(this,s.laser.pos.x+s.laser.width/2,i.pos.y,"#FF8C00")))}e.forEach(i=>{if(i instanceof E&&i.type!=="ENEMY_PROJECTILE"){for(const n of t)if(i.isAlive()&&n.isAlive()&&this.isColliding(i,n)){if(i instanceof Kt){i.hasHit(n)||(i.onHit(n),n.takeHit(i.damage));continue}i.onHit(n),i instanceof ye||n.takeHit(i.damage);break}}}),this.entities.filter(i=>i.family==="pickup").forEach(i=>{i.isAlive()&&this.isColliding(s,i)&&i.onCollect()}),s.isGhosted()||(t.forEach(i=>{i.isAlive()&&this.isColliding(s,i)&&(i.takeHit(i.isBoss?10:999),s.takeHit(i.collisionDamage))}),this.entities.filter(i=>i.type==="ENEMY_PROJECTILE").forEach(i=>{const n=i;n.isAlive()&&this.isColliding(s,n)&&(n.destroy(),s.takeHit(n.playerDamage))}))}}window.addEventListener("load",function(){const m=document.getElementById("gameCanvas"),e={score:document.getElementById("score"),coins:document.getElementById("coins"),level:document.getElementById("level"),levelDisplay:document.getElementById("level-display-container"),highscore:document.getElementById("highscore"),specialInventory:document.getElementById("special-inventory"),ultraInventory:document.getElementById("ultra-inventory"),livesDisplay:document.getElementById("lives-display"),weaponStatus:document.getElementById("weapon-status"),energyBar:document.getElementById("energy-bar"),weaponTierDisplay:document.getElementById("weapon-tier-display")},t=new Zt(m,e);let s=0;function a(i){s||(s=i);let n=i-s;s=i,n=Math.min(n,100),t.update(n),t.draw(),requestAnimationFrame(a)}requestAnimationFrame(a)});
